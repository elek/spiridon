(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qc(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var go={},nf={get exports(){return go},set exports(n){go=n}};const sf={},of=Object.freeze(Object.defineProperty({__proto__:null,default:sf},Symbol.toStringTag,{value:"Module"})),Vc=qc(of);(function(n){(function(e,t){function r(M,l){if(!M)throw new Error(l||"Assertion failed")}function i(M,l){M.super_=l;var u=function(){};u.prototype=l.prototype,M.prototype=new u,M.prototype.constructor=M}function s(M,l,u){if(s.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((l==="le"||l==="be")&&(u=l,l=10),this._init(M||0,l||10,u||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Vc.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,u){return l.cmp(u)>0?l:u},s.min=function(l,u){return l.cmp(u)<0?l:u},s.prototype._init=function(l,u,y){if(typeof l=="number")return this._initNumber(l,u,y);if(typeof l=="object")return this._initArray(l,u,y);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),l=l.toString().replace(/\s+/g,"");var C=0;l[0]==="-"&&(C++,this.negative=1),C<l.length&&(u===16?this._parseHex(l,C,y):(this._parseBase(l,u,C),y==="le"&&this._initArray(this.toArray(),u,y)))},s.prototype._initNumber=function(l,u,y){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),u,y)},s.prototype._initArray=function(l,u,y){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var R,D,V=0;if(y==="be")for(C=l.length-1,R=0;C>=0;C-=3)D=l[C]|l[C-1]<<8|l[C-2]<<16,this.words[R]|=D<<V&67108863,this.words[R+1]=D>>>26-V&67108863,V+=24,V>=26&&(V-=26,R++);else if(y==="le")for(C=0,R=0;C<l.length;C+=3)D=l[C]|l[C+1]<<8|l[C+2]<<16,this.words[R]|=D<<V&67108863,this.words[R+1]=D>>>26-V&67108863,V+=24,V>=26&&(V-=26,R++);return this.strip()};function a(M,l){var u=M.charCodeAt(l);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}function h(M,l,u){var y=a(M,u);return u-1>=l&&(y|=a(M,u-1)<<4),y}s.prototype._parseHex=function(l,u,y){this.length=Math.ceil((l.length-u)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var R=0,D=0,V;if(y==="be")for(C=l.length-1;C>=u;C-=2)V=h(l,u,C)<<R,this.words[D]|=V&67108863,R>=18?(R-=18,D+=1,this.words[D]|=V>>>26):R+=8;else{var O=l.length-u;for(C=O%2===0?u+1:u;C<l.length;C+=2)V=h(l,u,C)<<R,this.words[D]|=V&67108863,R>=18?(R-=18,D+=1,this.words[D]|=V>>>26):R+=8}this.strip()};function b(M,l,u,y){for(var C=0,R=Math.min(M.length,u),D=l;D<R;D++){var V=M.charCodeAt(D)-48;C*=y,V>=49?C+=V-49+10:V>=17?C+=V-17+10:C+=V}return C}s.prototype._parseBase=function(l,u,y){this.words=[0],this.length=1;for(var C=0,R=1;R<=67108863;R*=u)C++;C--,R=R/u|0;for(var D=l.length-y,V=D%C,O=Math.min(D,D-V)+y,x=0,w=y;w<O;w+=C)x=b(l,w,w+C,u),this.imuln(R),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(V!==0){var I=1;for(x=b(l,w,l.length,u),w=0;w<V;w++)I*=u;this.imuln(I),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this.strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var u=0;u<this.length;u++)l.words[u]=this.words[u];l.length=this.length,l.negative=this.negative,l.red=this.red},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,u){l=l||10,u=u|0||1;var y;if(l===16||l==="hex"){y="";for(var C=0,R=0,D=0;D<this.length;D++){var V=this.words[D],O=((V<<C|R)&16777215).toString(16);R=V>>>24-C&16777215,R!==0||D!==this.length-1?y=p[6-O.length]+O+y:y=O+y,C+=2,C>=26&&(C-=26,D--)}for(R!==0&&(y=R.toString(16)+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(l===(l|0)&&l>=2&&l<=36){var x=d[l],w=E[l];y="";var I=this.clone();for(I.negative=0;!I.isZero();){var B=I.modn(w).toString(l);I=I.idivn(w),I.isZero()?y=B+y:y=p[x-B.length]+B+y}for(this.isZero()&&(y="0"+y);y.length%u!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(l,u){return r(typeof o<"u"),this.toArrayLike(o,l,u)},s.prototype.toArray=function(l,u){return this.toArrayLike(Array,l,u)},s.prototype.toArrayLike=function(l,u,y){var C=this.byteLength(),R=y||Math.max(1,C);r(C<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0"),this.strip();var D=u==="le",V=new l(R),O,x,w=this.clone();if(D){for(x=0;!w.isZero();x++)O=w.andln(255),w.iushrn(8),V[x]=O;for(;x<R;x++)V[x]=0}else{for(x=0;x<R-C;x++)V[x]=0;for(x=0;!w.isZero();x++)O=w.andln(255),w.iushrn(8),V[R-x-1]=O}return V},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var u=l,y=0;return u>=4096&&(y+=13,u>>>=13),u>=64&&(y+=7,u>>>=7),u>=8&&(y+=4,u>>>=4),u>=2&&(y+=2,u>>>=2),y+u},s.prototype._zeroBits=function(l){if(l===0)return 26;var u=l,y=0;return u&8191||(y+=13,u>>>=13),u&127||(y+=7,u>>>=7),u&15||(y+=4,u>>>=4),u&3||(y+=2,u>>>=2),u&1||y++,y},s.prototype.bitLength=function(){var l=this.words[this.length-1],u=this._countBits(l);return(this.length-1)*26+u};function v(M){for(var l=new Array(M.bitLength()),u=0;u<l.length;u++){var y=u/26|0,C=u%26;l[u]=(M.words[y]&1<<C)>>>C}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,u=0;u<this.length;u++){var y=this._zeroBits(this.words[u]);if(l+=y,y!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var u=0;u<l.length;u++)this.words[u]=this.words[u]|l.words[u];return this.strip()},s.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var u;this.length>l.length?u=l:u=this;for(var y=0;y<u.length;y++)this.words[y]=this.words[y]&l.words[y];return this.length=u.length,this.strip()},s.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var u,y;this.length>l.length?(u=this,y=l):(u=l,y=this);for(var C=0;C<y.length;C++)this.words[C]=u.words[C]^y.words[C];if(this!==u)for(;C<u.length;C++)this.words[C]=u.words[C];return this.length=u.length,this.strip()},s.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var u=Math.ceil(l/26)|0,y=l%26;this._expand(u),y>0&&u--;for(var C=0;C<u;C++)this.words[C]=~this.words[C]&67108863;return y>0&&(this.words[C]=~this.words[C]&67108863>>26-y),this.strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,u){r(typeof l=="number"&&l>=0);var y=l/26|0,C=l%26;return this._expand(y+1),u?this.words[y]=this.words[y]|1<<C:this.words[y]=this.words[y]&~(1<<C),this.strip()},s.prototype.iadd=function(l){var u;if(this.negative!==0&&l.negative===0)return this.negative=0,u=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,u=this.isub(l),l.negative=1,u._normSign();var y,C;this.length>l.length?(y=this,C=l):(y=l,C=this);for(var R=0,D=0;D<C.length;D++)u=(y.words[D]|0)+(C.words[D]|0)+R,this.words[D]=u&67108863,R=u>>>26;for(;R!==0&&D<y.length;D++)u=(y.words[D]|0)+R,this.words[D]=u&67108863,R=u>>>26;if(this.length=y.length,R!==0)this.words[this.length]=R,this.length++;else if(y!==this)for(;D<y.length;D++)this.words[D]=y.words[D];return this},s.prototype.add=function(l){var u;return l.negative!==0&&this.negative===0?(l.negative=0,u=this.sub(l),l.negative^=1,u):l.negative===0&&this.negative!==0?(this.negative=0,u=l.sub(this),this.negative=1,u):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var u=this.iadd(l);return l.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var y=this.cmp(l);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,R;y>0?(C=this,R=l):(C=l,R=this);for(var D=0,V=0;V<R.length;V++)u=(C.words[V]|0)-(R.words[V]|0)+D,D=u>>26,this.words[V]=u&67108863;for(;D!==0&&V<C.length;V++)u=(C.words[V]|0)+D,D=u>>26,this.words[V]=u&67108863;if(D===0&&V<C.length&&C!==this)for(;V<C.length;V++)this.words[V]=C.words[V];return this.length=Math.max(this.length,V),C!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function T(M,l,u){u.negative=l.negative^M.negative;var y=M.length+l.length|0;u.length=y,y=y-1|0;var C=M.words[0]|0,R=l.words[0]|0,D=C*R,V=D&67108863,O=D/67108864|0;u.words[0]=V;for(var x=1;x<y;x++){for(var w=O>>>26,I=O&67108863,B=Math.min(x,l.length-1),j=Math.max(0,x-M.length+1);j<=B;j++){var g=x-j|0;C=M.words[g]|0,R=l.words[j]|0,D=C*R+I,w+=D/67108864|0,I=D&67108863}u.words[x]=I|0,O=w|0}return O!==0?u.words[x]=O|0:u.length--,u.strip()}var A=function(l,u,y){var C=l.words,R=u.words,D=y.words,V=0,O,x,w,I=C[0]|0,B=I&8191,j=I>>>13,g=C[1]|0,Y=g&8191,Q=g>>>13,$=C[2]|0,P=$&8191,G=$>>>13,te=C[3]|0,oe=te&8191,ue=te>>>13,he=C[4]|0,ee=he&8191,fe=he>>>13,re=C[5]|0,le=re&8191,F=re>>>13,ae=C[6]|0,be=ae&8191,ye=ae>>>13,Me=C[7]|0,Pe=Me&8191,_e=Me>>>13,ie=C[8]|0,m=ie&8191,c=ie>>>13,f=C[9]|0,_=f&8191,N=f>>>13,H=R[0]|0,X=H&8191,ge=H>>>13,Ee=R[1]|0,xe=Ee&8191,we=Ee>>>13,Ae=R[2]|0,Fe=Ae&8191,Ke=Ae>>>13,Yr=R[3]|0,ze=Yr&8191,je=Yr>>>13,Xr=R[4]|0,qe=Xr&8191,Ve=Xr>>>13,Zr=R[5]|0,We=Zr&8191,Je=Zr>>>13,Qr=R[6]|0,Ye=Qr&8191,Xe=Qr>>>13,en=R[7]|0,Ze=en&8191,Qe=en>>>13,tn=R[8]|0,et=tn&8191,tt=tn>>>13,rn=R[9]|0,rt=rn&8191,nt=rn>>>13;y.negative=l.negative^u.negative,y.length=19,O=Math.imul(B,X),x=Math.imul(B,ge),x=x+Math.imul(j,X)|0,w=Math.imul(j,ge);var Mr=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,O=Math.imul(Y,X),x=Math.imul(Y,ge),x=x+Math.imul(Q,X)|0,w=Math.imul(Q,ge),O=O+Math.imul(B,xe)|0,x=x+Math.imul(B,we)|0,x=x+Math.imul(j,xe)|0,w=w+Math.imul(j,we)|0;var Cr=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,O=Math.imul(P,X),x=Math.imul(P,ge),x=x+Math.imul(G,X)|0,w=Math.imul(G,ge),O=O+Math.imul(Y,xe)|0,x=x+Math.imul(Y,we)|0,x=x+Math.imul(Q,xe)|0,w=w+Math.imul(Q,we)|0,O=O+Math.imul(B,Fe)|0,x=x+Math.imul(B,Ke)|0,x=x+Math.imul(j,Fe)|0,w=w+Math.imul(j,Ke)|0;var Rr=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,O=Math.imul(oe,X),x=Math.imul(oe,ge),x=x+Math.imul(ue,X)|0,w=Math.imul(ue,ge),O=O+Math.imul(P,xe)|0,x=x+Math.imul(P,we)|0,x=x+Math.imul(G,xe)|0,w=w+Math.imul(G,we)|0,O=O+Math.imul(Y,Fe)|0,x=x+Math.imul(Y,Ke)|0,x=x+Math.imul(Q,Fe)|0,w=w+Math.imul(Q,Ke)|0,O=O+Math.imul(B,ze)|0,x=x+Math.imul(B,je)|0,x=x+Math.imul(j,ze)|0,w=w+Math.imul(j,je)|0;var Nr=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,O=Math.imul(ee,X),x=Math.imul(ee,ge),x=x+Math.imul(fe,X)|0,w=Math.imul(fe,ge),O=O+Math.imul(oe,xe)|0,x=x+Math.imul(oe,we)|0,x=x+Math.imul(ue,xe)|0,w=w+Math.imul(ue,we)|0,O=O+Math.imul(P,Fe)|0,x=x+Math.imul(P,Ke)|0,x=x+Math.imul(G,Fe)|0,w=w+Math.imul(G,Ke)|0,O=O+Math.imul(Y,ze)|0,x=x+Math.imul(Y,je)|0,x=x+Math.imul(Q,ze)|0,w=w+Math.imul(Q,je)|0,O=O+Math.imul(B,qe)|0,x=x+Math.imul(B,Ve)|0,x=x+Math.imul(j,qe)|0,w=w+Math.imul(j,Ve)|0;var Br=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Br>>>26)|0,Br&=67108863,O=Math.imul(le,X),x=Math.imul(le,ge),x=x+Math.imul(F,X)|0,w=Math.imul(F,ge),O=O+Math.imul(ee,xe)|0,x=x+Math.imul(ee,we)|0,x=x+Math.imul(fe,xe)|0,w=w+Math.imul(fe,we)|0,O=O+Math.imul(oe,Fe)|0,x=x+Math.imul(oe,Ke)|0,x=x+Math.imul(ue,Fe)|0,w=w+Math.imul(ue,Ke)|0,O=O+Math.imul(P,ze)|0,x=x+Math.imul(P,je)|0,x=x+Math.imul(G,ze)|0,w=w+Math.imul(G,je)|0,O=O+Math.imul(Y,qe)|0,x=x+Math.imul(Y,Ve)|0,x=x+Math.imul(Q,qe)|0,w=w+Math.imul(Q,Ve)|0,O=O+Math.imul(B,We)|0,x=x+Math.imul(B,Je)|0,x=x+Math.imul(j,We)|0,w=w+Math.imul(j,Je)|0;var Pr=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,O=Math.imul(be,X),x=Math.imul(be,ge),x=x+Math.imul(ye,X)|0,w=Math.imul(ye,ge),O=O+Math.imul(le,xe)|0,x=x+Math.imul(le,we)|0,x=x+Math.imul(F,xe)|0,w=w+Math.imul(F,we)|0,O=O+Math.imul(ee,Fe)|0,x=x+Math.imul(ee,Ke)|0,x=x+Math.imul(fe,Fe)|0,w=w+Math.imul(fe,Ke)|0,O=O+Math.imul(oe,ze)|0,x=x+Math.imul(oe,je)|0,x=x+Math.imul(ue,ze)|0,w=w+Math.imul(ue,je)|0,O=O+Math.imul(P,qe)|0,x=x+Math.imul(P,Ve)|0,x=x+Math.imul(G,qe)|0,w=w+Math.imul(G,Ve)|0,O=O+Math.imul(Y,We)|0,x=x+Math.imul(Y,Je)|0,x=x+Math.imul(Q,We)|0,w=w+Math.imul(Q,Je)|0,O=O+Math.imul(B,Ye)|0,x=x+Math.imul(B,Xe)|0,x=x+Math.imul(j,Ye)|0,w=w+Math.imul(j,Xe)|0;var Or=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Or>>>26)|0,Or&=67108863,O=Math.imul(Pe,X),x=Math.imul(Pe,ge),x=x+Math.imul(_e,X)|0,w=Math.imul(_e,ge),O=O+Math.imul(be,xe)|0,x=x+Math.imul(be,we)|0,x=x+Math.imul(ye,xe)|0,w=w+Math.imul(ye,we)|0,O=O+Math.imul(le,Fe)|0,x=x+Math.imul(le,Ke)|0,x=x+Math.imul(F,Fe)|0,w=w+Math.imul(F,Ke)|0,O=O+Math.imul(ee,ze)|0,x=x+Math.imul(ee,je)|0,x=x+Math.imul(fe,ze)|0,w=w+Math.imul(fe,je)|0,O=O+Math.imul(oe,qe)|0,x=x+Math.imul(oe,Ve)|0,x=x+Math.imul(ue,qe)|0,w=w+Math.imul(ue,Ve)|0,O=O+Math.imul(P,We)|0,x=x+Math.imul(P,Je)|0,x=x+Math.imul(G,We)|0,w=w+Math.imul(G,Je)|0,O=O+Math.imul(Y,Ye)|0,x=x+Math.imul(Y,Xe)|0,x=x+Math.imul(Q,Ye)|0,w=w+Math.imul(Q,Xe)|0,O=O+Math.imul(B,Ze)|0,x=x+Math.imul(B,Qe)|0,x=x+Math.imul(j,Ze)|0,w=w+Math.imul(j,Qe)|0;var _s=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(_s>>>26)|0,_s&=67108863,O=Math.imul(m,X),x=Math.imul(m,ge),x=x+Math.imul(c,X)|0,w=Math.imul(c,ge),O=O+Math.imul(Pe,xe)|0,x=x+Math.imul(Pe,we)|0,x=x+Math.imul(_e,xe)|0,w=w+Math.imul(_e,we)|0,O=O+Math.imul(be,Fe)|0,x=x+Math.imul(be,Ke)|0,x=x+Math.imul(ye,Fe)|0,w=w+Math.imul(ye,Ke)|0,O=O+Math.imul(le,ze)|0,x=x+Math.imul(le,je)|0,x=x+Math.imul(F,ze)|0,w=w+Math.imul(F,je)|0,O=O+Math.imul(ee,qe)|0,x=x+Math.imul(ee,Ve)|0,x=x+Math.imul(fe,qe)|0,w=w+Math.imul(fe,Ve)|0,O=O+Math.imul(oe,We)|0,x=x+Math.imul(oe,Je)|0,x=x+Math.imul(ue,We)|0,w=w+Math.imul(ue,Je)|0,O=O+Math.imul(P,Ye)|0,x=x+Math.imul(P,Xe)|0,x=x+Math.imul(G,Ye)|0,w=w+Math.imul(G,Xe)|0,O=O+Math.imul(Y,Ze)|0,x=x+Math.imul(Y,Qe)|0,x=x+Math.imul(Q,Ze)|0,w=w+Math.imul(Q,Qe)|0,O=O+Math.imul(B,et)|0,x=x+Math.imul(B,tt)|0,x=x+Math.imul(j,et)|0,w=w+Math.imul(j,tt)|0;var Ms=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,O=Math.imul(_,X),x=Math.imul(_,ge),x=x+Math.imul(N,X)|0,w=Math.imul(N,ge),O=O+Math.imul(m,xe)|0,x=x+Math.imul(m,we)|0,x=x+Math.imul(c,xe)|0,w=w+Math.imul(c,we)|0,O=O+Math.imul(Pe,Fe)|0,x=x+Math.imul(Pe,Ke)|0,x=x+Math.imul(_e,Fe)|0,w=w+Math.imul(_e,Ke)|0,O=O+Math.imul(be,ze)|0,x=x+Math.imul(be,je)|0,x=x+Math.imul(ye,ze)|0,w=w+Math.imul(ye,je)|0,O=O+Math.imul(le,qe)|0,x=x+Math.imul(le,Ve)|0,x=x+Math.imul(F,qe)|0,w=w+Math.imul(F,Ve)|0,O=O+Math.imul(ee,We)|0,x=x+Math.imul(ee,Je)|0,x=x+Math.imul(fe,We)|0,w=w+Math.imul(fe,Je)|0,O=O+Math.imul(oe,Ye)|0,x=x+Math.imul(oe,Xe)|0,x=x+Math.imul(ue,Ye)|0,w=w+Math.imul(ue,Xe)|0,O=O+Math.imul(P,Ze)|0,x=x+Math.imul(P,Qe)|0,x=x+Math.imul(G,Ze)|0,w=w+Math.imul(G,Qe)|0,O=O+Math.imul(Y,et)|0,x=x+Math.imul(Y,tt)|0,x=x+Math.imul(Q,et)|0,w=w+Math.imul(Q,tt)|0,O=O+Math.imul(B,rt)|0,x=x+Math.imul(B,nt)|0,x=x+Math.imul(j,rt)|0,w=w+Math.imul(j,nt)|0;var Cs=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,O=Math.imul(_,xe),x=Math.imul(_,we),x=x+Math.imul(N,xe)|0,w=Math.imul(N,we),O=O+Math.imul(m,Fe)|0,x=x+Math.imul(m,Ke)|0,x=x+Math.imul(c,Fe)|0,w=w+Math.imul(c,Ke)|0,O=O+Math.imul(Pe,ze)|0,x=x+Math.imul(Pe,je)|0,x=x+Math.imul(_e,ze)|0,w=w+Math.imul(_e,je)|0,O=O+Math.imul(be,qe)|0,x=x+Math.imul(be,Ve)|0,x=x+Math.imul(ye,qe)|0,w=w+Math.imul(ye,Ve)|0,O=O+Math.imul(le,We)|0,x=x+Math.imul(le,Je)|0,x=x+Math.imul(F,We)|0,w=w+Math.imul(F,Je)|0,O=O+Math.imul(ee,Ye)|0,x=x+Math.imul(ee,Xe)|0,x=x+Math.imul(fe,Ye)|0,w=w+Math.imul(fe,Xe)|0,O=O+Math.imul(oe,Ze)|0,x=x+Math.imul(oe,Qe)|0,x=x+Math.imul(ue,Ze)|0,w=w+Math.imul(ue,Qe)|0,O=O+Math.imul(P,et)|0,x=x+Math.imul(P,tt)|0,x=x+Math.imul(G,et)|0,w=w+Math.imul(G,tt)|0,O=O+Math.imul(Y,rt)|0,x=x+Math.imul(Y,nt)|0,x=x+Math.imul(Q,rt)|0,w=w+Math.imul(Q,nt)|0;var Rs=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,O=Math.imul(_,Fe),x=Math.imul(_,Ke),x=x+Math.imul(N,Fe)|0,w=Math.imul(N,Ke),O=O+Math.imul(m,ze)|0,x=x+Math.imul(m,je)|0,x=x+Math.imul(c,ze)|0,w=w+Math.imul(c,je)|0,O=O+Math.imul(Pe,qe)|0,x=x+Math.imul(Pe,Ve)|0,x=x+Math.imul(_e,qe)|0,w=w+Math.imul(_e,Ve)|0,O=O+Math.imul(be,We)|0,x=x+Math.imul(be,Je)|0,x=x+Math.imul(ye,We)|0,w=w+Math.imul(ye,Je)|0,O=O+Math.imul(le,Ye)|0,x=x+Math.imul(le,Xe)|0,x=x+Math.imul(F,Ye)|0,w=w+Math.imul(F,Xe)|0,O=O+Math.imul(ee,Ze)|0,x=x+Math.imul(ee,Qe)|0,x=x+Math.imul(fe,Ze)|0,w=w+Math.imul(fe,Qe)|0,O=O+Math.imul(oe,et)|0,x=x+Math.imul(oe,tt)|0,x=x+Math.imul(ue,et)|0,w=w+Math.imul(ue,tt)|0,O=O+Math.imul(P,rt)|0,x=x+Math.imul(P,nt)|0,x=x+Math.imul(G,rt)|0,w=w+Math.imul(G,nt)|0;var Ns=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,O=Math.imul(_,ze),x=Math.imul(_,je),x=x+Math.imul(N,ze)|0,w=Math.imul(N,je),O=O+Math.imul(m,qe)|0,x=x+Math.imul(m,Ve)|0,x=x+Math.imul(c,qe)|0,w=w+Math.imul(c,Ve)|0,O=O+Math.imul(Pe,We)|0,x=x+Math.imul(Pe,Je)|0,x=x+Math.imul(_e,We)|0,w=w+Math.imul(_e,Je)|0,O=O+Math.imul(be,Ye)|0,x=x+Math.imul(be,Xe)|0,x=x+Math.imul(ye,Ye)|0,w=w+Math.imul(ye,Xe)|0,O=O+Math.imul(le,Ze)|0,x=x+Math.imul(le,Qe)|0,x=x+Math.imul(F,Ze)|0,w=w+Math.imul(F,Qe)|0,O=O+Math.imul(ee,et)|0,x=x+Math.imul(ee,tt)|0,x=x+Math.imul(fe,et)|0,w=w+Math.imul(fe,tt)|0,O=O+Math.imul(oe,rt)|0,x=x+Math.imul(oe,nt)|0,x=x+Math.imul(ue,rt)|0,w=w+Math.imul(ue,nt)|0;var Bs=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,O=Math.imul(_,qe),x=Math.imul(_,Ve),x=x+Math.imul(N,qe)|0,w=Math.imul(N,Ve),O=O+Math.imul(m,We)|0,x=x+Math.imul(m,Je)|0,x=x+Math.imul(c,We)|0,w=w+Math.imul(c,Je)|0,O=O+Math.imul(Pe,Ye)|0,x=x+Math.imul(Pe,Xe)|0,x=x+Math.imul(_e,Ye)|0,w=w+Math.imul(_e,Xe)|0,O=O+Math.imul(be,Ze)|0,x=x+Math.imul(be,Qe)|0,x=x+Math.imul(ye,Ze)|0,w=w+Math.imul(ye,Qe)|0,O=O+Math.imul(le,et)|0,x=x+Math.imul(le,tt)|0,x=x+Math.imul(F,et)|0,w=w+Math.imul(F,tt)|0,O=O+Math.imul(ee,rt)|0,x=x+Math.imul(ee,nt)|0,x=x+Math.imul(fe,rt)|0,w=w+Math.imul(fe,nt)|0;var Ps=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,O=Math.imul(_,We),x=Math.imul(_,Je),x=x+Math.imul(N,We)|0,w=Math.imul(N,Je),O=O+Math.imul(m,Ye)|0,x=x+Math.imul(m,Xe)|0,x=x+Math.imul(c,Ye)|0,w=w+Math.imul(c,Xe)|0,O=O+Math.imul(Pe,Ze)|0,x=x+Math.imul(Pe,Qe)|0,x=x+Math.imul(_e,Ze)|0,w=w+Math.imul(_e,Qe)|0,O=O+Math.imul(be,et)|0,x=x+Math.imul(be,tt)|0,x=x+Math.imul(ye,et)|0,w=w+Math.imul(ye,tt)|0,O=O+Math.imul(le,rt)|0,x=x+Math.imul(le,nt)|0,x=x+Math.imul(F,rt)|0,w=w+Math.imul(F,nt)|0;var Os=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Os>>>26)|0,Os&=67108863,O=Math.imul(_,Ye),x=Math.imul(_,Xe),x=x+Math.imul(N,Ye)|0,w=Math.imul(N,Xe),O=O+Math.imul(m,Ze)|0,x=x+Math.imul(m,Qe)|0,x=x+Math.imul(c,Ze)|0,w=w+Math.imul(c,Qe)|0,O=O+Math.imul(Pe,et)|0,x=x+Math.imul(Pe,tt)|0,x=x+Math.imul(_e,et)|0,w=w+Math.imul(_e,tt)|0,O=O+Math.imul(be,rt)|0,x=x+Math.imul(be,nt)|0,x=x+Math.imul(ye,rt)|0,w=w+Math.imul(ye,nt)|0;var Is=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Is>>>26)|0,Is&=67108863,O=Math.imul(_,Ze),x=Math.imul(_,Qe),x=x+Math.imul(N,Ze)|0,w=Math.imul(N,Qe),O=O+Math.imul(m,et)|0,x=x+Math.imul(m,tt)|0,x=x+Math.imul(c,et)|0,w=w+Math.imul(c,tt)|0,O=O+Math.imul(Pe,rt)|0,x=x+Math.imul(Pe,nt)|0,x=x+Math.imul(_e,rt)|0,w=w+Math.imul(_e,nt)|0;var Ls=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,O=Math.imul(_,et),x=Math.imul(_,tt),x=x+Math.imul(N,et)|0,w=Math.imul(N,tt),O=O+Math.imul(m,rt)|0,x=x+Math.imul(m,nt)|0,x=x+Math.imul(c,rt)|0,w=w+Math.imul(c,nt)|0;var $s=(V+O|0)+((x&8191)<<13)|0;V=(w+(x>>>13)|0)+($s>>>26)|0,$s&=67108863,O=Math.imul(_,rt),x=Math.imul(_,nt),x=x+Math.imul(N,rt)|0,w=Math.imul(N,nt);var Fs=(V+O|0)+((x&8191)<<13)|0;return V=(w+(x>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,D[0]=Mr,D[1]=Cr,D[2]=Rr,D[3]=Nr,D[4]=Br,D[5]=Pr,D[6]=Or,D[7]=_s,D[8]=Ms,D[9]=Cs,D[10]=Rs,D[11]=Ns,D[12]=Bs,D[13]=Ps,D[14]=Os,D[15]=Is,D[16]=Ls,D[17]=$s,D[18]=Fs,V!==0&&(D[19]=V,y.length++),y};Math.imul||(A=T);function S(M,l,u){u.negative=l.negative^M.negative,u.length=M.length+l.length;for(var y=0,C=0,R=0;R<u.length-1;R++){var D=C;C=0;for(var V=y&67108863,O=Math.min(R,l.length-1),x=Math.max(0,R-M.length+1);x<=O;x++){var w=R-x,I=M.words[w]|0,B=l.words[x]|0,j=I*B,g=j&67108863;D=D+(j/67108864|0)|0,g=g+V|0,V=g&67108863,D=D+(g>>>26)|0,C+=D>>>26,D&=67108863}u.words[R]=V,y=D,D=C}return y!==0?u.words[R]=y:u.length--,u.strip()}function k(M,l,u){var y=new L;return y.mulp(M,l,u)}s.prototype.mulTo=function(l,u){var y,C=this.length+l.length;return this.length===10&&l.length===10?y=A(this,l,u):C<63?y=T(this,l,u):C<1024?y=S(this,l,u):y=k(this,l,u),y};function L(M,l){this.x=M,this.y=l}L.prototype.makeRBT=function(l){for(var u=new Array(l),y=s.prototype._countBits(l)-1,C=0;C<l;C++)u[C]=this.revBin(C,y,l);return u},L.prototype.revBin=function(l,u,y){if(l===0||l===y-1)return l;for(var C=0,R=0;R<u;R++)C|=(l&1)<<u-R-1,l>>=1;return C},L.prototype.permute=function(l,u,y,C,R,D){for(var V=0;V<D;V++)C[V]=u[l[V]],R[V]=y[l[V]]},L.prototype.transform=function(l,u,y,C,R,D){this.permute(D,l,u,y,C,R);for(var V=1;V<R;V<<=1)for(var O=V<<1,x=Math.cos(2*Math.PI/O),w=Math.sin(2*Math.PI/O),I=0;I<R;I+=O)for(var B=x,j=w,g=0;g<V;g++){var Y=y[I+g],Q=C[I+g],$=y[I+g+V],P=C[I+g+V],G=B*$-j*P;P=B*P+j*$,$=G,y[I+g]=Y+$,C[I+g]=Q+P,y[I+g+V]=Y-$,C[I+g+V]=Q-P,g!==O&&(G=x*B-w*j,j=x*j+w*B,B=G)}},L.prototype.guessLen13b=function(l,u){var y=Math.max(u,l)|1,C=y&1,R=0;for(y=y/2|0;y;y=y>>>1)R++;return 1<<R+1+C},L.prototype.conjugate=function(l,u,y){if(!(y<=1))for(var C=0;C<y/2;C++){var R=l[C];l[C]=l[y-C-1],l[y-C-1]=R,R=u[C],u[C]=-u[y-C-1],u[y-C-1]=-R}},L.prototype.normalize13b=function(l,u){for(var y=0,C=0;C<u/2;C++){var R=Math.round(l[2*C+1]/u)*8192+Math.round(l[2*C]/u)+y;l[C]=R&67108863,R<67108864?y=0:y=R/67108864|0}return l},L.prototype.convert13b=function(l,u,y,C){for(var R=0,D=0;D<u;D++)R=R+(l[D]|0),y[2*D]=R&8191,R=R>>>13,y[2*D+1]=R&8191,R=R>>>13;for(D=2*u;D<C;++D)y[D]=0;r(R===0),r((R&-8192)===0)},L.prototype.stub=function(l){for(var u=new Array(l),y=0;y<l;y++)u[y]=0;return u},L.prototype.mulp=function(l,u,y){var C=2*this.guessLen13b(l.length,u.length),R=this.makeRBT(C),D=this.stub(C),V=new Array(C),O=new Array(C),x=new Array(C),w=new Array(C),I=new Array(C),B=new Array(C),j=y.words;j.length=C,this.convert13b(l.words,l.length,V,C),this.convert13b(u.words,u.length,w,C),this.transform(V,D,O,x,C,R),this.transform(w,D,I,B,C,R);for(var g=0;g<C;g++){var Y=O[g]*I[g]-x[g]*B[g];x[g]=O[g]*B[g]+x[g]*I[g],O[g]=Y}return this.conjugate(O,x,C),this.transform(O,x,j,D,C,R),this.conjugate(j,D,C),this.normalize13b(j,C),y.negative=l.negative^u.negative,y.length=l.length+u.length,y.strip()},s.prototype.mul=function(l){var u=new s(null);return u.words=new Array(this.length+l.length),this.mulTo(l,u)},s.prototype.mulf=function(l){var u=new s(null);return u.words=new Array(this.length+l.length),k(this,l,u)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){r(typeof l=="number"),r(l<67108864);for(var u=0,y=0;y<this.length;y++){var C=(this.words[y]|0)*l,R=(C&67108863)+(u&67108863);u>>=26,u+=C/67108864|0,u+=R>>>26,this.words[y]=R&67108863}return u!==0&&(this.words[y]=u,this.length++),this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var u=v(l);if(u.length===0)return new s(1);for(var y=this,C=0;C<u.length&&u[C]===0;C++,y=y.sqr());if(++C<u.length)for(var R=y.sqr();C<u.length;C++,R=R.sqr())u[C]!==0&&(y=y.mul(R));return y},s.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var u=l%26,y=(l-u)/26,C=67108863>>>26-u<<26-u,R;if(u!==0){var D=0;for(R=0;R<this.length;R++){var V=this.words[R]&C,O=(this.words[R]|0)-V<<u;this.words[R]=O|D,D=V>>>26-u}D&&(this.words[R]=D,this.length++)}if(y!==0){for(R=this.length-1;R>=0;R--)this.words[R+y]=this.words[R];for(R=0;R<y;R++)this.words[R]=0;this.length+=y}return this.strip()},s.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,u,y){r(typeof l=="number"&&l>=0);var C;u?C=(u-u%26)/26:C=0;var R=l%26,D=Math.min((l-R)/26,this.length),V=67108863^67108863>>>R<<R,O=y;if(C-=D,C=Math.max(0,C),O){for(var x=0;x<D;x++)O.words[x]=this.words[x];O.length=D}if(D!==0)if(this.length>D)for(this.length-=D,x=0;x<this.length;x++)this.words[x]=this.words[x+D];else this.words[0]=0,this.length=1;var w=0;for(x=this.length-1;x>=0&&(w!==0||x>=C);x--){var I=this.words[x]|0;this.words[x]=w<<26-R|I>>>R,w=I&V}return O&&w!==0&&(O.words[O.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(l,u,y){return r(this.negative===0),this.iushrn(l,u,y)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var u=l%26,y=(l-u)/26,C=1<<u;if(this.length<=y)return!1;var R=this.words[y];return!!(R&C)},s.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var u=l%26,y=(l-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(u!==0&&y++,this.length=Math.min(y,this.length),u!==0){var C=67108863^67108863>>>u<<u;this.words[this.length-1]&=C}return this.strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,u,y){var C=l.length+y,R;this._expand(C);var D,V=0;for(R=0;R<l.length;R++){D=(this.words[R+y]|0)+V;var O=(l.words[R]|0)*u;D-=O&67108863,V=(D>>26)-(O/67108864|0),this.words[R+y]=D&67108863}for(;R<this.length-y;R++)D=(this.words[R+y]|0)+V,V=D>>26,this.words[R+y]=D&67108863;if(V===0)return this.strip();for(r(V===-1),V=0,R=0;R<this.length;R++)D=-(this.words[R]|0)+V,V=D>>26,this.words[R]=D&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(l,u){var y=this.length-l.length,C=this.clone(),R=l,D=R.words[R.length-1]|0,V=this._countBits(D);y=26-V,y!==0&&(R=R.ushln(y),C.iushln(y),D=R.words[R.length-1]|0);var O=C.length-R.length,x;if(u!=="mod"){x=new s(null),x.length=O+1,x.words=new Array(x.length);for(var w=0;w<x.length;w++)x.words[w]=0}var I=C.clone()._ishlnsubmul(R,1,O);I.negative===0&&(C=I,x&&(x.words[O]=1));for(var B=O-1;B>=0;B--){var j=(C.words[R.length+B]|0)*67108864+(C.words[R.length+B-1]|0);for(j=Math.min(j/D|0,67108863),C._ishlnsubmul(R,j,B);C.negative!==0;)j--,C.negative=0,C._ishlnsubmul(R,1,B),C.isZero()||(C.negative^=1);x&&(x.words[B]=j)}return x&&x.strip(),C.strip(),u!=="div"&&y!==0&&C.iushrn(y),{div:x||null,mod:C}},s.prototype.divmod=function(l,u,y){if(r(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var C,R,D;return this.negative!==0&&l.negative===0?(D=this.neg().divmod(l,u),u!=="mod"&&(C=D.div.neg()),u!=="div"&&(R=D.mod.neg(),y&&R.negative!==0&&R.iadd(l)),{div:C,mod:R}):this.negative===0&&l.negative!==0?(D=this.divmod(l.neg(),u),u!=="mod"&&(C=D.div.neg()),{div:C,mod:D.mod}):this.negative&l.negative?(D=this.neg().divmod(l.neg(),u),u!=="div"&&(R=D.mod.neg(),y&&R.negative!==0&&R.isub(l)),{div:D.div,mod:R}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?u==="div"?{div:this.divn(l.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modn(l.words[0]))}:this._wordDiv(l,u)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var u=this.divmod(l);if(u.mod.isZero())return u.div;var y=u.div.negative!==0?u.mod.isub(l):u.mod,C=l.ushrn(1),R=l.andln(1),D=y.cmp(C);return D<0||R===1&&D===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modn=function(l){r(l<=67108863);for(var u=(1<<26)%l,y=0,C=this.length-1;C>=0;C--)y=(u*y+(this.words[C]|0))%l;return y},s.prototype.idivn=function(l){r(l<=67108863);for(var u=0,y=this.length-1;y>=0;y--){var C=(this.words[y]|0)+u*67108864;this.words[y]=C/l|0,u=C%l}return this.strip()},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var u=this,y=l.clone();u.negative!==0?u=u.umod(l):u=u.clone();for(var C=new s(1),R=new s(0),D=new s(0),V=new s(1),O=0;u.isEven()&&y.isEven();)u.iushrn(1),y.iushrn(1),++O;for(var x=y.clone(),w=u.clone();!u.isZero();){for(var I=0,B=1;!(u.words[0]&B)&&I<26;++I,B<<=1);if(I>0)for(u.iushrn(I);I-- >0;)(C.isOdd()||R.isOdd())&&(C.iadd(x),R.isub(w)),C.iushrn(1),R.iushrn(1);for(var j=0,g=1;!(y.words[0]&g)&&j<26;++j,g<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(D.isOdd()||V.isOdd())&&(D.iadd(x),V.isub(w)),D.iushrn(1),V.iushrn(1);u.cmp(y)>=0?(u.isub(y),C.isub(D),R.isub(V)):(y.isub(u),D.isub(C),V.isub(R))}return{a:D,b:V,gcd:y.iushln(O)}},s.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var u=this,y=l.clone();u.negative!==0?u=u.umod(l):u=u.clone();for(var C=new s(1),R=new s(0),D=y.clone();u.cmpn(1)>0&&y.cmpn(1)>0;){for(var V=0,O=1;!(u.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(u.iushrn(V);V-- >0;)C.isOdd()&&C.iadd(D),C.iushrn(1);for(var x=0,w=1;!(y.words[0]&w)&&x<26;++x,w<<=1);if(x>0)for(y.iushrn(x);x-- >0;)R.isOdd()&&R.iadd(D),R.iushrn(1);u.cmp(y)>=0?(u.isub(y),C.isub(R)):(y.isub(u),R.isub(C))}var I;return u.cmpn(1)===0?I=C:I=R,I.cmpn(0)<0&&I.iadd(l),I},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var u=this.clone(),y=l.clone();u.negative=0,y.negative=0;for(var C=0;u.isEven()&&y.isEven();C++)u.iushrn(1),y.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;y.isEven();)y.iushrn(1);var R=u.cmp(y);if(R<0){var D=u;u=y,y=D}else if(R===0||y.cmpn(1)===0)break;u.isub(y)}while(!0);return y.iushln(C)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){r(typeof l=="number");var u=l%26,y=(l-u)/26,C=1<<u;if(this.length<=y)return this._expand(y+1),this.words[y]|=C,this;for(var R=C,D=y;R!==0&&D<this.length;D++){var V=this.words[D]|0;V+=R,R=V>>>26,V&=67108863,this.words[D]=V}return R!==0&&(this.words[D]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var u=l<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var y;if(this.length>1)y=1;else{u&&(l=-l),r(l<=67108863,"Number is too big");var C=this.words[0]|0;y=C===l?0:C<l?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var u=this.ucmp(l);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var u=0,y=this.length-1;y>=0;y--){var C=this.words[y]|0,R=l.words[y]|0;if(C!==R){C<R?u=-1:C>R&&(u=1);break}}return u},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new ne(l)},s.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var K={k256:null,p224:null,p192:null,p25519:null};function z(M,l){this.name=M,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},z.prototype.ireduce=function(l){var u=l,y;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),y=u.bitLength();while(y>this.n);var C=y<this.n?-1:u.ucmp(this.p);return C===0?(u.words[0]=0,u.length=1):C>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},z.prototype.split=function(l,u){l.iushrn(this.n,0,u)},z.prototype.imulK=function(l){return l.imul(this.k)};function q(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(q,z),q.prototype.split=function(l,u){for(var y=4194303,C=Math.min(l.length,9),R=0;R<C;R++)u.words[R]=l.words[R];if(u.length=C,l.length<=9){l.words[0]=0,l.length=1;return}var D=l.words[9];for(u.words[u.length++]=D&y,R=10;R<l.length;R++){var V=l.words[R]|0;l.words[R-10]=(V&y)<<4|D>>>22,D=V}D>>>=22,l.words[R-10]=D,D===0&&l.length>10?l.length-=10:l.length-=9},q.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var u=0,y=0;y<l.length;y++){var C=l.words[y]|0;u+=C*977,l.words[y]=u&67108863,u=C*64+(u/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function U(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,z);function Z(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(Z,z);function se(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(se,z),se.prototype.imulK=function(l){for(var u=0,y=0;y<l.length;y++){var C=(l.words[y]|0)*19+u,R=C&67108863;C>>>=26,l.words[y]=R,u=C}return u!==0&&(l.words[l.length++]=u),l},s._prime=function(l){if(K[l])return K[l];var u;if(l==="k256")u=new q;else if(l==="p224")u=new U;else if(l==="p192")u=new Z;else if(l==="p25519")u=new se;else throw new Error("Unknown prime "+l);return K[l]=u,u};function ne(M){if(typeof M=="string"){var l=s._prime(M);this.m=l.p,this.prime=l}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}ne.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},ne.prototype._verify2=function(l,u){r((l.negative|u.negative)===0,"red works only with positives"),r(l.red&&l.red===u.red,"red works only with red numbers")},ne.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},ne.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},ne.prototype.add=function(l,u){this._verify2(l,u);var y=l.add(u);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ne.prototype.iadd=function(l,u){this._verify2(l,u);var y=l.iadd(u);return y.cmp(this.m)>=0&&y.isub(this.m),y},ne.prototype.sub=function(l,u){this._verify2(l,u);var y=l.sub(u);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ne.prototype.isub=function(l,u){this._verify2(l,u);var y=l.isub(u);return y.cmpn(0)<0&&y.iadd(this.m),y},ne.prototype.shl=function(l,u){return this._verify1(l),this.imod(l.ushln(u))},ne.prototype.imul=function(l,u){return this._verify2(l,u),this.imod(l.imul(u))},ne.prototype.mul=function(l,u){return this._verify2(l,u),this.imod(l.mul(u))},ne.prototype.isqr=function(l){return this.imul(l,l.clone())},ne.prototype.sqr=function(l){return this.mul(l,l)},ne.prototype.sqrt=function(l){if(l.isZero())return l.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(l,y)}for(var C=this.m.subn(1),R=0;!C.isZero()&&C.andln(1)===0;)R++,C.iushrn(1);r(!C.isZero());var D=new s(1).toRed(this),V=D.redNeg(),O=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,O).cmp(V)!==0;)x.redIAdd(V);for(var w=this.pow(x,C),I=this.pow(l,C.addn(1).iushrn(1)),B=this.pow(l,C),j=R;B.cmp(D)!==0;){for(var g=B,Y=0;g.cmp(D)!==0;Y++)g=g.redSqr();r(Y<j);var Q=this.pow(w,new s(1).iushln(j-Y-1));I=I.redMul(Q),w=Q.redSqr(),B=B.redMul(w),j=Y}return I},ne.prototype.invm=function(l){var u=l._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},ne.prototype.pow=function(l,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return l.clone();var y=4,C=new Array(1<<y);C[0]=new s(1).toRed(this),C[1]=l;for(var R=2;R<C.length;R++)C[R]=this.mul(C[R-1],l);var D=C[0],V=0,O=0,x=u.bitLength()%26;for(x===0&&(x=26),R=u.length-1;R>=0;R--){for(var w=u.words[R],I=x-1;I>=0;I--){var B=w>>I&1;if(D!==C[0]&&(D=this.sqr(D)),B===0&&V===0){O=0;continue}V<<=1,V|=B,O++,!(O!==y&&(R!==0||I!==0))&&(D=this.mul(D,C[V]),O=0,V=0)}x=26}return D},ne.prototype.convertTo=function(l){var u=l.umod(this.m);return u===l?u.clone():u},ne.prototype.convertFrom=function(l){var u=l.clone();return u.red=null,u},s.mont=function(l){return new J(l)};function J(M){ne.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(J,ne),J.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},J.prototype.convertFrom=function(l){var u=this.imod(l.mul(this.rinv));return u.red=null,u},J.prototype.imul=function(l,u){if(l.isZero()||u.isZero())return l.words[0]=0,l.length=1,l;var y=l.imul(u),C=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=y.isub(C).iushrn(this.shift),D=R;return R.cmp(this.m)>=0?D=R.isub(this.m):R.cmpn(0)<0&&(D=R.iadd(this.m)),D._forceRed(this)},J.prototype.mul=function(l,u){if(l.isZero()||u.isZero())return new s(0)._forceRed(this);var y=l.mul(u),C=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=y.isub(C).iushrn(this.shift),D=R;return R.cmp(this.m)>=0?D=R.isub(this.m):R.cmpn(0)<0&&(D=R.iadd(this.m)),D._forceRed(this)},J.prototype.invm=function(l){var u=this.imod(l._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(n,Lt)})(nf);const Te=go,af="logger/5.5.0";let ka=!1,Sa=!1;const Li={debug:1,default:2,info:2,warning:3,error:4,off:5};let _a=Li.default,Us=null;function cf(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const Ma=cf();var yo;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(yo||(yo={}));var ci;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED"})(ci||(ci={}));const Ca="0123456789abcdef";class W{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();Li[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_a>Li[r])&&console.log.apply(console,t)}debug(...e){this._log(W.levels.DEBUG,e)}info(...e){this._log(W.levels.INFO,e)}warn(...e){this._log(W.levels.WARNING,e)}makeError(e,t,r){if(Sa)return this.makeError("censored error",t,{});t||(t=W.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(a=>{const h=r[a];try{if(h instanceof Uint8Array){let b="";for(let p=0;p<h.length;p++)b+=Ca[h[p]>>4],b+=Ca[h[p]&15];i.push(a+"=Uint8Array(0x"+b+")")}else i.push(a+"="+JSON.stringify(h))}catch{i.push(a+"="+JSON.stringify(r[a].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=t,Object.keys(r).forEach(function(a){o[a]=r[a]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,W.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){Ma&&this.throwError("platform missing String.prototype.normalize",W.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ma})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,W.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,W.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,W.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,W.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",W.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",W.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",W.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Us||(Us=new W(af)),Us}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",W.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ka){if(!e)return;this.globalLogger().throwError("error censorship permanent",W.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Sa=!!e,ka=!!t}static setLogLevel(e){const t=Li[e.toLowerCase()];if(t==null){W.globalLogger().warn("invalid log level - "+e);return}_a=t}static from(e){return new W(e)}}W.errors=ci;W.levels=yo;const lf="bytes/5.5.0",at=new W(lf);function Wc(n){return!!n.toHexString}function Mn(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return Mn(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function Un(n){return ke(n)&&!(n.length%2)||jr(n)}function Ra(n){return typeof n=="number"&&n==n&&n%1===0}function jr(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!Ra(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!Ra(t)||t<0||t>=256)return!1}return!0}function de(n,e){if(e||(e={}),typeof n=="number"){at.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),Mn(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Wc(n)&&(n=n.toHexString()),ke(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":at.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return Mn(new Uint8Array(r))}return jr(n)?Mn(new Uint8Array(n)):at.throwArgumentError("invalid arrayify value","value",n)}function He(n){const e=n.map(i=>de(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),Mn(r)}function or(n){let e=de(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function ri(n,e){n=de(n),n.length>e&&at.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),Mn(t)}function ke(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const Ds="0123456789abcdef";function me(n,e){if(e||(e={}),typeof n=="number"){at.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=Ds[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Wc(n))return n.toHexString();if(ke(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":at.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(jr(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=Ds[(i&240)>>4]+Ds[i&15]}return t}return at.throwArgumentError("invalid hexlify value","value",n)}function Hr(n){if(typeof n!="string")n=me(n);else if(!ke(n)||n.length%2)return null;return(n.length-2)/2}function Bt(n,e,t){return typeof n!="string"?n=me(n):(!ke(n)||n.length%2)&&at.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Dt(n){let e="0x";return n.forEach(t=>{e+=me(t).substring(2)}),e}function yi(n){const e=Jc(me(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function Jc(n){typeof n!="string"&&(n=me(n)),ke(n)||at.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Ge(n,e){for(typeof n!="string"?n=me(n):ke(n)||at.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&at.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function dn(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(Un(n)){const t=de(n);t.length!==65&&at.throwArgumentError("invalid signature string; must be 65 bytes","signature",n),e.r=me(t.slice(0,32)),e.s=me(t.slice(32,64)),e.v=t[64],e.v<27&&(e.v===0||e.v===1?e.v+=27:at.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=me(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=ri(de(e._vs),32);e._vs=me(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&at.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=me(i);e.s==null?e.s=o:e.s!==o&&at.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?at.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&at.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!ke(e.r)?at.throwArgumentError("signature missing or invalid r","signature",n):e.r=Ge(e.r,32),e.s==null||!ke(e.s)?at.throwArgumentError("signature missing or invalid s","signature",n):e.s=Ge(e.s,32);const t=de(e.s);t[0]>=128&&at.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=me(t);e._vs&&(ke(e._vs)||at.throwArgumentError("signature invalid _vs","signature",n),e._vs=Ge(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&at.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e}function wo(n){return n=dn(n),me(He([n.r,n.s,n.recoveryParam?"0x1c":"0x1b"]))}const Yc="bignumber/5.5.0";var li=Te.BN;const Qt=new W(Yc),Hs={},Na=9007199254740991;function ff(n){return n!=null&&(pe.isBigNumber(n)||typeof n=="number"&&n%1===0||typeof n=="string"&&!!n.match(/^-?[0-9]+$/)||ke(n)||typeof n=="bigint"||jr(n))}let Ba=!1;class pe{constructor(e,t){Qt.checkNew(new.target,pe),e!==Hs&&Qt.throwError("cannot call constructor directly; use BigNumber.from",W.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Mt(Re(this).fromTwos(e))}toTwos(e){return Mt(Re(this).toTwos(e))}abs(){return this._hex[0]==="-"?pe.from(this._hex.substring(1)):this}add(e){return Mt(Re(this).add(Re(e)))}sub(e){return Mt(Re(this).sub(Re(e)))}div(e){return pe.from(e).isZero()&&Ft("division by zero","div"),Mt(Re(this).div(Re(e)))}mul(e){return Mt(Re(this).mul(Re(e)))}mod(e){const t=Re(e);return t.isNeg()&&Ft("cannot modulo negative values","mod"),Mt(Re(this).umod(t))}pow(e){const t=Re(e);return t.isNeg()&&Ft("cannot raise to negative values","pow"),Mt(Re(this).pow(t))}and(e){const t=Re(e);return(this.isNegative()||t.isNeg())&&Ft("cannot 'and' negative values","and"),Mt(Re(this).and(t))}or(e){const t=Re(e);return(this.isNegative()||t.isNeg())&&Ft("cannot 'or' negative values","or"),Mt(Re(this).or(t))}xor(e){const t=Re(e);return(this.isNegative()||t.isNeg())&&Ft("cannot 'xor' negative values","xor"),Mt(Re(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ft("cannot mask negative values","mask"),Mt(Re(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ft("cannot shift negative values","shl"),Mt(Re(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ft("cannot shift negative values","shr"),Mt(Re(this).shrn(e))}eq(e){return Re(this).eq(Re(e))}lt(e){return Re(this).lt(Re(e))}lte(e){return Re(this).lte(Re(e))}gt(e){return Re(this).gt(Re(e))}gte(e){return Re(this).gte(Re(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Re(this).isZero()}toNumber(){try{return Re(this).toNumber()}catch{Ft("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Qt.throwError("this platform does not support BigInt",W.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Ba||(Ba=!0,Qt.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Qt.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",W.errors.UNEXPECTED_ARGUMENT,{}):Qt.throwError("BigNumber.toString does not accept parameters",W.errors.UNEXPECTED_ARGUMENT,{})),Re(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof pe)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new pe(Hs,fi(e)):e.match(/^-?[0-9]+$/)?new pe(Hs,fi(new li(e))):Qt.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ft("underflow","BigNumber.from",e),(e>=Na||e<=-Na)&&Ft("overflow","BigNumber.from",e),pe.from(String(e));const t=e;if(typeof t=="bigint")return pe.from(t.toString());if(jr(t))return pe.from(me(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return pe.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(ke(r)||r[0]==="-"&&ke(r.substring(1))))return pe.from(r)}return Qt.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function fi(n){if(typeof n!="string")return fi(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&Qt.throwArgumentError("invalid hex","value",n),n=fi(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function Mt(n){return pe.from(fi(n))}function Re(n){const e=pe.from(n).toHexString();return e[0]==="-"?new li("-"+e.substring(3),16):new li(e.substring(2),16)}function Ft(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),Qt.throwError(n,W.errors.NUMERIC_FAULT,r)}function uf(n){return new li(n,36).toString(16)}function hf(n){return new li(n,16).toString(36)}const wt=new W(Yc),ni={},Xc=pe.from(0),Zc=pe.from(-1);function Qc(n,e,t,r){const i={fault:e,operation:t};return r!==void 0&&(i.value=r),wt.throwError(n,W.errors.NUMERIC_FAULT,i)}let ii="0";for(;ii.length<256;)ii+=ii;function jo(n){if(typeof n!="number")try{n=pe.from(n).toNumber()}catch{}return typeof n=="number"&&n>=0&&n<=256&&!(n%1)?"1"+ii.substring(0,n):wt.throwArgumentError("invalid decimal size","decimals",n)}function $i(n,e){e==null&&(e=0);const t=jo(e);n=pe.from(n);const r=n.lt(Xc);r&&(n=n.mul(Zc));let i=n.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=n.div(t).toString();return t.length===1?n=s:n=s+"."+i,r&&(n="-"+n),n}function Xt(n,e){e==null&&(e=0);const t=jo(e);(typeof n!="string"||!n.match(/^-?[0-9.]+$/))&&wt.throwArgumentError("invalid decimal value","value",n);const r=n.substring(0,1)==="-";r&&(n=n.substring(1)),n==="."&&wt.throwArgumentError("missing value","value",n);const i=n.split(".");i.length>2&&wt.throwArgumentError("too many decimal points","value",n);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&Qc("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=pe.from(s),h=pe.from(o);let b=a.mul(t).add(h);return r&&(b=b.mul(Zc)),b}class Cn{constructor(e,t,r,i){e!==ni&&wt.throwError("cannot use FixedFormat constructor; use FixedFormat.from",W.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=jo(i),Object.freeze(this)}static from(e){if(e instanceof Cn)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||wt.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,h)=>e[o]==null?h:(typeof e[o]!==a&&wt.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&wt.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&wt.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Cn(ni,t,r,i)}}class ht{constructor(e,t,r,i){wt.checkNew(new.target,ht),e!==ni&&wt.throwError("cannot use FixedNumber constructor; use FixedNumber.from",W.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&wt.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Xt(this._value,this.format.decimals),r=Xt(e._value,e.format.decimals);return ht.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Xt(this._value,this.format.decimals),r=Xt(e._value,e.format.decimals);return ht.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Xt(this._value,this.format.decimals),r=Xt(e._value,e.format.decimals);return ht.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Xt(this._value,this.format.decimals),r=Xt(e._value,e.format.decimals);return ht.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ht.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(Pa.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ht.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(Pa.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&wt.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=ht.from("1"+ii.substring(0,e),this.format),i=df.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&wt.throwArgumentError("invalid byte width","width",e);const t=pe.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Ge(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ht.fromString(this._value,e)}static fromValue(e,t,r){return r==null&&t!=null&&!ff(t)&&(r=t,t=null),t==null&&(t=0),r==null&&(r="fixed"),ht.fromString($i(e,t),Cn.from(r))}static fromString(e,t){t==null&&(t="fixed");const r=Cn.from(t),i=Xt(e,r.decimals);!r.signed&&i.lt(Xc)&&Qc("unsigned value cannot be negative","overflow","value",e);let s=null;r.signed?s=i.toTwos(r.width).toHexString():(s=i.toHexString(),s=Ge(s,r.width/8));const o=$i(i,r.decimals);return new ht(ni,s,o,r)}static fromBytes(e,t){t==null&&(t="fixed");const r=Cn.from(t);if(de(e).length>r.width/8)throw new Error("overflow");let i=pe.from(e);r.signed&&(i=i.fromTwos(r.width));const s=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=$i(i,r.decimals);return new ht(ni,s,o,r)}static from(e,t){if(typeof e=="string")return ht.fromString(e,t);if(jr(e))return ht.fromBytes(e,t);try{return ht.fromValue(e,0,t)}catch(r){if(r.code!==W.errors.INVALID_ARGUMENT)throw r}return wt.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const Pa=ht.from(1),df=ht.from("0.5"),pf="properties/5.5.0";var xf=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const ji=new W(pf);function ce(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function pt(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function ct(n){return xf(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function qo(n,e){(!n||typeof n!="object")&&ji.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||ji.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function De(n){const e={};for(const t in n)e[t]=n[t];return e}const bf={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function e0(n){if(n==null||bf[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!e0(r))return!1}return!0}return ji.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function mf(n){if(e0(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>St(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&ce(e,t,St(r))}return e}return ji.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function St(n){return mf(n)}class pn{constructor(e){for(const t in e)this[t]=St(e[t])}}const wi="abi/5.5.0",Be=new W(wi),fn={};let Oa={calldata:!0,memory:!0,storage:!0},gf={calldata:!0,memory:!0};function Si(n,e){if(n==="bytes"||n==="string"){if(Oa[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&gf[e])return!0;return(Oa[e]||e==="payable")&&Be.throwArgumentError("invalid modifier","name",e),!1}function yf(n,e){let t=n;function r(a){Be.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let h={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(h.indexed=!1),h}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let h=n[a];switch(h){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=En(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Si(o.type,o.name)&&(o.name=""),o.type=En(o.type);let b=o;o=o.parent,o||r(a),delete b.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Si(o.type,o.name)&&(o.name=""),o.type=En(o.type);let p=i(o.parent);o.parent.components.push(p),delete o.parent,o=p;break;case" ":o.state.allowType&&o.type!==""&&(o.type=En(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):Si(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=h,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=h,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=h,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=h,delete o.state.allowArray):o.state.readArray?o.type+=h:r(a)}}return o.parent&&Be.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):Si(o.type,o.name)&&(o.name=""),s.type=En(s.type),s}function Fi(n,e){for(let t in e)ce(n,t,e[t])}const Oe=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),wf=new RegExp(/^(.*)\[([0-9]*)\]$/);class dt{constructor(e,t){e!==fn&&Be.throwError("use fromString",W.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Fi(this,t);let r=this.type.match(wf);r?Fi(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:dt.fromObject({type:r[1],components:this.components}),baseType:"array"}):Fi(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Oe.sighash),Oe[e]||Be.throwArgumentError("invalid format type","format",e),e===Oe.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Oe.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Oe.full?", ":",")+")"):t+=this.type,e!==Oe.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Oe.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?dt.fromString(e,t):dt.fromObject(e)}static fromObject(e){return dt.isParamType(e)?e:new dt(fn,{name:e.name||null,type:En(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(dt.fromObject):null})}static fromString(e,t){function r(i){return dt.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(yf(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function ui(n,e){return Ef(n).map(t=>dt.fromString(t,e))}class ir{constructor(e,t){e!==fn&&Be.throwError("use a static from method",W.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Fi(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return ir.isFragment(e)?e:typeof e=="string"?ir.fromString(e):ir.fromObject(e)}static fromObject(e){if(ir.isFragment(e))return e;switch(e.type){case"function":return Wt.fromObject(e);case"event":return rr.fromObject(e);case"constructor":return Vt.fromObject(e);case"error":return yr.fromObject(e);case"fallback":case"receive":return null}return Be.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?rr.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Wt.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Vt.fromString(e.trim()):e.split(" ")[0]==="error"?yr.fromString(e.substring(5).trim()):Be.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class rr extends ir{format(e){if(e||(e=Oe.sighash),Oe[e]||Be.throwArgumentError("invalid format type","format",e),e===Oe.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Oe.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Oe.full?", ":",")+") ",e!==Oe.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?rr.fromString(e):rr.fromObject(e)}static fromObject(e){if(rr.isEventFragment(e))return e;e.type!=="event"&&Be.throwArgumentError("invalid event object","value",e);const t={name:hi(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(dt.fromObject):[],type:"event"};return new rr(fn,t)}static fromString(e){let t=e.match(di);t||Be.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Be.warn("unknown modifier: "+i)}}),rr.fromObject({name:t[1].trim(),anonymous:r,inputs:ui(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function t0(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Be.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Be.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=pe.from(t[1]),t[0]):n}function r0(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function n0(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Be.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Be.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Be.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Be.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Be.throwArgumentError("unable to determine stateMutability","value",n),e}class Vt extends ir{format(e){if(e||(e=Oe.sighash),Oe[e]||Be.throwArgumentError("invalid format type","format",e),e===Oe.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Oe.sighash&&Be.throwError("cannot format a constructor for sighash",W.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Oe.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Vt.fromString(e):Vt.fromObject(e)}static fromObject(e){if(Vt.isConstructorFragment(e))return e;e.type!=="constructor"&&Be.throwArgumentError("invalid constructor object","value",e);let t=n0(e);t.constant&&Be.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(dt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?pe.from(e.gas):null};return new Vt(fn,r)}static fromString(e){let t={type:"constructor"};e=t0(e,t);let r=e.match(di);return(!r||r[1].trim()!=="constructor")&&Be.throwArgumentError("invalid constructor string","value",e),t.inputs=ui(r[2].trim(),!1),r0(r[3].trim(),t),Vt.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Wt extends Vt{format(e){if(e||(e=Oe.sighash),Oe[e]||Be.throwArgumentError("invalid format type","format",e),e===Oe.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Oe.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Oe.full?", ":",")+") ",e!==Oe.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Wt.fromString(e):Wt.fromObject(e)}static fromObject(e){if(Wt.isFunctionFragment(e))return e;e.type!=="function"&&Be.throwArgumentError("invalid function object","value",e);let t=n0(e);const r={type:e.type,name:hi(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(dt.fromObject):[],outputs:e.outputs?e.outputs.map(dt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?pe.from(e.gas):null};return new Wt(fn,r)}static fromString(e){let t={type:"function"};e=t0(e,t);let r=e.split(" returns ");r.length>2&&Be.throwArgumentError("invalid function string","value",e);let i=r[0].match(di);if(i||Be.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&hi(t.name),t.inputs=ui(i[2],!1),r0(i[3].trim(),t),r.length>1){let s=r[1].match(di);(s[1].trim()!=""||s[3].trim()!="")&&Be.throwArgumentError("unexpected tokens","value",e),t.outputs=ui(s[2],!1)}else t.outputs=[];return Wt.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Ia(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Be.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class yr extends ir{format(e){if(e||(e=Oe.sighash),Oe[e]||Be.throwArgumentError("invalid format type","format",e),e===Oe.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Oe.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Oe.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?yr.fromString(e):yr.fromObject(e)}static fromObject(e){if(yr.isErrorFragment(e))return e;e.type!=="error"&&Be.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:hi(e.name),inputs:e.inputs?e.inputs.map(dt.fromObject):[]};return Ia(new yr(fn,t))}static fromString(e){let t={type:"error"},r=e.match(di);return r||Be.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&hi(t.name),t.inputs=ui(r[2],!1),Ia(yr.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function En(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const vf=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function hi(n){return(!n||!n.match(vf))&&Be.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const di=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Ef(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Be.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const Vo=new W(wi);function i0(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class Sr{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){Vo.throwArgumentError(e,this.localName,t)}}class vo{constructor(e){ce(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Dt(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(He(e._data))}writeBytes(e){let t=de(e);const r=t.length%this.wordSize;return r&&(t=He([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=de(pe.from(e));return t.length>this.wordSize&&Vo.throwError("value out-of-bounds",W.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=He([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class qi{constructor(e,t,r,i){ce(this,"_data",de(e)),ce(this,"wordSize",t||32),ce(this,"_coerceFunc",r),ce(this,"allowLoose",i),this._offset=0}get data(){return me(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):qi.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:Vo.throwError("data out-of-bounds",W.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new qi(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return pe.from(this.readBytes(this.wordSize))}}var Eo={},Af={get exports(){return Eo},set exports(n){Eo=n}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Lt:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,h=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",b="0123456789abcdef".split(""),p=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],E=[1,256,65536,16777216],v=[6,1536,393216,100663296],T=[0,8,16,24],A=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],S=[224,256,384,512],k=[128,256],L=["hex","buffer","arrayBuffer","array","digest"],K={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"}),h&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(g){return typeof g=="object"&&g.buffer&&g.buffer.constructor===ArrayBuffer});for(var z=function(g,Y,Q){return function($){return new I(g,Y,g).update($)[Q]()}},q=function(g,Y,Q){return function($,P){return new I(g,Y,P).update($)[Q]()}},U=function(g,Y,Q){return function($,P,G,te){return y["cshake"+g].update($,P,G,te)[Q]()}},Z=function(g,Y,Q){return function($,P,G,te){return y["kmac"+g].update($,P,G,te)[Q]()}},se=function(g,Y,Q,$){for(var P=0;P<L.length;++P){var G=L[P];g[G]=Y(Q,$,G)}return g},ne=function(g,Y){var Q=z(g,Y,"hex");return Q.create=function(){return new I(g,Y,g)},Q.update=function($){return Q.create().update($)},se(Q,z,g,Y)},J=function(g,Y){var Q=q(g,Y,"hex");return Q.create=function($){return new I(g,Y,$)},Q.update=function($,P){return Q.create(P).update($)},se(Q,q,g,Y)},M=function(g,Y){var Q=K[g],$=U(g,Y,"hex");return $.create=function(P,G,te){return!G&&!te?y["shake"+g].create(P):new I(g,Y,P).bytepad([G,te],Q)},$.update=function(P,G,te,oe){return $.create(G,te,oe).update(P)},se($,U,g,Y)},l=function(g,Y){var Q=K[g],$=Z(g,Y,"hex");return $.create=function(P,G,te){return new B(g,Y,G).bytepad(["KMAC",te],Q).bytepad([P],Q)},$.update=function(P,G,te,oe){return $.create(P,te,oe).update(G)},se($,Z,g,Y)},u=[{name:"keccak",padding:E,bits:S,createMethod:ne},{name:"sha3",padding:v,bits:S,createMethod:ne},{name:"shake",padding:p,bits:k,createMethod:J},{name:"cshake",padding:d,bits:k,createMethod:M},{name:"kmac",padding:d,bits:k,createMethod:l}],y={},C=[],R=0;R<u.length;++R)for(var D=u[R],V=D.bits,O=0;O<V.length;++O){var x=D.name+"_"+V[O];if(C.push(x),y[x]=D.createMethod(V[O],D.padding),D.name!=="sha3"){var w=D.name+V[O];C.push(w),y[w]=y[x]}}function I(g,Y,Q){this.blocks=[],this.s=[],this.padding=Y,this.outputBits=Q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(g<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Q>>5,this.extraBytes=(Q&31)>>3;for(var $=0;$<50;++$)this.s[$]=0}I.prototype.update=function(g){if(this.finalized)throw new Error(t);var Y,Q=typeof g;if(Q!=="string"){if(Q==="object"){if(g===null)throw new Error(e);if(h&&g.constructor===ArrayBuffer)g=new Uint8Array(g);else if(!Array.isArray(g)&&(!h||!ArrayBuffer.isView(g)))throw new Error(e)}else throw new Error(e);Y=!0}for(var $=this.blocks,P=this.byteCount,G=g.length,te=this.blockCount,oe=0,ue=this.s,he,ee;oe<G;){if(this.reset)for(this.reset=!1,$[0]=this.block,he=1;he<te+1;++he)$[he]=0;if(Y)for(he=this.start;oe<G&&he<P;++oe)$[he>>2]|=g[oe]<<T[he++&3];else for(he=this.start;oe<G&&he<P;++oe)ee=g.charCodeAt(oe),ee<128?$[he>>2]|=ee<<T[he++&3]:ee<2048?($[he>>2]|=(192|ee>>6)<<T[he++&3],$[he>>2]|=(128|ee&63)<<T[he++&3]):ee<55296||ee>=57344?($[he>>2]|=(224|ee>>12)<<T[he++&3],$[he>>2]|=(128|ee>>6&63)<<T[he++&3],$[he>>2]|=(128|ee&63)<<T[he++&3]):(ee=65536+((ee&1023)<<10|g.charCodeAt(++oe)&1023),$[he>>2]|=(240|ee>>18)<<T[he++&3],$[he>>2]|=(128|ee>>12&63)<<T[he++&3],$[he>>2]|=(128|ee>>6&63)<<T[he++&3],$[he>>2]|=(128|ee&63)<<T[he++&3]);if(this.lastByteIndex=he,he>=P){for(this.start=he-P,this.block=$[te],he=0;he<te;++he)ue[he]^=$[he];j(ue),this.reset=!0}else this.start=he}return this},I.prototype.encode=function(g,Y){var Q=g&255,$=1,P=[Q];for(g=g>>8,Q=g&255;Q>0;)P.unshift(Q),g=g>>8,Q=g&255,++$;return Y?P.push($):P.unshift($),this.update(P),P.length},I.prototype.encodeString=function(g){var Y,Q=typeof g;if(Q!=="string"){if(Q==="object"){if(g===null)throw new Error(e);if(h&&g.constructor===ArrayBuffer)g=new Uint8Array(g);else if(!Array.isArray(g)&&(!h||!ArrayBuffer.isView(g)))throw new Error(e)}else throw new Error(e);Y=!0}var $=0,P=g.length;if(Y)$=P;else for(var G=0;G<g.length;++G){var te=g.charCodeAt(G);te<128?$+=1:te<2048?$+=2:te<55296||te>=57344?$+=3:(te=65536+((te&1023)<<10|g.charCodeAt(++G)&1023),$+=4)}return $+=this.encode($*8),this.update(g),$},I.prototype.bytepad=function(g,Y){for(var Q=this.encode(Y),$=0;$<g.length;++$)Q+=this.encodeString(g[$]);var P=Y-Q%Y,G=[];return G.length=P,this.update(G),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var g=this.blocks,Y=this.lastByteIndex,Q=this.blockCount,$=this.s;if(g[Y>>2]|=this.padding[Y&3],this.lastByteIndex===this.byteCount)for(g[0]=g[Q],Y=1;Y<Q+1;++Y)g[Y]=0;for(g[Q-1]|=2147483648,Y=0;Y<Q;++Y)$[Y]^=g[Y];j($)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var g=this.blockCount,Y=this.s,Q=this.outputBlocks,$=this.extraBytes,P=0,G=0,te="",oe;G<Q;){for(P=0;P<g&&G<Q;++P,++G)oe=Y[P],te+=b[oe>>4&15]+b[oe&15]+b[oe>>12&15]+b[oe>>8&15]+b[oe>>20&15]+b[oe>>16&15]+b[oe>>28&15]+b[oe>>24&15];G%g===0&&(j(Y),P=0)}return $&&(oe=Y[P],te+=b[oe>>4&15]+b[oe&15],$>1&&(te+=b[oe>>12&15]+b[oe>>8&15]),$>2&&(te+=b[oe>>20&15]+b[oe>>16&15])),te},I.prototype.arrayBuffer=function(){this.finalize();var g=this.blockCount,Y=this.s,Q=this.outputBlocks,$=this.extraBytes,P=0,G=0,te=this.outputBits>>3,oe;$?oe=new ArrayBuffer(Q+1<<2):oe=new ArrayBuffer(te);for(var ue=new Uint32Array(oe);G<Q;){for(P=0;P<g&&G<Q;++P,++G)ue[G]=Y[P];G%g===0&&j(Y)}return $&&(ue[P]=Y[P],oe=oe.slice(0,te)),oe},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var g=this.blockCount,Y=this.s,Q=this.outputBlocks,$=this.extraBytes,P=0,G=0,te=[],oe,ue;G<Q;){for(P=0;P<g&&G<Q;++P,++G)oe=G<<2,ue=Y[P],te[oe]=ue&255,te[oe+1]=ue>>8&255,te[oe+2]=ue>>16&255,te[oe+3]=ue>>24&255;G%g===0&&j(Y)}return $&&(oe=G<<2,ue=Y[P],te[oe]=ue&255,$>1&&(te[oe+1]=ue>>8&255),$>2&&(te[oe+2]=ue>>16&255)),te};function B(g,Y,Q){I.call(this,g,Y,Q)}B.prototype=new I,B.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var j=function(g){var Y,Q,$,P,G,te,oe,ue,he,ee,fe,re,le,F,ae,be,ye,Me,Pe,_e,ie,m,c,f,_,N,H,X,ge,Ee,xe,we,Ae,Fe,Ke,Yr,ze,je,Xr,qe,Ve,Zr,We,Je,Qr,Ye,Xe,en,Ze,Qe,tn,et,tt,rn,rt,nt,Mr,Cr,Rr,Nr,Br,Pr,Or;for($=0;$<48;$+=2)P=g[0]^g[10]^g[20]^g[30]^g[40],G=g[1]^g[11]^g[21]^g[31]^g[41],te=g[2]^g[12]^g[22]^g[32]^g[42],oe=g[3]^g[13]^g[23]^g[33]^g[43],ue=g[4]^g[14]^g[24]^g[34]^g[44],he=g[5]^g[15]^g[25]^g[35]^g[45],ee=g[6]^g[16]^g[26]^g[36]^g[46],fe=g[7]^g[17]^g[27]^g[37]^g[47],re=g[8]^g[18]^g[28]^g[38]^g[48],le=g[9]^g[19]^g[29]^g[39]^g[49],Y=re^(te<<1|oe>>>31),Q=le^(oe<<1|te>>>31),g[0]^=Y,g[1]^=Q,g[10]^=Y,g[11]^=Q,g[20]^=Y,g[21]^=Q,g[30]^=Y,g[31]^=Q,g[40]^=Y,g[41]^=Q,Y=P^(ue<<1|he>>>31),Q=G^(he<<1|ue>>>31),g[2]^=Y,g[3]^=Q,g[12]^=Y,g[13]^=Q,g[22]^=Y,g[23]^=Q,g[32]^=Y,g[33]^=Q,g[42]^=Y,g[43]^=Q,Y=te^(ee<<1|fe>>>31),Q=oe^(fe<<1|ee>>>31),g[4]^=Y,g[5]^=Q,g[14]^=Y,g[15]^=Q,g[24]^=Y,g[25]^=Q,g[34]^=Y,g[35]^=Q,g[44]^=Y,g[45]^=Q,Y=ue^(re<<1|le>>>31),Q=he^(le<<1|re>>>31),g[6]^=Y,g[7]^=Q,g[16]^=Y,g[17]^=Q,g[26]^=Y,g[27]^=Q,g[36]^=Y,g[37]^=Q,g[46]^=Y,g[47]^=Q,Y=ee^(P<<1|G>>>31),Q=fe^(G<<1|P>>>31),g[8]^=Y,g[9]^=Q,g[18]^=Y,g[19]^=Q,g[28]^=Y,g[29]^=Q,g[38]^=Y,g[39]^=Q,g[48]^=Y,g[49]^=Q,F=g[0],ae=g[1],Ye=g[11]<<4|g[10]>>>28,Xe=g[10]<<4|g[11]>>>28,X=g[20]<<3|g[21]>>>29,ge=g[21]<<3|g[20]>>>29,Nr=g[31]<<9|g[30]>>>23,Br=g[30]<<9|g[31]>>>23,Zr=g[40]<<18|g[41]>>>14,We=g[41]<<18|g[40]>>>14,Fe=g[2]<<1|g[3]>>>31,Ke=g[3]<<1|g[2]>>>31,be=g[13]<<12|g[12]>>>20,ye=g[12]<<12|g[13]>>>20,en=g[22]<<10|g[23]>>>22,Ze=g[23]<<10|g[22]>>>22,Ee=g[33]<<13|g[32]>>>19,xe=g[32]<<13|g[33]>>>19,Pr=g[42]<<2|g[43]>>>30,Or=g[43]<<2|g[42]>>>30,rn=g[5]<<30|g[4]>>>2,rt=g[4]<<30|g[5]>>>2,Yr=g[14]<<6|g[15]>>>26,ze=g[15]<<6|g[14]>>>26,Me=g[25]<<11|g[24]>>>21,Pe=g[24]<<11|g[25]>>>21,Qe=g[34]<<15|g[35]>>>17,tn=g[35]<<15|g[34]>>>17,we=g[45]<<29|g[44]>>>3,Ae=g[44]<<29|g[45]>>>3,f=g[6]<<28|g[7]>>>4,_=g[7]<<28|g[6]>>>4,nt=g[17]<<23|g[16]>>>9,Mr=g[16]<<23|g[17]>>>9,je=g[26]<<25|g[27]>>>7,Xr=g[27]<<25|g[26]>>>7,_e=g[36]<<21|g[37]>>>11,ie=g[37]<<21|g[36]>>>11,et=g[47]<<24|g[46]>>>8,tt=g[46]<<24|g[47]>>>8,Je=g[8]<<27|g[9]>>>5,Qr=g[9]<<27|g[8]>>>5,N=g[18]<<20|g[19]>>>12,H=g[19]<<20|g[18]>>>12,Cr=g[29]<<7|g[28]>>>25,Rr=g[28]<<7|g[29]>>>25,qe=g[38]<<8|g[39]>>>24,Ve=g[39]<<8|g[38]>>>24,m=g[48]<<14|g[49]>>>18,c=g[49]<<14|g[48]>>>18,g[0]=F^~be&Me,g[1]=ae^~ye&Pe,g[10]=f^~N&X,g[11]=_^~H&ge,g[20]=Fe^~Yr&je,g[21]=Ke^~ze&Xr,g[30]=Je^~Ye&en,g[31]=Qr^~Xe&Ze,g[40]=rn^~nt&Cr,g[41]=rt^~Mr&Rr,g[2]=be^~Me&_e,g[3]=ye^~Pe&ie,g[12]=N^~X&Ee,g[13]=H^~ge&xe,g[22]=Yr^~je&qe,g[23]=ze^~Xr&Ve,g[32]=Ye^~en&Qe,g[33]=Xe^~Ze&tn,g[42]=nt^~Cr&Nr,g[43]=Mr^~Rr&Br,g[4]=Me^~_e&m,g[5]=Pe^~ie&c,g[14]=X^~Ee&we,g[15]=ge^~xe&Ae,g[24]=je^~qe&Zr,g[25]=Xr^~Ve&We,g[34]=en^~Qe&et,g[35]=Ze^~tn&tt,g[44]=Cr^~Nr&Pr,g[45]=Rr^~Br&Or,g[6]=_e^~m&F,g[7]=ie^~c&ae,g[16]=Ee^~we&f,g[17]=xe^~Ae&_,g[26]=qe^~Zr&Fe,g[27]=Ve^~We&Ke,g[36]=Qe^~et&Je,g[37]=tn^~tt&Qr,g[46]=Nr^~Pr&rn,g[47]=Br^~Or&rt,g[8]=m^~F&be,g[9]=c^~ae&ye,g[18]=we^~f&N,g[19]=Ae^~_&H,g[28]=Zr^~Fe&Yr,g[29]=We^~Ke&ze,g[38]=et^~Je&Ye,g[39]=tt^~Qr&Xe,g[48]=Pr^~rn&nt,g[49]=Or^~rt&Mr,g[0]^=A[$],g[1]^=A[$+1]};if(a)n.exports=y;else for(R=0;R<C.length;++R)i[C[R]]=y[C[R]]})()})(Af);const Tf=Eo;function Ue(n){return"0x"+Tf.keccak_256(de(n))}const kf="rlp/5.5.0",er=new W(kf);function La(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function $a(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function s0(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(s0(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=La(r.length);return i.unshift(247+i.length),i.concat(r)}Un(n)||er.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(de(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=La(e.length);return t.unshift(183+t.length),t.concat(e)}function un(n){return me(s0(n))}function Fa(n,e,t,r){const i=[];for(;t<e+1+r;){const s=o0(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&er.throwError("child data too short",W.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function o0(n,e){if(n.length===0&&er.throwError("data too short",W.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&er.throwError("data short segment too short",W.errors.BUFFER_OVERRUN,{});const r=$a(n,e+1,t);return e+1+t+r>n.length&&er.throwError("data long segment too short",W.errors.BUFFER_OVERRUN,{}),Fa(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&er.throwError("data array too short",W.errors.BUFFER_OVERRUN,{}),Fa(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&er.throwError("data array too short",W.errors.BUFFER_OVERRUN,{});const r=$a(n,e+1,t);e+1+t+r>n.length&&er.throwError("data array too short",W.errors.BUFFER_OVERRUN,{});const i=me(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&er.throwError("data too short",W.errors.BUFFER_OVERRUN,{});const r=me(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:me(n[e])}}function ns(n){const e=de(n),t=o0(e,0);return t.consumed!==e.length&&er.throwArgumentError("invalid rlp data","data",n),t.result}const Sf=Object.freeze(Object.defineProperty({__proto__:null,decode:ns,encode:un},Symbol.toStringTag,{value:"Module"})),_f="address/5.5.0",Fr=new W(_f);function Ua(n){ke(n,20)||Fr.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=de(Ue(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Mf=9007199254740991;function Cf(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const Wo={};for(let n=0;n<10;n++)Wo[String(n)]=String(n);for(let n=0;n<26;n++)Wo[String.fromCharCode(65+n)]=String(10+n);const Da=Math.floor(Cf(Mf));function a0(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>Wo[r]).join("");for(;e.length>=Da;){let r=e.substring(0,Da);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function $e(n){let e=null;if(typeof n!="string"&&Fr.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=Ua(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&Fr.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==a0(n)&&Fr.throwArgumentError("bad icap checksum","address",n),e=uf(n.substring(4));e.length<40;)e="0"+e;e=Ua("0x"+e)}else Fr.throwArgumentError("invalid address","address",n);return e}function Rf(n){try{return $e(n),!0}catch{}return!1}function Nf(n){let e=hf($e(n).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+a0("XE00"+e)+e}function is(n){let e=null;try{e=$e(n.from)}catch{Fr.throwArgumentError("missing from address","transaction",n)}const t=or(de(pe.from(n.nonce).toHexString()));return $e(Bt(Ue(un([e,t])),12))}function Bf(n,e,t){return Hr(e)!==32&&Fr.throwArgumentError("salt must be 32 bytes","salt",e),Hr(t)!==32&&Fr.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",t),$e(Bt(Ue(He(["0xff",$e(n),e,t])),12))}class Pf extends Sr{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=$e(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return $e(Ge(e.readValue().toHexString(),20))}}class Of extends Sr{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const kn=new W(wi);function c0(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let h={};r=e.map(b=>{const p=b.localName;return p||kn.throwError("cannot encode object for signature with missing names",W.errors.INVALID_ARGUMENT,{argument:"values",coder:b,value:t}),h[p]&&kn.throwError("cannot encode object for signature with duplicate names",W.errors.INVALID_ARGUMENT,{argument:"values",coder:b,value:t}),h[p]=!0,t[p]})}else kn.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&kn.throwArgumentError("types/value length mismatch","tuple",t);let i=new vo(n.wordSize),s=new vo(n.wordSize),o=[];e.forEach((h,b)=>{let p=r[b];if(h.dynamic){let d=s.length;h.encode(s,p);let E=i.writeUpdatableValue();o.push(v=>{E(v+d)})}else h.encode(i,p)}),o.forEach(h=>{h(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function l0(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),h=r.subReader(a.toNumber());try{o=s.decode(h)}catch(b){if(b.code===W.errors.BUFFER_OVERRUN)throw b;o=b,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===W.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const h=t[o];h instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw h}}):t[a]=h});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class If extends Sr{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),kn.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return c0(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&kn.throwError("insufficient data length",W.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new Of(this.coder));return e.coerce(this.name,l0(e,r))}}class Lf extends Sr{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class f0 extends Sr{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=de(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class $f extends f0{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,me(super.decode(e)))}}class Ff extends Sr{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=de(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,me(e.readBytes(this.size)))}}class Uf extends Sr{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const u0="0x0000000000000000000000000000000000000000",h0=pe.from(-1),Jo=pe.from(0),d0=pe.from(1),Df=pe.from(2),Hf=pe.from("1000000000000000000"),p0=pe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Gf=pe.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),Kf=pe.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Yo="0x0000000000000000000000000000000000000000000000000000000000000000",zf="",x0=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:u0,EtherSymbol:zf,HashZero:Yo,MaxInt256:Kf,MaxUint256:p0,MinInt256:Gf,NegativeOne:h0,One:d0,Two:Df,WeiPerEther:Hf,Zero:Jo},Symbol.toStringTag,{value:"Module"}));class jf extends Sr{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=pe.from(t),i=p0.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(d0).mul(h0)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Jo)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const qf="strings/5.5.0",b0=new W(qf);var fr;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(fr||(fr={}));var Nt;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(Nt||(Nt={}));function Vf(n,e,t,r,i){return b0.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function m0(n,e,t,r,i){if(n===Nt.BAD_PREFIX||n===Nt.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===Nt.OVERRUN?t.length-e-1:0}function Wf(n,e,t,r,i){return n===Nt.OVERLONG?(r.push(i),0):(r.push(65533),m0(n,e,t))}const g0=Object.freeze({error:Vf,ignore:m0,replace:Wf});function Xo(n,e){e==null&&(e=g0.error),n=de(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(Nt.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(Nt.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(Nt.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let h=0;h<s;h++){let b=n[r];if((b&192)!=128){r+=e(Nt.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|b&63,r++}if(a!==null){if(a>1114111){r+=e(Nt.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(Nt.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(Nt.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function lt(n,e=fr.current){e!=fr.current&&(b0.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return de(t)}function Gs(n){const e="0000"+n.toString(16);return"\\u"+e.substring(e.length-4)}function Jf(n,e){return'"'+Xo(n,e).map(t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?Gs(t):(t-=65536,Gs((t>>10&1023)+55296)+Gs((t&1023)+56320))}).join("")+'"'}function Ao(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function pr(n,e){return Ao(Xo(n,e))}function To(n,e=fr.current){return Xo(lt(n,e))}function Yf(n){const e=lt(n);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return me(He([e,Yo]).slice(0,32))}function Xf(n){const e=de(n);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return pr(e.slice(0,t))}function Zf(n){if(n.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<n.length;t+=4)e.push(parseInt(n.substring(t,t+4),16));return e}function Zo(n,e){e||(e=function(i){return[parseInt(i,16)]});let t=0,r={};return n.split(",").forEach(i=>{let s=i.split(":");t+=parseInt(s[0],16),r[t]=e(s[1])}),r}function y0(n){let e=0;return n.split(",").map(t=>{let r=t.split("-");r.length===1?r[1]="0":r[1]===""&&(r[1]="1");let i=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:i,h:e}})}function Qo(n,e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];if(t+=i.l,n>=t&&n<=t+i.h&&(n-t)%(i.d||1)===0){if(i.e&&i.e.indexOf(n-t)!==-1)continue;return i}}return null}const Qf=y0("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),eu="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(n=>parseInt(n,16)),tu=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],ru=Zo("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),nu=Zo("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),iu=Zo("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Zf),su=y0("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function ou(n){return n.reduce((e,t)=>(t.forEach(r=>{e.push(r)}),e),[])}function au(n){return!!Qo(n,Qf)}function cu(n){let e=Qo(n,tu);if(e)return[n+e.s];let t=ru[n];if(t)return t;let r=nu[n];if(r)return[n+r[0]];let i=iu[n];return i||null}function lu(n){return!!Qo(n,su)}function ea(n){if(n.match(/^[a-z0-9-]*$/i)&&n.length<=59)return n.toLowerCase();let e=To(n);e=ou(e.map(r=>{if(eu.indexOf(r)>=0)return[];if(r>=65024&&r<=65039)return[];let i=cu(r);return i||[r]})),e=To(Ao(e),fr.NFKC),e.forEach(r=>{if(lu(r))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(r=>{if(au(r))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let t=Ao(e);if(t.substring(0,1)==="-"||t.substring(2,4)==="--"||t.substring(t.length-1)==="-")throw new Error("invalid hyphen");if(t.length>63)throw new Error("too long");return t}class fu extends f0{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,lt(t))}decode(e){return pr(super.decode(e))}}class _i extends Sr{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return c0(e,this.coders,t)}decode(e){return e.coerce(this.name,l0(e,this.coders))}}const jn=new W(wi),uu=new RegExp(/^bytes([0-9]*)$/),hu=new RegExp(/^(u?int)([0-9]*)$/);class ss{constructor(e){jn.checkNew(new.target,ss),ce(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Pf(e.name);case"bool":return new Lf(e.name);case"string":return new fu(e.name);case"bytes":return new $f(e.name);case"array":return new If(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new _i((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new Uf(e.name)}let t=e.type.match(hu);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&jn.throwArgumentError("invalid "+t[1]+" bit length","param",e),new jf(r/8,t[1]==="int",e.name)}if(t=e.type.match(uu),t){let r=parseInt(t[1]);return(r===0||r>32)&&jn.throwArgumentError("invalid bytes length","param",e),new Ff(r,e.name)}return jn.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new qi(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new vo(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(dt.from(i)));return new _i(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&jn.throwError("types/values length mismatch",W.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(dt.from(o))),i=new _i(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(dt.from(o)));return new _i(i,"_").decode(this._getReader(de(t),r))}}const w0=new ss;function Ur(n){return Ue(lt(n))}const v0="hash/5.5.0",Ha=new W(v0),E0=new Uint8Array(32);E0.fill(0);const du=new RegExp("^((.*)\\.)?([^.]+)$");function pu(n){try{const e=n.split(".");for(let t=0;t<e.length;t++)if(ea(e[t]).length===0)throw new Error("empty");return!0}catch{}return!1}function pi(n){typeof n!="string"&&Ha.throwArgumentError("invalid ENS name; not a string","name",n);let e=n,t=E0;for(;e.length;){const r=e.match(du);(r==null||r[2]==="")&&Ha.throwArgumentError("invalid ENS address; missing component","name",n);const i=lt(ea(r[3]));t=Ue(He([t,Ue(i)])),e=r[2]||""}return me(t)}const xu=`Ethereum Signed Message:
`;function ta(n){return typeof n=="string"&&(n=lt(n)),Ue(He([lt(xu),lt(String(n.length)),n]))}var bu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const st=new W(v0),A0=new Uint8Array(32);A0.fill(0);const mu=pe.from(-1),T0=pe.from(0),k0=pe.from(1),gu=pe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function yu(n){const e=de(n),t=e.length%32;return t?Dt([e,A0.slice(t)]):me(e)}const wu=Ge(k0.toHexString(),32),vu=Ge(T0.toHexString(),32),Ga={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ks=["name","version","chainId","verifyingContract","salt"];function Ka(n){return function(e){return typeof e!="string"&&st.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Eu={name:Ka("name"),version:Ka("version"),chainId:function(n){try{return pe.from(n).toString()}catch{}return st.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return $e(n).toLowerCase()}catch{}return st.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=de(n);if(e.length!==32)throw new Error("bad length");return me(e)}catch{}return st.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function zs(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&st.throwArgumentError("invalid numeric width","type",n);const i=gu.mask(t?r-1:r),s=t?i.add(k0).mul(mu):T0;return function(o){const a=pe.from(o);return(a.lt(s)||a.gt(i))&&st.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Ge(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&st.throwArgumentError("invalid bytes width","type",n),function(r){return de(r).length!==t&&st.throwArgumentError(`invalid length for ${n}`,"value",r),yu(r)}}}switch(n){case"address":return function(e){return Ge($e(e),32)};case"bool":return function(e){return e?wu:vu};case"bytes":return function(e){return Ue(e)};case"string":return function(e){return Ur(e)}}return null}function za(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class mt{constructor(e){ce(this,"types",Object.freeze(St(e))),ce(this,"_encoderCache",{}),ce(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const h={};e[a].forEach(b=>{h[b.name]&&st.throwArgumentError(`duplicate variable name ${JSON.stringify(b.name)} in ${JSON.stringify(a)}`,"types",e),h[b.name]=!0;const p=b.type.match(/^([^\x5b]*)(\x5b|$)/)[1];p===a&&st.throwArgumentError(`circular type reference to ${JSON.stringify(p)}`,"types",e),!zs(p)&&(r[p]||st.throwArgumentError(`unknown type ${JSON.stringify(p)}`,"types",e),r[p].push(a),t[a][p]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?st.throwArgumentError("missing primary type","types",e):s.length>1&&st.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),ce(this,"primaryType",s[0]);function o(a,h){h[a]&&st.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),h[a]=!0,Object.keys(t[a]).forEach(b=>{r[b]&&(o(b,h),Object.keys(h).forEach(p=>{i[p][b]=!0}))}),delete h[a]}o(this.primaryType,{});for(const a in i){const h=Object.keys(i[a]);h.sort(),this._types[a]=za(a,e[a])+h.map(b=>za(b,e[b])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=zs(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&st.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let h=a.map(s);return this._types[i]&&(h=h.map(Ue)),Ue(Dt(h))}}const r=this.types[e];if(r){const i=Ur(this._types[e]);return s=>{const o=r.map(({name:a,type:h})=>{const b=this.getEncoder(h)(s[a]);return this._types[h]?Ue(b):b});return o.unshift(i),Dt(o)}}return st.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||st.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ue(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(zs(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&st.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(h=>this._visit(o,h,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:h})=>(o[a]=this._visit(h,t[a],r),o),{}):st.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new mt(e)}static getPrimaryType(e){return mt.from(e).primaryType}static hashStruct(e,t,r){return mt.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=Ga[r];i||st.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Ks.indexOf(r.name)-Ks.indexOf(i.name)),mt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Dt(["0x1901",mt.hashDomain(e),mt.from(t).hash(r)])}static hash(e,t,r){return Ue(mt.encode(e,t,r))}static resolveNames(e,t,r,i){return bu(this,void 0,void 0,function*(){e=De(e);const s={};e.verifyingContract&&!ke(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=mt.from(t);o.visit(r,(a,h)=>(a==="address"&&!ke(h,20)&&(s[h]="0x"),h));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,h)=>a==="address"&&s[h]?s[h]:h),{domain:e,value:r}})}static getPayload(e,t,r){mt.hashDomain(e);const i={},s=[];Ks.forEach(h=>{const b=e[h];b!=null&&(i[h]=Eu[h](b),s.push({name:h,type:Ga[h]}))});const o=mt.from(t),a=De(t);return a.EIP712Domain?st.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(h,b)=>{if(h.match(/^bytes(\d*)/))return me(de(b));if(h.match(/^u?int/))return pe.from(b).toString();switch(h){case"address":return b.toLowerCase();case"bool":return!!b;case"string":return typeof b!="string"&&st.throwArgumentError("invalid string","value",b),b}return st.throwArgumentError("unsupported type","type",h)})}}}const it=new W(wi);class S0 extends pn{}class _0 extends pn{}class Au extends pn{}class Vi extends pn{static isIndexed(e){return!!(e&&e._isIndexed)}}const Tu={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function ja(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class xi{constructor(e){it.checkNew(new.target,xi);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,ce(this,"fragments",t.map(r=>ir.from(r)).filter(r=>r!=null)),ce(this,"_abiCoder",pt(new.target,"getAbiCoder")()),ce(this,"functions",{}),ce(this,"errors",{}),ce(this,"events",{}),ce(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){it.warn("duplicate definition - constructor");return}ce(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){it.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||ce(this,"deploy",Vt.from({payable:!1,type:"constructor"})),ce(this,"_isInterface",!0)}format(e){e||(e=Oe.full),e===Oe.sighash&&it.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Oe.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return w0}static getAddress(e){return $e(e)}static getSighash(e){return Bt(Ur(e.format()),0,4)}static getEventTopic(e){return Ur(e.format())}getFunction(e){if(ke(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];it.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?it.throwArgumentError("no matching function","name",r):i.length>1&&it.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[Wt.fromString(e).format()];return t||it.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(ke(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];it.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?it.throwArgumentError("no matching event","name",r):i.length>1&&it.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[rr.fromString(e).format()];return t||it.throwArgumentError("no matching event","signature",e),t}getError(e){if(ke(e)){const r=pt(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}it.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?it.throwArgumentError("no matching error","name",r):i.length>1&&it.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[Wt.fromString(e).format()];return t||it.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return pt(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),pt(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=de(t);return me(r.slice(0,4))!==this.getSighash(e)&&it.throwArgumentError(`data signature does not match error ${e.name}.`,"data",me(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),me(He([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=de(t);return me(r.slice(0,4))!==this.getSighash(e)&&it.throwArgumentError(`data signature does not match function ${e.name}.`,"data",me(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),me(He([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=de(t),i=null,s=null,o=null,a=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const h=me(r.slice(0,4)),b=Tu[h];if(b)s=this._abiCoder.decode(b.inputs,r.slice(4)),o=b.name,a=b.signature,b.reason&&(i=s[0]);else try{const p=this.getError(h);s=this._abiCoder.decode(p.inputs,r.slice(4)),o=p.name,a=p.format()}catch(p){console.log(p)}break}}return it.throwError("call revert exception",W.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:s,errorName:o,errorSignature:a,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),me(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&it.throwError("too many arguments for "+e.format(),W.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Ur(o):s.type==="bytes"?Ue(me(o)):(s.type==="address"&&this._abiCoder.encode(["address"],[o]),Ge(me(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&it.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?it.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(h=>i(a,h))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&it.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const h=t[a];if(o.indexed)if(o.type==="string")r.push(Ur(h));else if(o.type==="bytes")r.push(Ue(h));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[h]))}else i.push(o),s.push(h)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let E=this.getEventTopic(e);(!ke(r[0],32)||r[0].toLowerCase()!==E)&&it.throwError("fragment/topic mismatch",W.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:E,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((E,v)=>{E.indexed?E.type==="string"||E.type==="bytes"||E.baseType==="tuple"||E.baseType==="array"?(i.push(dt.fromObject({type:"bytes32",name:E.name})),o.push(!0)):(i.push(E),o.push(!1)):(s.push(E),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,He(r)):null,h=this._abiCoder.decode(s,t,!0),b=[],p=0,d=0;e.inputs.forEach((E,v)=>{if(E.indexed)if(a==null)b[v]=new Vi({_isIndexed:!0,hash:null});else if(o[v])b[v]=new Vi({_isIndexed:!0,hash:a[d++]});else try{b[v]=a[d++]}catch(T){b[v]=T}else try{b[v]=h[p++]}catch(T){b[v]=T}if(E.name&&b[E.name]==null){const T=b[v];T instanceof Error?Object.defineProperty(b,E.name,{enumerable:!0,get:()=>{throw ja(`property ${JSON.stringify(E.name)}`,T)}}):b[E.name]=T}});for(let E=0;E<b.length;E++){const v=b[E];v instanceof Error&&Object.defineProperty(b,E,{enumerable:!0,get:()=>{throw ja(`index ${E}`,v)}})}return Object.freeze(b)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new _0({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:pe.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new S0({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=me(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Au({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const ku="abstract-provider/5.5.1";var Su=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const _u=new W(ku);class Mu extends pn{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Gr{constructor(){_u.checkAbstract(new.target,Gr),ce(this,"_isProvider",!0)}getFeeData(){return Su(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield ct({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)});let r=null,i=null;return e&&e.baseFeePerGas&&(i=pe.from("2500000000"),r=e.baseFeePerGas.mul(2).add(i)),{maxFeePerGas:r,maxPriorityFeePerGas:i,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Cu="abstract-signer/5.5.0";var zt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Ot=new W(Cu),Ru=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Nu=[W.errors.INSUFFICIENT_FUNDS,W.errors.NONCE_EXPIRED,W.errors.REPLACEMENT_UNDERPRICED];class _r{constructor(){Ot.checkAbstract(new.target,_r),ce(this,"_isSigner",!0)}getBalance(e){return zt(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return zt(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return zt(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield ct(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return zt(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield ct(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return zt(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return zt(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return zt(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return zt(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return zt(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)Ru.indexOf(r)===-1&&Ot.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=De(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Ot.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return zt(this,void 0,void 0,function*(){const t=yield ct(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>zt(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Ot.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Ot.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Ot.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Ot.throwError("network does not support EIP-1559",W.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Ot.throwError("failed to get consistent fee data",W.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(Nu.indexOf(i.code)>=0)throw i;return Ot.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",W.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Ot.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield ct(t)})}_checkProvider(e){this.provider||Ot.throwError("missing provider",W.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Pn extends _r{constructor(e,t){Ot.checkNew(new.target,Pn),super(),ce(this,"address",e),ce(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Ot.throwError(e,W.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Pn(this.address,e)}}var kt={},Ne={},vi=M0;function M0(n,e){if(!n)throw new Error(e||"Assertion failed")}M0.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var ko={},qa={get exports(){return ko},set exports(n){ko=n}};typeof Object.create=="function"?qa.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:qa.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Bu=vi,Pu=ko;Ne.inherits=Pu;function Ou(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function Iu(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):Ou(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Ne.toArray=Iu;function Lu(n){for(var e="",t=0;t<n.length;t++)e+=R0(n[t].toString(16));return e}Ne.toHex=Lu;function C0(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Ne.htonl=C0;function $u(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=C0(i)),t+=N0(i.toString(16))}return t}Ne.toHex32=$u;function R0(n){return n.length===1?"0"+n:n}Ne.zero2=R0;function N0(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Ne.zero8=N0;function Fu(n,e,t,r){var i=t-e;Bu(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var h;r==="big"?h=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:h=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=h>>>0}return s}Ne.join32=Fu;function Uu(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Ne.split32=Uu;function Du(n,e){return n>>>e|n<<32-e}Ne.rotr32=Du;function Hu(n,e){return n<<e|n>>>32-e}Ne.rotl32=Hu;function Gu(n,e){return n+e>>>0}Ne.sum32=Gu;function Ku(n,e,t){return n+e+t>>>0}Ne.sum32_3=Ku;function zu(n,e,t,r){return n+e+t+r>>>0}Ne.sum32_4=zu;function ju(n,e,t,r,i){return n+e+t+r+i>>>0}Ne.sum32_5=ju;function qu(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Ne.sum64=qu;function Vu(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Ne.sum64_hi=Vu;function Wu(n,e,t,r){var i=e+r;return i>>>0}Ne.sum64_lo=Wu;function Ju(n,e,t,r,i,s,o,a){var h=0,b=e;b=b+r>>>0,h+=b<e?1:0,b=b+s>>>0,h+=b<s?1:0,b=b+a>>>0,h+=b<a?1:0;var p=n+t+i+o+h;return p>>>0}Ne.sum64_4_hi=Ju;function Yu(n,e,t,r,i,s,o,a){var h=e+r+s+a;return h>>>0}Ne.sum64_4_lo=Yu;function Xu(n,e,t,r,i,s,o,a,h,b){var p=0,d=e;d=d+r>>>0,p+=d<e?1:0,d=d+s>>>0,p+=d<s?1:0,d=d+a>>>0,p+=d<a?1:0,d=d+b>>>0,p+=d<b?1:0;var E=n+t+i+o+h+p;return E>>>0}Ne.sum64_5_hi=Xu;function Zu(n,e,t,r,i,s,o,a,h,b){var p=e+r+s+a+b;return p>>>0}Ne.sum64_5_lo=Zu;function Qu(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Ne.rotr64_hi=Qu;function eh(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ne.rotr64_lo=eh;function th(n,e,t){return n>>>t}Ne.shr64_hi=th;function rh(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ne.shr64_lo=rh;var Dn={},Va=Ne,nh=vi;function os(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Dn.BlockHash=os;os.prototype.update=function(e,t){if(e=Va.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=Va.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};os.prototype.digest=function(e){return this.update(this._pad()),nh(this.pending===null),this._digest(e)};os.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Hn={},xr={},ih=Ne,ar=ih.rotr32;function sh(n,e,t,r){if(n===0)return B0(e,t,r);if(n===1||n===3)return O0(e,t,r);if(n===2)return P0(e,t,r)}xr.ft_1=sh;function B0(n,e,t){return n&e^~n&t}xr.ch32=B0;function P0(n,e,t){return n&e^n&t^e&t}xr.maj32=P0;function O0(n,e,t){return n^e^t}xr.p32=O0;function oh(n){return ar(n,2)^ar(n,13)^ar(n,22)}xr.s0_256=oh;function ah(n){return ar(n,6)^ar(n,11)^ar(n,25)}xr.s1_256=ah;function ch(n){return ar(n,7)^ar(n,18)^n>>>3}xr.g0_256=ch;function lh(n){return ar(n,17)^ar(n,19)^n>>>10}xr.g1_256=lh;var On=Ne,fh=Dn,uh=xr,js=On.rotl32,qn=On.sum32,hh=On.sum32_5,dh=uh.ft_1,I0=fh.BlockHash,ph=[1518500249,1859775393,2400959708,3395469782];function ur(){if(!(this instanceof ur))return new ur;I0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}On.inherits(ur,I0);var xh=ur;ur.blockSize=512;ur.outSize=160;ur.hmacStrength=80;ur.padLength=64;ur.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=js(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],h=this.h[3],b=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),d=hh(js(s,5),dh(p,o,a,h),b,r[i],ph[p]);b=h,h=a,a=js(o,30),o=s,s=d}this.h[0]=qn(this.h[0],s),this.h[1]=qn(this.h[1],o),this.h[2]=qn(this.h[2],a),this.h[3]=qn(this.h[3],h),this.h[4]=qn(this.h[4],b)};ur.prototype._digest=function(e){return e==="hex"?On.toHex32(this.h,"big"):On.split32(this.h,"big")};var In=Ne,bh=Dn,Gn=xr,mh=vi,jt=In.sum32,gh=In.sum32_4,yh=In.sum32_5,wh=Gn.ch32,vh=Gn.maj32,Eh=Gn.s0_256,Ah=Gn.s1_256,Th=Gn.g0_256,kh=Gn.g1_256,L0=bh.BlockHash,Sh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hr(){if(!(this instanceof hr))return new hr;L0.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Sh,this.W=new Array(64)}In.inherits(hr,L0);var $0=hr;hr.blockSize=512;hr.outSize=256;hr.hmacStrength=192;hr.padLength=64;hr.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=gh(kh(r[i-2]),r[i-7],Th(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],h=this.h[3],b=this.h[4],p=this.h[5],d=this.h[6],E=this.h[7];for(mh(this.k.length===r.length),i=0;i<r.length;i++){var v=yh(E,Ah(b),wh(b,p,d),this.k[i],r[i]),T=jt(Eh(s),vh(s,o,a));E=d,d=p,p=b,b=jt(h,v),h=a,a=o,o=s,s=jt(v,T)}this.h[0]=jt(this.h[0],s),this.h[1]=jt(this.h[1],o),this.h[2]=jt(this.h[2],a),this.h[3]=jt(this.h[3],h),this.h[4]=jt(this.h[4],b),this.h[5]=jt(this.h[5],p),this.h[6]=jt(this.h[6],d),this.h[7]=jt(this.h[7],E)};hr.prototype._digest=function(e){return e==="hex"?In.toHex32(this.h,"big"):In.split32(this.h,"big")};var So=Ne,F0=$0;function Er(){if(!(this instanceof Er))return new Er;F0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}So.inherits(Er,F0);var _h=Er;Er.blockSize=512;Er.outSize=224;Er.hmacStrength=192;Er.padLength=64;Er.prototype._digest=function(e){return e==="hex"?So.toHex32(this.h.slice(0,7),"big"):So.split32(this.h.slice(0,7),"big")};var Pt=Ne,Mh=Dn,Ch=vi,cr=Pt.rotr64_hi,lr=Pt.rotr64_lo,U0=Pt.shr64_hi,D0=Pt.shr64_lo,Ir=Pt.sum64,qs=Pt.sum64_hi,Vs=Pt.sum64_lo,Rh=Pt.sum64_4_hi,Nh=Pt.sum64_4_lo,Bh=Pt.sum64_5_hi,Ph=Pt.sum64_5_lo,H0=Mh.BlockHash,Oh=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Yt(){if(!(this instanceof Yt))return new Yt;H0.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Oh,this.W=new Array(160)}Pt.inherits(Yt,H0);var G0=Yt;Yt.blockSize=1024;Yt.outSize=512;Yt.hmacStrength=192;Yt.padLength=128;Yt.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=jh(r[i-4],r[i-3]),o=qh(r[i-4],r[i-3]),a=r[i-14],h=r[i-13],b=Kh(r[i-30],r[i-29]),p=zh(r[i-30],r[i-29]),d=r[i-32],E=r[i-31];r[i]=Rh(s,o,a,h,b,p,d,E),r[i+1]=Nh(s,o,a,h,b,p,d,E)}};Yt.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],b=this.h[5],p=this.h[6],d=this.h[7],E=this.h[8],v=this.h[9],T=this.h[10],A=this.h[11],S=this.h[12],k=this.h[13],L=this.h[14],K=this.h[15];Ch(this.k.length===r.length);for(var z=0;z<r.length;z+=2){var q=L,U=K,Z=Hh(E,v),se=Gh(E,v),ne=Ih(E,v,T,A,S),J=Lh(E,v,T,A,S,k),M=this.k[z],l=this.k[z+1],u=r[z],y=r[z+1],C=Bh(q,U,Z,se,ne,J,M,l,u,y),R=Ph(q,U,Z,se,ne,J,M,l,u,y);q=Uh(i,s),U=Dh(i,s),Z=$h(i,s,o,a,h),se=Fh(i,s,o,a,h,b);var D=qs(q,U,Z,se),V=Vs(q,U,Z,se);L=S,K=k,S=T,k=A,T=E,A=v,E=qs(p,d,C,R),v=Vs(d,d,C,R),p=h,d=b,h=o,b=a,o=i,a=s,i=qs(C,R,D,V),s=Vs(C,R,D,V)}Ir(this.h,0,i,s),Ir(this.h,2,o,a),Ir(this.h,4,h,b),Ir(this.h,6,p,d),Ir(this.h,8,E,v),Ir(this.h,10,T,A),Ir(this.h,12,S,k),Ir(this.h,14,L,K)};Yt.prototype._digest=function(e){return e==="hex"?Pt.toHex32(this.h,"big"):Pt.split32(this.h,"big")};function Ih(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function Lh(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function $h(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function Fh(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function Uh(n,e){var t=cr(n,e,28),r=cr(e,n,2),i=cr(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function Dh(n,e){var t=lr(n,e,28),r=lr(e,n,2),i=lr(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function Hh(n,e){var t=cr(n,e,14),r=cr(n,e,18),i=cr(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function Gh(n,e){var t=lr(n,e,14),r=lr(n,e,18),i=lr(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function Kh(n,e){var t=cr(n,e,1),r=cr(n,e,8),i=U0(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function zh(n,e){var t=lr(n,e,1),r=lr(n,e,8),i=D0(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function jh(n,e){var t=cr(n,e,19),r=cr(e,n,29),i=U0(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function qh(n,e){var t=lr(n,e,19),r=lr(e,n,29),i=D0(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var _o=Ne,K0=G0;function Ar(){if(!(this instanceof Ar))return new Ar;K0.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}_o.inherits(Ar,K0);var Vh=Ar;Ar.blockSize=1024;Ar.outSize=384;Ar.hmacStrength=192;Ar.padLength=128;Ar.prototype._digest=function(e){return e==="hex"?_o.toHex32(this.h.slice(0,12),"big"):_o.split32(this.h.slice(0,12),"big")};Hn.sha1=xh;Hn.sha224=_h;Hn.sha256=$0;Hn.sha384=Vh;Hn.sha512=G0;var z0={},hn=Ne,Wh=Dn,Mi=hn.rotl32,Wa=hn.sum32,Vn=hn.sum32_3,Ja=hn.sum32_4,j0=Wh.BlockHash;function dr(){if(!(this instanceof dr))return new dr;j0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}hn.inherits(dr,j0);z0.ripemd160=dr;dr.blockSize=512;dr.outSize=160;dr.hmacStrength=192;dr.padLength=64;dr.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],h=r,b=i,p=s,d=o,E=a,v=0;v<80;v++){var T=Wa(Mi(Ja(r,Ya(v,i,s,o),e[Xh[v]+t],Jh(v)),Qh[v]),a);r=a,a=o,o=Mi(s,10),s=i,i=T,T=Wa(Mi(Ja(h,Ya(79-v,b,p,d),e[Zh[v]+t],Yh(v)),ed[v]),E),h=E,E=d,d=Mi(p,10),p=b,b=T}T=Vn(this.h[1],s,d),this.h[1]=Vn(this.h[2],o,E),this.h[2]=Vn(this.h[3],a,h),this.h[3]=Vn(this.h[4],r,b),this.h[4]=Vn(this.h[0],i,p),this.h[0]=T};dr.prototype._digest=function(e){return e==="hex"?hn.toHex32(this.h,"little"):hn.split32(this.h,"little")};function Ya(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function Jh(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Yh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var Xh=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Zh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Qh=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ed=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],td=Ne,rd=vi;function Ln(n,e,t){if(!(this instanceof Ln))return new Ln(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(td.toArray(e,t))}var nd=Ln;Ln.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),rd(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Ln.prototype.update=function(e,t){return this.inner.update(e,t),this};Ln.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Ne,e.common=Dn,e.sha=Hn,e.ripemd=z0,e.hmac=nd,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(kt);function Kn(n,e,t){return t={path:e,exports:{},require:function(r,i){return id(r,i??t.path)}},n(t,t.exports),t.exports}function id(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var ra=q0;function q0(n,e){if(!n)throw new Error(e||"Assertion failed")}q0.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Jt=Kn(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var h=[];if(typeof o!="string"){for(var b=0;b<o.length;b++)h[b]=o[b]|0;return h}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var b=0;b<o.length;b+=2)h.push(parseInt(o[b]+o[b+1],16))}else for(var b=0;b<o.length;b++){var p=o.charCodeAt(b),d=p>>8,E=p&255;d?h.push(d,E):h.push(E)}return h}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",h=0;h<o.length;h++)a+=i(o[h].toString(16));return a}t.toHex=s,t.encode=function(a,h){return h==="hex"?s(a):a}}),$t=Kn(function(n,e){var t=e;t.assert=ra,t.toArray=Jt.toArray,t.zero2=Jt.zero2,t.toHex=Jt.toHex,t.encode=Jt.encode;function r(h,b,p){var d=new Array(Math.max(h.bitLength(),p)+1);d.fill(0);for(var E=1<<b+1,v=h.clone(),T=0;T<d.length;T++){var A,S=v.andln(E-1);v.isOdd()?(S>(E>>1)-1?A=(E>>1)-S:A=S,v.isubn(A)):A=0,d[T]=A,v.iushrn(1)}return d}t.getNAF=r;function i(h,b){var p=[[],[]];h=h.clone(),b=b.clone();for(var d=0,E=0,v;h.cmpn(-d)>0||b.cmpn(-E)>0;){var T=h.andln(3)+d&3,A=b.andln(3)+E&3;T===3&&(T=-1),A===3&&(A=-1);var S;T&1?(v=h.andln(7)+d&7,(v===3||v===5)&&A===2?S=-T:S=T):S=0,p[0].push(S);var k;A&1?(v=b.andln(7)+E&7,(v===3||v===5)&&T===2?k=-A:k=A):k=0,p[1].push(k),2*d===S+1&&(d=1-d),2*E===k+1&&(E=1-E),h.iushrn(1),b.iushrn(1)}return p}t.getJSF=i;function s(h,b,p){var d="_"+b;h.prototype[b]=function(){return this[d]!==void 0?this[d]:this[d]=p.call(this)}}t.cachedProperty=s;function o(h){return typeof h=="string"?t.toArray(h,"hex"):h}t.parseBytes=o;function a(h){return new Te(h,"hex","le")}t.intFromLE=a}),Wi=$t.getNAF,sd=$t.getJSF,Ji=$t.assert;function qr(n,e){this.type=n,this.p=new Te(e.p,16),this.red=e.prime?Te.red(e.prime):Te.mont(this.p),this.zero=new Te(0).toRed(this.red),this.one=new Te(1).toRed(this.red),this.two=new Te(2).toRed(this.red),this.n=e.n&&new Te(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var xn=qr;qr.prototype.point=function(){throw new Error("Not implemented")};qr.prototype.validate=function(){throw new Error("Not implemented")};qr.prototype._fixedNafMul=function(e,t){Ji(e.precomputed);var r=e._getDoubles(),i=Wi(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,h;for(a=0;a<i.length;a+=r.step){h=0;for(var b=a+r.step-1;b>=a;b--)h=(h<<1)+i[b];o.push(h)}for(var p=this.jpoint(null,null,null),d=this.jpoint(null,null,null),E=s;E>0;E--){for(a=0;a<o.length;a++)h=o[a],h===E?d=d.mixedAdd(r.points[a]):h===-E&&(d=d.mixedAdd(r.points[a].neg()));p=p.add(d)}return p.toP()};qr.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=Wi(t,r,this._bitLength),a=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var b=0;h>=0&&o[h]===0;h--)b++;if(h>=0&&b++,a=a.dblp(b),h<0)break;var p=o[h];Ji(p!==0),e.type==="affine"?p>0?a=a.mixedAdd(s[p-1>>1]):a=a.mixedAdd(s[-p-1>>1].neg()):p>0?a=a.add(s[p-1>>1]):a=a.add(s[-p-1>>1].neg())}return e.type==="affine"?a.toP():a};qr.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,h=this._wnafT3,b=0,p,d,E;for(p=0;p<i;p++){E=t[p];var v=E._getNAFPoints(e);o[p]=v.wnd,a[p]=v.points}for(p=i-1;p>=1;p-=2){var T=p-1,A=p;if(o[T]!==1||o[A]!==1){h[T]=Wi(r[T],o[T],this._bitLength),h[A]=Wi(r[A],o[A],this._bitLength),b=Math.max(h[T].length,b),b=Math.max(h[A].length,b);continue}var S=[t[T],null,null,t[A]];t[T].y.cmp(t[A].y)===0?(S[1]=t[T].add(t[A]),S[2]=t[T].toJ().mixedAdd(t[A].neg())):t[T].y.cmp(t[A].y.redNeg())===0?(S[1]=t[T].toJ().mixedAdd(t[A]),S[2]=t[T].add(t[A].neg())):(S[1]=t[T].toJ().mixedAdd(t[A]),S[2]=t[T].toJ().mixedAdd(t[A].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],L=sd(r[T],r[A]);for(b=Math.max(L[0].length,b),h[T]=new Array(b),h[A]=new Array(b),d=0;d<b;d++){var K=L[0][d]|0,z=L[1][d]|0;h[T][d]=k[(K+1)*3+(z+1)],h[A][d]=0,a[T]=S}}var q=this.jpoint(null,null,null),U=this._wnafT4;for(p=b;p>=0;p--){for(var Z=0;p>=0;){var se=!0;for(d=0;d<i;d++)U[d]=h[d][p]|0,U[d]!==0&&(se=!1);if(!se)break;Z++,p--}if(p>=0&&Z++,q=q.dblp(Z),p<0)break;for(d=0;d<i;d++){var ne=U[d];ne!==0&&(ne>0?E=a[d][ne-1>>1]:ne<0&&(E=a[d][-ne-1>>1].neg()),E.type==="affine"?q=q.mixedAdd(E):q=q.add(E))}}for(p=0;p<i;p++)a[p]=null;return s?q:q.toP()};function Gt(n,e){this.curve=n,this.type=e,this.precomputed=null}qr.BasePoint=Gt;Gt.prototype.eq=function(){throw new Error("Not implemented")};Gt.prototype.validate=function(){return this.curve.validate(this)};qr.prototype.decodePoint=function(e,t){e=$t.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?Ji(e[e.length-1]%2===0):e[0]===7&&Ji(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Gt.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Gt.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};Gt.prototype.encode=function(e,t){return $t.encode(this._encode(t),e)};Gt.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Gt.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Gt.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};Gt.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Gt.prototype._getBeta=function(){return null};Gt.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var na=Kn(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),od=$t.assert;function Kt(n){xn.call(this,"short",n),this.a=new Te(n.a,16).toRed(this.red),this.b=new Te(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}na(Kt,xn);var ad=Kt;Kt.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new Te(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new Te(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],od(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Te(a.a,16),b:new Te(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};Kt.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Te.mont(e),r=new Te(2).toRed(t).redInvm(),i=r.redNeg(),s=new Te(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Kt.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new Te(1),o=new Te(0),a=new Te(0),h=new Te(1),b,p,d,E,v,T,A,S=0,k,L;r.cmpn(0)!==0;){var K=i.div(r);k=i.sub(K.mul(r)),L=a.sub(K.mul(s));var z=h.sub(K.mul(o));if(!d&&k.cmp(t)<0)b=A.neg(),p=s,d=k.neg(),E=L;else if(d&&++S===2)break;A=k,i=r,r=k,a=s,s=L,h=o,o=z}v=k.neg(),T=L;var q=d.sqr().add(E.sqr()),U=v.sqr().add(T.sqr());return U.cmp(q)>=0&&(v=b,T=p),d.negative&&(d=d.neg(),E=E.neg()),v.negative&&(v=v.neg(),T=T.neg()),[{a:d,b:E},{a:v,b:T}]};Kt.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),h=o.mul(i.a),b=s.mul(r.b),p=o.mul(i.b),d=e.sub(a).sub(h),E=b.add(p).neg();return{k1:d,k2:E}};Kt.prototype.pointFromX=function(e,t){e=new Te(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Kt.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};Kt.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),h=e[o],b=h._getBeta();a.k1.negative&&(a.k1.ineg(),h=h.neg(!0)),a.k2.negative&&(a.k2.ineg(),b=b.neg(!0)),i[o*2]=h,i[o*2+1]=b,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var p=this._wnafMulAdd(1,i,s,o*2,r),d=0;d<o*2;d++)i[d]=null,s[d]=null;return p};function xt(n,e,t,r){xn.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Te(e,16),this.y=new Te(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}na(xt,xn.BasePoint);Kt.prototype.point=function(e,t,r){return new xt(this,e,t,r)};Kt.prototype.pointFromJSON=function(e,t){return xt.fromJSON(this,e,t)};xt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};xt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};xt.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};xt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};xt.prototype.isInfinity=function(){return this.inf};xt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};xt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};xt.prototype.getX=function(){return this.x.fromRed()};xt.prototype.getY=function(){return this.y.fromRed()};xt.prototype.mul=function(e){return e=new Te(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};xt.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};xt.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};xt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};xt.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};xt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function yt(n,e,t,r){xn.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Te(0)):(this.x=new Te(e,16),this.y=new Te(t,16),this.z=new Te(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}na(yt,xn.BasePoint);Kt.prototype.jpoint=function(e,t,r){return new yt(this,e,t,r)};yt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};yt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};yt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),h=i.redSub(s),b=o.redSub(a);if(h.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=h.redSqr(),d=p.redMul(h),E=i.redMul(p),v=b.redSqr().redIAdd(d).redISub(E).redISub(E),T=b.redMul(E.redISub(v)).redISub(o.redMul(d)),A=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(v,T,A)};yt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),h=s.redSub(o);if(a.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=a.redSqr(),p=b.redMul(a),d=r.redMul(b),E=h.redSqr().redIAdd(p).redISub(d).redISub(d),v=h.redMul(d.redISub(E)).redISub(s.redMul(p)),T=this.z.redMul(a);return this.curve.jpoint(E,v,T)};yt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,h=this.z,b=h.redSqr().redSqr(),p=a.redAdd(a);for(t=0;t<e;t++){var d=o.redSqr(),E=p.redSqr(),v=E.redSqr(),T=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(b)),A=o.redMul(E),S=T.redSqr().redISub(A.redAdd(A)),k=A.redISub(S),L=T.redMul(k);L=L.redIAdd(L).redISub(v);var K=p.redMul(h);t+1<e&&(b=b.redMul(v)),o=S,h=K,p=L}return this.curve.jpoint(o,p.redMul(s),h)};yt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};yt.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var h=i.redAdd(i).redIAdd(i),b=h.redSqr().redISub(a).redISub(a),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),e=b,t=h.redMul(a.redISub(b)).redISub(p),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),E=this.y.redSqr(),v=E.redSqr(),T=this.x.redAdd(E).redSqr().redISub(d).redISub(v);T=T.redIAdd(T);var A=d.redAdd(d).redIAdd(d),S=A.redSqr(),k=v.redIAdd(v);k=k.redIAdd(k),k=k.redIAdd(k),e=S.redISub(T).redISub(T),t=A.redMul(T.redISub(e)).redISub(k),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};yt.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),b=h.redSqr().redISub(a).redISub(a);e=b;var p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),t=h.redMul(a.redISub(b)).redISub(p),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),E=this.y.redSqr(),v=this.x.redMul(E),T=this.x.redSub(d).redMul(this.x.redAdd(d));T=T.redAdd(T).redIAdd(T);var A=v.redIAdd(v);A=A.redIAdd(A);var S=A.redAdd(A);e=T.redSqr().redISub(S),r=this.y.redAdd(this.z).redSqr().redISub(E).redISub(d);var k=E.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k),t=T.redMul(A.redISub(e)).redISub(k)}return this.curve.jpoint(e,t,r)};yt.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),b=t.redAdd(t);b=b.redIAdd(b);var p=b.redMul(a),d=h.redSqr().redISub(p.redAdd(p)),E=p.redISub(d),v=a.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var T=h.redMul(E).redISub(v),A=r.redAdd(r).redMul(i);return this.curve.jpoint(d,T,A)};yt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var h=a.redSqr(),b=i.redIAdd(i);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var p=s.redIAdd(a).redSqr().redISub(o).redISub(h).redISub(b),d=t.redMul(p);d=d.redIAdd(d),d=d.redIAdd(d);var E=this.x.redMul(h).redISub(d);E=E.redIAdd(E),E=E.redIAdd(E);var v=this.y.redMul(p.redMul(b.redISub(p)).redISub(a.redMul(h)));v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var T=this.z.redAdd(a).redSqr().redISub(r).redISub(h);return this.curve.jpoint(E,v,T)};yt.prototype.mul=function(e,t){return e=new Te(e,t),this.curve._wnafMul(this,e)};yt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};yt.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};yt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};yt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ui=Kn(function(n,e){var t=e;t.base=xn,t.short=ad,t.mont=null,t.edwards=null}),Di=Kn(function(n,e){var t=e,r=$t.assert;function i(a){a.type==="short"?this.curve=new Ui.short(a):a.type==="edwards"?this.curve=new Ui.edwards(a):this.curve=new Ui.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,h){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var b=new i(h);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:b}),b}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:kt.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:kt.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:kt.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:kt.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:kt.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kt.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kt.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:kt.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Kr(n){if(!(this instanceof Kr))return new Kr(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Jt.toArray(n.entropy,n.entropyEnc||"hex"),t=Jt.toArray(n.nonce,n.nonceEnc||"hex"),r=Jt.toArray(n.pers,n.persEnc||"hex");ra(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var V0=Kr;Kr.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Kr.prototype._hmac=function(){return new kt.hmac(this.hash,this.K)};Kr.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Kr.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=Jt.toArray(e,t),r=Jt.toArray(r,i),ra(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};Kr.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=Jt.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,Jt.encode(o,t)};var Mo=$t.assert;function At(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ia=At;At.fromPublic=function(e,t,r){return t instanceof At?t:new At(e,{pub:t,pubEnc:r})};At.fromPrivate=function(e,t,r){return t instanceof At?t:new At(e,{priv:t,privEnc:r})};At.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};At.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};At.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};At.prototype._importPrivate=function(e,t){this.priv=new Te(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};At.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Mo(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Mo(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};At.prototype.derive=function(e){return e.validate()||Mo(e.validate(),"public point not validated"),e.mul(this.priv).getX()};At.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};At.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};At.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var cd=$t.assert;function as(n,e){if(n instanceof as)return n;this._importDER(n,e)||(cd(n.r&&n.s,"Signature without r or s"),this.r=new Te(n.r,16),this.s=new Te(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var cs=as;function ld(){this.place=0}function Ws(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function Xa(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}as.prototype._importDER=function(e,t){e=$t.toArray(e,t);var r=new ld;if(e[r.place++]!==48)return!1;var i=Ws(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=Ws(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=Ws(e,r);if(a===!1||e.length!==a+r.place)return!1;var h=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new Te(o),this.s=new Te(h),this.recoveryParam=null,!0};function Js(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}as.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=Xa(t),r=Xa(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];Js(i,t.length),i=i.concat(t),i.push(2),Js(i,r.length);var s=i.concat(r),o=[48];return Js(o,s.length),o=o.concat(s),$t.encode(o,e)};var fd=function(){throw new Error("unsupported")},W0=$t.assert;function Ht(n){if(!(this instanceof Ht))return new Ht(n);typeof n=="string"&&(W0(Object.prototype.hasOwnProperty.call(Di,n),"Unknown curve "+n),n=Di[n]),n instanceof Di.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ud=Ht;Ht.prototype.keyPair=function(e){return new ia(this,e)};Ht.prototype.keyFromPrivate=function(e,t){return ia.fromPrivate(this,e,t)};Ht.prototype.keyFromPublic=function(e,t){return ia.fromPublic(this,e,t)};Ht.prototype.genKeyPair=function(e){e||(e={});for(var t=new V0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||fd(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new Te(2));;){var s=new Te(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Ht.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Ht.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new Te(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),h=new V0({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),b=this.n.sub(new Te(1)),p=0;;p++){var d=i.k?i.k(p):new Te(h.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(b)>=0)){var E=this.g.mul(d);if(!E.isInfinity()){var v=E.getX(),T=v.umod(this.n);if(T.cmpn(0)!==0){var A=d.invm(this.n).mul(T.mul(t.getPrivate()).iadd(e));if(A=A.umod(this.n),A.cmpn(0)!==0){var S=(E.getY().isOdd()?1:0)|(v.cmp(T)!==0?2:0);return i.canonical&&A.cmp(this.nh)>0&&(A=this.n.sub(A),S^=1),new cs({r:T,s:A,recoveryParam:S})}}}}}};Ht.prototype.verify=function(e,t,r,i){e=this._truncateToN(new Te(e,16)),r=this.keyFromPublic(r,i),t=new cs(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),h=a.mul(e).umod(this.n),b=a.mul(s).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(h,r.getPublic(),b),p.isInfinity()?!1:p.eqXToP(s)):(p=this.g.mulAdd(h,r.getPublic(),b),p.isInfinity()?!1:p.getX().umod(this.n).cmp(s)===0)};Ht.prototype.recoverPubKey=function(n,e,t,r){W0((3&t)===t,"The recovery param is more than two bits"),e=new cs(e,r);var i=this.n,s=new Te(n),o=e.r,a=e.s,h=t&1,b=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&b)throw new Error("Unable to find sencond key candinate");b?o=this.curve.pointFromX(o.add(this.curve.n),h):o=this.curve.pointFromX(o,h);var p=e.r.invm(i),d=i.sub(s).mul(p).umod(i),E=a.mul(p).umod(i);return this.g.mulAdd(d,o,E)};Ht.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new cs(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var hd=Kn(function(n,e){var t=e;t.version="6.5.4",t.utils=$t,t.rand=function(){throw new Error("unsupported")},t.curve=Ui,t.curves=Di,t.ec=ud,t.eddsa=null}),dd=hd.ec;const pd="signing-key/5.5.0",J0=new W(pd);let Ys=null;function tr(){return Ys||(Ys=new dd("secp256k1")),Ys}class cn{constructor(e){ce(this,"curve","secp256k1"),ce(this,"privateKey",me(e));const t=tr().keyFromPrivate(de(this.privateKey));ce(this,"publicKey","0x"+t.getPublic(!1,"hex")),ce(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),ce(this,"_isSigningKey",!0)}_addPoint(e){const t=tr().keyFromPublic(de(this.publicKey)),r=tr().keyFromPublic(de(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=tr().keyFromPrivate(de(this.privateKey)),r=de(e);r.length!==32&&J0.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return dn({recoveryParam:i.recoveryParam,r:Ge("0x"+i.r.toString(16),32),s:Ge("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=tr().keyFromPrivate(de(this.privateKey)),r=tr().keyFromPublic(de(sa(e)));return Ge("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Y0(n,e){const t=dn(e),r={r:de(t.r),s:de(t.s)};return"0x"+tr().recoverPubKey(de(n),r,t.recoveryParam).encode("hex",!1)}function sa(n,e){const t=de(n);if(t.length===32){const r=new cn(t);return e?"0x"+tr().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?me(t):"0x"+tr().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+tr().keyFromPublic(t).getPublic(!0,"hex"):me(t)}return J0.throwArgumentError("invalid public or private key","key","[REDACTED]")}const xd="transactions/5.5.0",Et=new W(xd);var Co;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(Co||(Co={}));function oa(n){return n==="0x"?null:$e(n)}function vt(n){return n==="0x"?Jo:pe.from(n)}const bd=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],md={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Dr(n){const e=sa(n);return $e(Bt(Ue(Bt(e,1)),12))}function Ei(n,e){return Dr(Y0(de(n),e))}function It(n,e){const t=or(pe.from(n).toHexString());return t.length>32&&Et.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function Xs(n,e){return{address:$e(n),storageKeys:(e||[]).map((t,r)=>(Hr(t)!==32&&Et.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function Vr(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Et.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),Xs(t[0],t[1])):Xs(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return Xs(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function X0(n){return Vr(n).map(e=>[e.address,e.storageKeys])}function Z0(n,e){if(n.gasPrice!=null){const r=pe.from(n.gasPrice),i=pe.from(n.maxFeePerGas||0);r.eq(i)||Et.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[It(n.chainId||0,"chainId"),It(n.nonce||0,"nonce"),It(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),It(n.maxFeePerGas||0,"maxFeePerGas"),It(n.gasLimit||0,"gasLimit"),n.to!=null?$e(n.to):"0x",It(n.value||0,"value"),n.data||"0x",X0(n.accessList||[])];if(e){const r=dn(e);t.push(It(r.recoveryParam,"recoveryParam")),t.push(or(r.r)),t.push(or(r.s))}return Dt(["0x02",un(t)])}function Q0(n,e){const t=[It(n.chainId||0,"chainId"),It(n.nonce||0,"nonce"),It(n.gasPrice||0,"gasPrice"),It(n.gasLimit||0,"gasLimit"),n.to!=null?$e(n.to):"0x",It(n.value||0,"value"),n.data||"0x",X0(n.accessList||[])];if(e){const r=dn(e);t.push(It(r.recoveryParam,"recoveryParam")),t.push(or(r.r)),t.push(or(r.s))}return Dt(["0x01",un(t)])}function gd(n,e){qo(n,md);const t=[];bd.forEach(function(o){let a=n[o.name]||[];const h={};o.numeric&&(h.hexPad="left"),a=de(me(a,h)),o.length&&a.length!==o.length&&a.length>0&&Et.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a),o.maxLength&&(a=or(a),a.length>o.maxLength&&Et.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a)),t.push(me(a))});let r=0;if(n.chainId!=null?(r=n.chainId,typeof r!="number"&&Et.throwArgumentError("invalid transaction.chainId","transaction",n)):e&&!Un(e)&&e.v>28&&(r=Math.floor((e.v-35)/2)),r!==0&&(t.push(me(r)),t.push("0x"),t.push("0x")),!e)return un(t);const i=dn(e);let s=27+i.recoveryParam;return r!==0?(t.pop(),t.pop(),t.pop(),s+=r*2+8,i.v>28&&i.v!==s&&Et.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Et.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),t.push(me(s)),t.push(or(de(i.r))),t.push(or(de(i.s))),un(t)}function Ro(n,e){if(n.type==null||n.type===0)return n.accessList!=null&&Et.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",n),gd(n,e);switch(n.type){case 1:return Q0(n,e);case 2:return Z0(n,e)}return Et.throwError(`unsupported transaction type: ${n.type}`,W.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:n.type})}function el(n,e,t){try{const r=vt(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Et.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Ge(e[1],32),n.s=Ge(e[2],32);try{const r=Ue(t(n));n.from=Ei(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch(r){console.log(r)}}function yd(n){const e=ns(n.slice(1));e.length!==9&&e.length!==12&&Et.throwArgumentError("invalid component count for transaction type: 2","payload",me(n));const t=vt(e[2]),r=vt(e[3]),i={type:2,chainId:vt(e[0]).toNumber(),nonce:vt(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:vt(e[4]),to:oa(e[5]),value:vt(e[6]),data:e[7],accessList:Vr(e[8])};return e.length===9||(i.hash=Ue(n),el(i,e.slice(9),Z0)),i}function wd(n){const e=ns(n.slice(1));e.length!==8&&e.length!==11&&Et.throwArgumentError("invalid component count for transaction type: 1","payload",me(n));const t={type:1,chainId:vt(e[0]).toNumber(),nonce:vt(e[1]).toNumber(),gasPrice:vt(e[2]),gasLimit:vt(e[3]),to:oa(e[4]),value:vt(e[5]),data:e[6],accessList:Vr(e[7])};return e.length===8||(t.hash=Ue(n),el(t,e.slice(8),Q0)),t}function vd(n){const e=ns(n);e.length!==9&&e.length!==6&&Et.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:vt(e[0]).toNumber(),gasPrice:vt(e[1]),gasLimit:vt(e[2]),to:oa(e[3]),value:vt(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=pe.from(e[6]).toNumber()}catch(r){return console.log(r),t}if(t.r=Ge(e[7],32),t.s=Ge(e[8],32),pe.from(t.r).isZero()&&pe.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(me(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=Ue(un(i));try{t.from=Ei(s,{r:me(t.r),s:me(t.s),recoveryParam:r})}catch(o){console.log(o)}t.hash=Ue(n)}return t.type=null,t}function tl(n){const e=de(n);if(e[0]>127)return vd(e);switch(e[0]){case 1:return wd(e);case 2:return yd(e)}return Et.throwError(`unsupported transaction type: ${e[0]}`,W.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Ed="contracts/5.5.0";var zr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Le=new W(Ed),Ad={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0};function Yi(n,e){return zr(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Le.throwArgumentError("invalid address or ENS name","name",t);try{return $e(t)}catch{}n||Le.throwError("a provider or signer is needed to resolve ENS names",W.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Le.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function si(n,e,t){return zr(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>si(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield Yi(n,e):t.type==="tuple"?yield si(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>si(n,r,t.arrayChildren))):Promise.reject(Le.makeError("invalid value for array",W.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function ls(n,e,t){return zr(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=De(t.pop())),Le.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=ct({override:Yi(n.signer,r.from),signer:n.signer.getAddress()}).then(b=>zr(this,void 0,void 0,function*(){return $e(b.signer)!==b.override&&Le.throwError("Contract with a Signer cannot override from",W.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),b.override})):r.from=n.signer.getAddress():r.from&&(r.from=Yi(n.provider,r.from));const i=yield ct({args:si(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:ct(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=pe.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=pe.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=pe.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=pe.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=pe.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Vr(a.accessList)),o.gasLimit==null&&e.gas!=null){let b=21e3;const p=de(s);for(let d=0;d<p.length;d++)b+=4,p[d]&&(b+=64);o.gasLimit=pe.from(e.gas).add(b)}if(a.value){const b=pe.from(a.value);!b.isZero()&&!e.payable&&Le.throwError("non-payable method cannot override value",W.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=b}a.customData&&(o.customData=De(a.customData)),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData;const h=Object.keys(r).filter(b=>r[b]!=null);return h.length&&Le.throwError(`cannot override ${h.map(b=>JSON.stringify(b)).join(",")}`,W.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h}),o})}function Td(n,e){return function(...t){return ls(n,e,t)}}function kd(n,e){const t=n.signer||n.provider;return function(...r){return zr(this,void 0,void 0,function*(){t||Le.throwError("estimate require a provider or signer",W.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield ls(n,e,r);return yield t.estimateGas(i)})}}function rl(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=St(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(h,b)=>n.interface.decodeEventLog(a.eventFragment,h,b),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function nl(n,e,t){const r=n.signer||n.provider;return function(...i){return zr(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const h=De(i.pop());h.blockTag!=null&&(s=yield h.blockTag),delete h.blockTag,i.push(h)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield ls(n,e,i),a=yield r.call(o,s);try{let h=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(h=h[0]),h}catch(h){throw h.code===W.errors.CALL_EXCEPTION&&(h.address=n.address,h.args=i,h.transaction=o),h}})}}function Sd(n,e){return function(...t){return zr(this,void 0,void 0,function*(){n.signer||Le.throwError("sending a transaction requires a signer",W.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield ls(n,e,t),i=yield n.signer.sendTransaction(r);return rl(n,i),i})}}function Za(n,e,t){return e.constant?nl(n,e,t):Sd(n,e)}function il(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class bi{constructor(e,t){ce(this,"tag",e),ce(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class _d extends bi{constructor(){super("error",null)}}class Qa extends bi{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Le.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(il(s),s),ce(this,"address",e),ce(this,"interface",t),ce(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=i0(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class ec extends bi{constructor(e,t){super("*",{address:e}),ce(this,"address",e),ce(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class aa{constructor(e,t,r){Le.checkNew(new.target,mi),ce(this,"interface",pt(new.target,"getInterface")(t)),r==null?(ce(this,"provider",null),ce(this,"signer",null)):_r.isSigner(r)?(ce(this,"provider",r.provider||null),ce(this,"signer",r)):Gr.isProvider(r)?(ce(this,"provider",r),ce(this,"signer",null)):Le.throwArgumentError("invalid signer or provider","signerOrProvider",r),ce(this,"callStatic",{}),ce(this,"estimateGas",{}),ce(this,"functions",{}),ce(this,"populateTransaction",{}),ce(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const h=this.interface.events[a];ce(this.filters,a,(...b)=>({address:this.address,topics:this.interface.encodeFilterTopics(h,b)})),o[h.name]||(o[h.name]=[]),o[h.name].push(a)}),Object.keys(o).forEach(a=>{const h=o[a];h.length===1?ce(this.filters,a,this.filters[h[0]]):Le.warn(`Duplicate definition of ${a} (${h.join(", ")})`)})}if(ce(this,"_runningEvents",{}),ce(this,"_wrappedEmits",{}),e==null&&Le.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ce(this,"address",e),this.provider)ce(this,"resolvedAddress",Yi(this.provider,e));else try{ce(this,"resolvedAddress",Promise.resolve($e(e)))}catch{Le.throwError("provider is required to use ENS name as contract address",W.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Le.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const h=a.name;i[`%${h}`]||(i[`%${h}`]=[]),i[`%${h}`].push(o)}this[o]==null&&ce(this,o,Za(this,a,!0)),this.functions[o]==null&&ce(this.functions,o,Za(this,a,!1)),this.callStatic[o]==null&&ce(this.callStatic,o,nl(this,a,!0)),this.populateTransaction[o]==null&&ce(this.populateTransaction,o,Td(this,a)),this.estimateGas[o]==null&&ce(this.estimateGas,o,kd(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const h=a[0];try{this[o]==null&&ce(this,o,this[h])}catch{}this.functions[o]==null&&ce(this.functions,o,this.functions[h]),this.callStatic[o]==null&&ce(this.callStatic,o,this.callStatic[h]),this.populateTransaction[o]==null&&ce(this.populateTransaction,o,this.populateTransaction[h]),this.estimateGas[o]==null&&ce(this.estimateGas,o,this.estimateGas[h])})}static getContractAddress(e){return is(e)}static getInterface(e){return xi.isInterface(e)?e:new xi(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Le.throwError("contract not deployed",W.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Le.throwError("sending a transactions require a signer",W.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=De(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Le.throwError("cannot override "+r,W.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Pn(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ce(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Vi.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new _d);if(e==="event")return this._normalizeRunningEvent(new bi("event",null));if(e==="*")return this._normalizeRunningEvent(new ec(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Qa(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new Qa(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new bi(il(t),t))}return this._normalizeRunningEvent(new ec(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=St(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Le.throwError("events require a provider or a signer with a provider",W.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=De(i.filter);return typeof t=="string"&&ke(t,32)?(r!=null&&Le.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class mi extends aa{}class sl{constructor(e,t,r){let i=null;typeof t=="string"?i=t:jr(t)?i=me(t):t&&typeof t.object=="string"?i=t.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!ke(i)||i.length%2)&&Le.throwArgumentError("invalid bytecode","bytecode",t),r&&!_r.isSigner(r)&&Le.throwArgumentError("invalid signer","signer",r),ce(this,"bytecode",i),ce(this,"interface",pt(new.target,"getInterface")(e)),ce(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){t=De(e.pop());for(const r in t)if(!Ad[r])throw new Error("unknown transaction override "+r)}return["data","from","to"].forEach(r=>{t[r]!=null&&Le.throwError("cannot override "+r,W.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.value&&!pe.from(t.value).isZero()&&!this.interface.deploy.payable&&Le.throwError("non-payable constructor cannot override value",W.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value}),Le.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=me(He([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return zr(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),Le.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield si(this.signer,e,this.interface.deploy.inputs);r.push(t);const i=this.getDeployTransaction(...r),s=yield this.signer.sendTransaction(i),o=pt(this.constructor,"getContractAddress")(s),a=pt(this.constructor,"getContract")(o,this.interface,this.signer);return rl(a,s),ce(a,"deployTransaction",s),a})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){e==null&&Le.throwError("missing compiler output",W.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const r=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(r,i,t)}static getInterface(e){return mi.getInterface(e)}static getContractAddress(e){return is(e)}static getContract(e,t,r){return new mi(e,t,r)}}class ol{constructor(e){ce(this,"alphabet",e),ce(this,"base",e.length),ce(this,"_alphabetMap",{}),ce(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=de(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return de(new Uint8Array(t.reverse()))}}new ol("abcdefghijklmnopqrstuvwxyz234567");const Ai=new ol("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var $n;(function(n){n.sha256="sha256",n.sha512="sha512"})($n||($n={}));const Md="sha2/5.5.0",Cd=new W(Md);function al(n){return"0x"+kt.ripemd160().update(de(n)).digest("hex")}function Tr(n){return"0x"+kt.sha256().update(de(n)).digest("hex")}function Rd(n){return"0x"+kt.sha512().update(de(n)).digest("hex")}function gi(n,e,t){return $n[n]||Cd.throwError("unsupported algorithm "+n,W.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:n}),"0x"+kt.hmac(kt[n],de(e)).update(de(t)).digest("hex")}function ca(n,e,t,r,i){n=de(n),e=de(e);let s,o=1;const a=new Uint8Array(r),h=new Uint8Array(e.length+4);h.set(e);let b,p;for(let d=1;d<=o;d++){h[e.length]=d>>24&255,h[e.length+1]=d>>16&255,h[e.length+2]=d>>8&255,h[e.length+3]=d&255;let E=de(gi(i,n,h));s||(s=E.length,p=new Uint8Array(s),o=Math.ceil(r/s),b=r-(o-1)*s),p.set(E);for(let A=1;A<t;A++){E=de(gi(i,n,E));for(let S=0;S<s;S++)p[S]^=E[S]}const v=(d-1)*s,T=d===o?b:s;a.set(de(p).slice(0,T),v)}return me(a)}const Nd="wordlists/5.5.0",Bd=new W(Nd);class bn{constructor(e){Bd.checkAbstract(new.target,bn),ce(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const i=e.getWord(r);if(r!==e.getWordIndex(i))return"0x";t.push(i)}return Ur(t.join(`
`)+`
`)}static register(e,t){t||(t=e.locale)}}const Pd="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let oi=null;function tc(n){if(oi==null&&(oi=Pd.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),bn.check(n)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw oi=null,new Error("BIP39 Wordlist for en (English) FAILED")}class Od extends bn{constructor(){super("en")}getWord(e){return tc(this),oi[e]}getWordIndex(e){return tc(this),oi.indexOf(e)}}const cl=new Od;bn.register(cl);const Xi={en:cl},Id="hdnode/5.5.0",Rn=new W(Id),Ld=pe.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$d=lt("Bitcoin seed"),An=2147483648;function ll(n){return(1<<n)-1<<8-n}function Fd(n){return(1<<n)-1}function Ci(n){return Ge(me(n),32)}function rc(n){return Ai.encode(He([n,Bt(Tr(Tr(n)),0,4)]))}function la(n){if(n==null)return Xi.en;if(typeof n=="string"){const e=Xi[n];return e==null&&Rn.throwArgumentError("unknown locale","wordlist",n),e}return n}const gn={},Fn="m/44'/60'/0'/0/0";class Rt{constructor(e,t,r,i,s,o,a,h){if(Rn.checkNew(new.target,Rt),e!==gn)throw new Error("HDNode constructor cannot be called directly");if(t){const b=new cn(t);ce(this,"privateKey",b.privateKey),ce(this,"publicKey",b.compressedPublicKey)}else ce(this,"privateKey",null),ce(this,"publicKey",me(r));ce(this,"parentFingerprint",i),ce(this,"fingerprint",Bt(al(Tr(this.publicKey)),0,4)),ce(this,"address",Dr(this.publicKey)),ce(this,"chainCode",s),ce(this,"index",o),ce(this,"depth",a),h==null?(ce(this,"mnemonic",null),ce(this,"path",null)):typeof h=="string"?(ce(this,"mnemonic",null),ce(this,"path",h)):(ce(this,"mnemonic",h),ce(this,"path",h.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return rc(He([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",me(this.depth),this.parentFingerprint,Ge(me(this.index),4),this.chainCode,this.privateKey!=null?He(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Rt(gn,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~An));const r=new Uint8Array(37);if(e&An){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(de(this.privateKey),1),t&&(t+="'")}else r.set(de(this.publicKey));for(let d=24;d>=0;d-=8)r[33+(d>>3)]=e>>24-d&255;const i=de(gi($n.sha512,this.chainCode,r)),s=i.slice(0,32),o=i.slice(32);let a=null,h=null;this.privateKey?a=Ci(pe.from(s).add(this.privateKey).mod(Ld)):h=new cn(me(s))._addPoint(this.publicKey);let b=t;const p=this.mnemonic;return p&&(b=Object.freeze({phrase:p.phrase,path:t,locale:p.locale||"en"})),new Rt(gn,a,h,this.fingerprint,Ci(o),e,this.depth+1,b)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let r=this;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=An)throw new Error("invalid path index - "+s);r=r._derive(An+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);if(o>=An)throw new Error("invalid path index - "+s);r=r._derive(o)}else throw new Error("invalid path component - "+s)}return r}static _fromSeed(e,t){const r=de(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const i=de(gi($n.sha512,$d,r));return new Rt(gn,Ci(i.slice(0,32)),null,"0x00000000",Ci(i.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return r=la(r),e=us(fs(e,r),r),Rt._fromSeed(fl(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return Rt._fromSeed(e,null)}static fromExtendedKey(e){const t=Ai.decode(e);(t.length!==82||rc(t.slice(0,78))!==e)&&Rn.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],i=me(t.slice(5,9)),s=parseInt(me(t.slice(9,13)).substring(2),16),o=me(t.slice(13,45)),a=t.slice(45,78);switch(me(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Rt(gn,null,me(a),i,o,s,r,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new Rt(gn,me(a.slice(1)),null,i,o,s,r,null)}return Rn.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function fl(n,e){e||(e="");const t=lt("mnemonic"+e,fr.NFKD);return ca(lt(n,fr.NFKD),t,2048,64,"sha512")}function fs(n,e){e=la(e),Rn.checkNormalize();const t=e.split(n);if(t.length%3!==0)throw new Error("invalid mnemonic");const r=de(new Uint8Array(Math.ceil(11*t.length/8)));let i=0;for(let b=0;b<t.length;b++){let p=e.getWordIndex(t[b].normalize("NFKD"));if(p===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)p&1<<10-d&&(r[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,o=t.length/3,a=ll(o);if((de(Tr(r.slice(0,s/8)))[0]&a)!==(r[r.length-1]&a))throw new Error("invalid checksum");return me(r.slice(0,s/8))}function us(n,e){if(e=la(e),n=de(n),n.length%4!==0||n.length<16||n.length>32)throw new Error("invalid entropy");const t=[0];let r=11;for(let o=0;o<n.length;o++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=n[o],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=n[o]>>8-r,t.push(n[o]&Fd(8-r)),r+=3);const i=n.length/4,s=de(Tr(n))[0]&ll(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(o=>e.getWord(o)))}function Ud(n,e){try{return fs(n,e),!0}catch{}return!1}function Dd(n){return(typeof n!="number"||n<0||n>=An||n%1)&&Rn.throwArgumentError("invalid account index","index",n),`m/44'/60'/${n}'/0/0`}const Hd="random/5.5.1",No=new W(Hd);function Gd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const nc=Gd();let Hi=nc.crypto||nc.msCrypto;(!Hi||!Hi.getRandomValues)&&(No.warn("WARNING: Missing strong random number source"),Hi={getRandomValues:function(n){return No.throwError("no secure random source avaialble",W.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Qn(n){(n<=0||n>1024||n%1||n!=n)&&No.throwArgumentError("invalid length","length",n);const e=new Uint8Array(n);return Hi.getRandomValues(e),de(e)}function Kd(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}var Bo={},zd={get exports(){return Bo},set exports(n){Bo=n}};(function(n,e){(function(t){function r(w){return parseInt(w)===w}function i(w){if(!r(w.length))return!1;for(var I=0;I<w.length;I++)if(!r(w[I])||w[I]<0||w[I]>255)return!1;return!0}function s(w,I){if(w.buffer&&ArrayBuffer.isView(w)&&w.name==="Uint8Array")return I&&(w.slice?w=w.slice():w=Array.prototype.slice.call(w)),w;if(Array.isArray(w)){if(!i(w))throw new Error("Array contains invalid value: "+w);return new Uint8Array(w)}if(r(w.length)&&i(w))return new Uint8Array(w);throw new Error("unsupported array-like object")}function o(w){return new Uint8Array(w)}function a(w,I,B,j,g){(j!=null||g!=null)&&(w.slice?w=w.slice(j,g):w=Array.prototype.slice.call(w,j,g)),I.set(w,B)}var h=function(){function w(B){var j=[],g=0;for(B=encodeURI(B);g<B.length;){var Y=B.charCodeAt(g++);Y===37?(j.push(parseInt(B.substr(g,2),16)),g+=2):j.push(Y)}return s(j)}function I(B){for(var j=[],g=0;g<B.length;){var Y=B[g];Y<128?(j.push(String.fromCharCode(Y)),g++):Y>191&&Y<224?(j.push(String.fromCharCode((Y&31)<<6|B[g+1]&63)),g+=2):(j.push(String.fromCharCode((Y&15)<<12|(B[g+1]&63)<<6|B[g+2]&63)),g+=3)}return j.join("")}return{toBytes:w,fromBytes:I}}(),b=function(){function w(j){for(var g=[],Y=0;Y<j.length;Y+=2)g.push(parseInt(j.substr(Y,2),16));return g}var I="0123456789abcdef";function B(j){for(var g=[],Y=0;Y<j.length;Y++){var Q=j[Y];g.push(I[(Q&240)>>4]+I[Q&15])}return g.join("")}return{toBytes:w,fromBytes:B}}(),p={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],E=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],v=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],T=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],A=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],S=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],k=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],L=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],K=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],z=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],q=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],U=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Z=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],se=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ne=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function J(w){for(var I=[],B=0;B<w.length;B+=4)I.push(w[B]<<24|w[B+1]<<16|w[B+2]<<8|w[B+3]);return I}var M=function(w){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(w,!0)}),this._prepare()};M.prototype._prepare=function(){var w=p[this.key.length];if(w==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var I=0;I<=w;I++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var B=(w+1)*4,j=this.key.length/4,g=J(this.key),Y,I=0;I<j;I++)Y=I>>2,this._Ke[Y][I%4]=g[I],this._Kd[w-Y][I%4]=g[I];for(var Q=0,$=j,P;$<B;){if(P=g[j-1],g[0]^=E[P>>16&255]<<24^E[P>>8&255]<<16^E[P&255]<<8^E[P>>24&255]^d[Q]<<24,Q+=1,j!=8)for(var I=1;I<j;I++)g[I]^=g[I-1];else{for(var I=1;I<j/2;I++)g[I]^=g[I-1];P=g[j/2-1],g[j/2]^=E[P&255]^E[P>>8&255]<<8^E[P>>16&255]<<16^E[P>>24&255]<<24;for(var I=j/2+1;I<j;I++)g[I]^=g[I-1]}for(var I=0,G,te;I<j&&$<B;)G=$>>2,te=$%4,this._Ke[G][te]=g[I],this._Kd[w-G][te]=g[I++],$++}for(var G=1;G<w;G++)for(var te=0;te<4;te++)P=this._Kd[G][te],this._Kd[G][te]=U[P>>24&255]^Z[P>>16&255]^se[P>>8&255]^ne[P&255]},M.prototype.encrypt=function(w){if(w.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var I=this._Ke.length-1,B=[0,0,0,0],j=J(w),g=0;g<4;g++)j[g]^=this._Ke[0][g];for(var Y=1;Y<I;Y++){for(var g=0;g<4;g++)B[g]=T[j[g]>>24&255]^A[j[(g+1)%4]>>16&255]^S[j[(g+2)%4]>>8&255]^k[j[(g+3)%4]&255]^this._Ke[Y][g];j=B.slice()}for(var Q=o(16),$,g=0;g<4;g++)$=this._Ke[I][g],Q[4*g]=(E[j[g]>>24&255]^$>>24)&255,Q[4*g+1]=(E[j[(g+1)%4]>>16&255]^$>>16)&255,Q[4*g+2]=(E[j[(g+2)%4]>>8&255]^$>>8)&255,Q[4*g+3]=(E[j[(g+3)%4]&255]^$)&255;return Q},M.prototype.decrypt=function(w){if(w.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var I=this._Kd.length-1,B=[0,0,0,0],j=J(w),g=0;g<4;g++)j[g]^=this._Kd[0][g];for(var Y=1;Y<I;Y++){for(var g=0;g<4;g++)B[g]=L[j[g]>>24&255]^K[j[(g+3)%4]>>16&255]^z[j[(g+2)%4]>>8&255]^q[j[(g+1)%4]&255]^this._Kd[Y][g];j=B.slice()}for(var Q=o(16),$,g=0;g<4;g++)$=this._Kd[I][g],Q[4*g]=(v[j[g]>>24&255]^$>>24)&255,Q[4*g+1]=(v[j[(g+3)%4]>>16&255]^$>>16)&255,Q[4*g+2]=(v[j[(g+2)%4]>>8&255]^$>>8)&255,Q[4*g+3]=(v[j[(g+1)%4]&255]^$)&255;return Q};var l=function(w){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new M(w)};l.prototype.encrypt=function(w){if(w=s(w),w.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=o(w.length),B=o(16),j=0;j<w.length;j+=16)a(w,B,0,j,j+16),B=this._aes.encrypt(B),a(B,I,j);return I},l.prototype.decrypt=function(w){if(w=s(w),w.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=o(w.length),B=o(16),j=0;j<w.length;j+=16)a(w,B,0,j,j+16),B=this._aes.decrypt(B),a(B,I,j);return I};var u=function(w,I){if(!(this instanceof u))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!I)I=o(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(I,!0),this._aes=new M(w)};u.prototype.encrypt=function(w){if(w=s(w),w.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=o(w.length),B=o(16),j=0;j<w.length;j+=16){a(w,B,0,j,j+16);for(var g=0;g<16;g++)B[g]^=this._lastCipherblock[g];this._lastCipherblock=this._aes.encrypt(B),a(this._lastCipherblock,I,j)}return I},u.prototype.decrypt=function(w){if(w=s(w),w.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=o(w.length),B=o(16),j=0;j<w.length;j+=16){a(w,B,0,j,j+16),B=this._aes.decrypt(B);for(var g=0;g<16;g++)I[j+g]=B[g]^this._lastCipherblock[g];a(w,this._lastCipherblock,0,j,j+16)}return I};var y=function(w,I,B){if(!(this instanceof y))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!I)I=o(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");B||(B=1),this.segmentSize=B,this._shiftRegister=s(I,!0),this._aes=new M(w)};y.prototype.encrypt=function(w){if(w.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var I=s(w,!0),B,j=0;j<I.length;j+=this.segmentSize){B=this._aes.encrypt(this._shiftRegister);for(var g=0;g<this.segmentSize;g++)I[j+g]^=B[g];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(I,this._shiftRegister,16-this.segmentSize,j,j+this.segmentSize)}return I},y.prototype.decrypt=function(w){if(w.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var I=s(w,!0),B,j=0;j<I.length;j+=this.segmentSize){B=this._aes.encrypt(this._shiftRegister);for(var g=0;g<this.segmentSize;g++)I[j+g]^=B[g];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(w,this._shiftRegister,16-this.segmentSize,j,j+this.segmentSize)}return I};var C=function(w,I){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!I)I=o(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(I,!0),this._lastPrecipherIndex=16,this._aes=new M(w)};C.prototype.encrypt=function(w){for(var I=s(w,!0),B=0;B<I.length;B++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),I[B]^=this._lastPrecipher[this._lastPrecipherIndex++];return I},C.prototype.decrypt=C.prototype.encrypt;var R=function(w){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");w!==0&&!w&&(w=1),typeof w=="number"?(this._counter=o(16),this.setValue(w)):this.setBytes(w)};R.prototype.setValue=function(w){if(typeof w!="number"||parseInt(w)!=w)throw new Error("invalid counter value (must be an integer)");for(var I=15;I>=0;--I)this._counter[I]=w%256,w=w>>8},R.prototype.setBytes=function(w){if(w=s(w,!0),w.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=w},R.prototype.increment=function(){for(var w=15;w>=0;w--)if(this._counter[w]===255)this._counter[w]=0;else{this._counter[w]++;break}};var D=function(w,I){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",I instanceof R||(I=new R(I)),this._counter=I,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new M(w)};D.prototype.encrypt=function(w){for(var I=s(w,!0),B=0;B<I.length;B++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),I[B]^=this._remainingCounter[this._remainingCounterIndex++];return I},D.prototype.decrypt=D.prototype.encrypt;function V(w){w=s(w,!0);var I=16-w.length%16,B=o(w.length+I);a(w,B);for(var j=w.length;j<B.length;j++)B[j]=I;return B}function O(w){if(w=s(w,!0),w.length<16)throw new Error("PKCS#7 invalid length");var I=w[w.length-1];if(I>16)throw new Error("PKCS#7 padding byte out of range");for(var B=w.length-I,j=0;j<I;j++)if(w[B+j]!==I)throw new Error("PKCS#7 invalid padding byte");var g=o(B);return a(w,g,0,0,B),g}var x={AES:M,Counter:R,ModeOfOperation:{ecb:l,cbc:u,cfb:y,ofb:C,ctr:D},utils:{hex:b,utf8:h},padding:{pkcs7:{pad:V,strip:O}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};n.exports=x})()})(zd);const sr=Bo,ul="json-wallets/5.5.0";function ln(n){return typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),de(n)}function Wn(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function fa(n){return typeof n=="string"?lt(n,fr.NFKC):de(n)}function ut(n,e){let t=n;const r=e.toLowerCase().split("/");for(let i=0;i<r.length;i++){let s=null;for(const o in t)if(o.toLowerCase()===r[i]){s=t[o];break}if(s===null)return null;t=s}return t}function jd(n){const e=de(n);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=me(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const qd=new W(ul);class Vd extends pn{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function hl(n,e){const t=JSON.parse(n);e=fa(e);const r=$e(ut(t,"ethaddr")),i=ln(ut(t,"encseed"));(!i||i.length%16!==0)&&qd.throwArgumentError("invalid encseed","json",n);const s=de(ca(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),h=new sr.ModeOfOperation.cbc(s,o),b=sr.padding.pkcs7.strip(de(h.decrypt(a)));let p="";for(let v=0;v<b.length;v++)p+=String.fromCharCode(b[v]);const d=lt(p),E=Ue(d);return new Vd({_isCrowdsaleAccount:!0,address:r,privateKey:E})}function ua(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return e.encseed&&e.ethaddr}function ha(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function Wd(n){if(ua(n))try{return $e(JSON.parse(n).ethaddr)}catch{return null}if(ha(n))try{return $e(JSON.parse(n).address)}catch{return null}return null}var Po={},Jd={get exports(){return Po},set exports(n){Po=n}};(function(n,e){(function(t){function i(A){const S=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let k=1779033703,L=3144134277,K=1013904242,z=2773480762,q=1359893119,U=2600822924,Z=528734635,se=1541459225;const ne=new Uint32Array(64);function J(D){let V=0,O=D.length;for(;O>=64;){let x=k,w=L,I=K,B=z,j=q,g=U,Y=Z,Q=se,$,P,G,te,oe;for(P=0;P<16;P++)G=V+P*4,ne[P]=(D[G]&255)<<24|(D[G+1]&255)<<16|(D[G+2]&255)<<8|D[G+3]&255;for(P=16;P<64;P++)$=ne[P-2],te=($>>>17|$<<32-17)^($>>>19|$<<32-19)^$>>>10,$=ne[P-15],oe=($>>>7|$<<32-7)^($>>>18|$<<32-18)^$>>>3,ne[P]=(te+ne[P-7]|0)+(oe+ne[P-16]|0)|0;for(P=0;P<64;P++)te=(((j>>>6|j<<32-6)^(j>>>11|j<<32-11)^(j>>>25|j<<32-25))+(j&g^~j&Y)|0)+(Q+(S[P]+ne[P]|0)|0)|0,oe=((x>>>2|x<<32-2)^(x>>>13|x<<32-13)^(x>>>22|x<<32-22))+(x&w^x&I^w&I)|0,Q=Y,Y=g,g=j,j=B+te|0,B=I,I=w,w=x,x=te+oe|0;k=k+x|0,L=L+w|0,K=K+I|0,z=z+B|0,q=q+j|0,U=U+g|0,Z=Z+Y|0,se=se+Q|0,V+=64,O-=64}}J(A);let M,l=A.length%64,u=A.length/536870912|0,y=A.length<<3,C=l<56?56:120,R=A.slice(A.length-l,A.length);for(R.push(128),M=l+1;M<C;M++)R.push(0);return R.push(u>>>24&255),R.push(u>>>16&255),R.push(u>>>8&255),R.push(u>>>0&255),R.push(y>>>24&255),R.push(y>>>16&255),R.push(y>>>8&255),R.push(y>>>0&255),J(R),[k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,K>>>24&255,K>>>16&255,K>>>8&255,K>>>0&255,z>>>24&255,z>>>16&255,z>>>8&255,z>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255,se>>>24&255,se>>>16&255,se>>>8&255,se>>>0&255]}function s(A,S,k){A=A.length<=64?A:i(A);const L=64+S.length+4,K=new Array(L),z=new Array(64);let q,U=[];for(q=0;q<64;q++)K[q]=54;for(q=0;q<A.length;q++)K[q]^=A[q];for(q=0;q<S.length;q++)K[64+q]=S[q];for(q=L-4;q<L;q++)K[q]=0;for(q=0;q<64;q++)z[q]=92;for(q=0;q<A.length;q++)z[q]^=A[q];function Z(){for(let se=L-1;se>=L-4;se--){if(K[se]++,K[se]<=255)return;K[se]=0}}for(;k>=32;)Z(),U=U.concat(i(z.concat(i(K)))),k-=32;return k>0&&(Z(),U=U.concat(i(z.concat(i(K))).slice(0,k))),U}function o(A,S,k,L,K){let z;for(p(A,(2*k-1)*16,K,0,16),z=0;z<2*k;z++)b(A,z*16,K,16),h(K,L),p(K,0,A,S+z*16,16);for(z=0;z<k;z++)p(A,S+z*2*16,A,z*16,16);for(z=0;z<k;z++)p(A,S+(z*2+1)*16,A,(z+k)*16,16)}function a(A,S){return A<<S|A>>>32-S}function h(A,S){p(A,0,S,0,16);for(let k=8;k>0;k-=2)S[4]^=a(S[0]+S[12],7),S[8]^=a(S[4]+S[0],9),S[12]^=a(S[8]+S[4],13),S[0]^=a(S[12]+S[8],18),S[9]^=a(S[5]+S[1],7),S[13]^=a(S[9]+S[5],9),S[1]^=a(S[13]+S[9],13),S[5]^=a(S[1]+S[13],18),S[14]^=a(S[10]+S[6],7),S[2]^=a(S[14]+S[10],9),S[6]^=a(S[2]+S[14],13),S[10]^=a(S[6]+S[2],18),S[3]^=a(S[15]+S[11],7),S[7]^=a(S[3]+S[15],9),S[11]^=a(S[7]+S[3],13),S[15]^=a(S[11]+S[7],18),S[1]^=a(S[0]+S[3],7),S[2]^=a(S[1]+S[0],9),S[3]^=a(S[2]+S[1],13),S[0]^=a(S[3]+S[2],18),S[6]^=a(S[5]+S[4],7),S[7]^=a(S[6]+S[5],9),S[4]^=a(S[7]+S[6],13),S[5]^=a(S[4]+S[7],18),S[11]^=a(S[10]+S[9],7),S[8]^=a(S[11]+S[10],9),S[9]^=a(S[8]+S[11],13),S[10]^=a(S[9]+S[8],18),S[12]^=a(S[15]+S[14],7),S[13]^=a(S[12]+S[15],9),S[14]^=a(S[13]+S[12],13),S[15]^=a(S[14]+S[13],18);for(let k=0;k<16;++k)A[k]+=S[k]}function b(A,S,k,L){for(let K=0;K<L;K++)k[K]^=A[S+K]}function p(A,S,k,L,K){for(;K--;)k[L++]=A[S++]}function d(A){if(!A||typeof A.length!="number")return!1;for(let S=0;S<A.length;S++){const k=A[S];if(typeof k!="number"||k%1||k<0||k>=256)return!1}return!0}function E(A,S){if(typeof A!="number"||A%1)throw new Error("invalid "+S);return A}function v(A,S,k,L,K,z,q){if(k=E(k,"N"),L=E(L,"r"),K=E(K,"p"),z=E(z,"dkLen"),k===0||k&k-1)throw new Error("N must be power of 2");if(k>2147483647/128/L)throw new Error("N too large");if(L>2147483647/128/K)throw new Error("r too large");if(!d(A))throw new Error("password must be an array or buffer");if(A=Array.prototype.slice.call(A),!d(S))throw new Error("salt must be an array or buffer");S=Array.prototype.slice.call(S);let U=s(A,S,K*128*L);const Z=new Uint32Array(K*32*L);for(let j=0;j<Z.length;j++){const g=j*4;Z[j]=(U[g+3]&255)<<24|(U[g+2]&255)<<16|(U[g+1]&255)<<8|(U[g+0]&255)<<0}const se=new Uint32Array(64*L),ne=new Uint32Array(32*L*k),J=32*L,M=new Uint32Array(16),l=new Uint32Array(16),u=K*k*2;let y=0,C=null,R=!1,D=0,V=0,O,x;const w=q?parseInt(1e3/L):4294967295,I=typeof setImmediate<"u"?setImmediate:setTimeout,B=function(){if(R)return q(new Error("cancelled"),y/u);let j;switch(D){case 0:x=V*32*L,p(Z,x,se,0,J),D=1,O=0;case 1:j=k-O,j>w&&(j=w);for(let Y=0;Y<j;Y++)p(se,0,ne,(O+Y)*J,J),o(se,J,L,M,l);if(O+=j,y+=j,q){const Y=parseInt(1e3*y/u);if(Y!==C){if(R=q(null,y/u),R)break;C=Y}}if(O<k)break;O=0,D=2;case 2:j=k-O,j>w&&(j=w);for(let Y=0;Y<j;Y++){const Q=(2*L-1)*16,$=se[Q]&k-1;b(ne,$*J,se,J),o(se,J,L,M,l)}if(O+=j,y+=j,q){const Y=parseInt(1e3*y/u);if(Y!==C){if(R=q(null,y/u),R)break;C=Y}}if(O<k)break;if(p(se,0,Z,x,J),V++,V<K){D=0;break}U=[];for(let Y=0;Y<Z.length;Y++)U.push(Z[Y]>>0&255),U.push(Z[Y]>>8&255),U.push(Z[Y]>>16&255),U.push(Z[Y]>>24&255);const g=s(A,U,z);return q&&q(null,1,g),g}q&&I(B)};if(!q)for(;;){const j=B();if(j!=null)return j}B()}const T={scrypt:function(A,S,k,L,K,z,q){return new Promise(function(U,Z){let se=0;q&&q(0),v(A,S,k,L,K,z,function(ne,J,M){if(ne)Z(ne);else if(M)q&&se!==1&&q(1),U(new Uint8Array(M));else if(q&&J!==se)return se=J,q(J)})})},syncScrypt:function(A,S,k,L,K,z){return new Uint8Array(v(A,S,k,L,K,z))}};n.exports=T})()})(Jd);const da=Po;var Yd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Oo=new W(ul);function ic(n){return n!=null&&n.mnemonic&&n.mnemonic.phrase}class Xd extends pn{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function Zd(n,e,t){if(ut(n,"crypto/cipher")==="aes-128-ctr"){const i=ln(ut(n,"crypto/cipherparams/iv")),s=new sr.Counter(i),o=new sr.ModeOfOperation.ctr(e,s);return de(o.decrypt(t))}return null}function dl(n,e){const t=ln(ut(n,"crypto/ciphertext"));if(me(Ue(He([e.slice(16,32),t]))).substring(2)!==ut(n,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=Zd(n,e.slice(0,16),t);i||Oo.throwError("unsupported cipher",W.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),o=Dr(i);if(n.address){let h=n.address.toLowerCase();if(h.substring(0,2)!=="0x"&&(h="0x"+h),$e(h)!==o)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:o,privateKey:me(i)};if(ut(n,"x-ethers/version")==="0.1"){const h=ln(ut(n,"x-ethers/mnemonicCiphertext")),b=ln(ut(n,"x-ethers/mnemonicCounter")),p=new sr.Counter(b),d=new sr.ModeOfOperation.ctr(s,p),E=ut(n,"x-ethers/path")||Fn,v=ut(n,"x-ethers/locale")||"en",T=de(d.decrypt(h));try{const A=us(T,v),S=Rt.fromMnemonic(A,null,v).derivePath(E);if(S.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=S.mnemonic}catch(A){if(A.code!==W.errors.INVALID_ARGUMENT||A.argument!=="wordlist")throw A}}return new Xd(a)}function pl(n,e,t,r,i){return de(ca(n,e,t,r,i))}function Qd(n,e,t,r,i){return Promise.resolve(pl(n,e,t,r,i))}function xl(n,e,t,r,i){const s=fa(e),o=ut(n,"crypto/kdf");if(o&&typeof o=="string"){const a=function(h,b){return Oo.throwArgumentError("invalid key-derivation function parameters",h,b)};if(o.toLowerCase()==="scrypt"){const h=ln(ut(n,"crypto/kdfparams/salt")),b=parseInt(ut(n,"crypto/kdfparams/n")),p=parseInt(ut(n,"crypto/kdfparams/r")),d=parseInt(ut(n,"crypto/kdfparams/p"));(!b||!p||!d)&&a("kdf",o),b&b-1&&a("N",b);const E=parseInt(ut(n,"crypto/kdfparams/dklen"));return E!==32&&a("dklen",E),r(s,h,b,p,d,64,i)}else if(o.toLowerCase()==="pbkdf2"){const h=ln(ut(n,"crypto/kdfparams/salt"));let b=null;const p=ut(n,"crypto/kdfparams/prf");p==="hmac-sha256"?b="sha256":p==="hmac-sha512"?b="sha512":a("prf",p);const d=parseInt(ut(n,"crypto/kdfparams/c")),E=parseInt(ut(n,"crypto/kdfparams/dklen"));return E!==32&&a("dklen",E),t(s,h,d,E,b)}}return Oo.throwArgumentError("unsupported key-derivation function","kdf",o)}function ep(n,e){const t=JSON.parse(n),r=xl(t,e,pl,da.syncScrypt);return dl(t,r)}function tp(n,e,t){return Yd(this,void 0,void 0,function*(){const r=JSON.parse(n),i=yield xl(r,e,Qd,da.scrypt,t);return dl(r,i)})}function rp(n,e,t,r){try{if($e(n.address)!==Dr(n.privateKey))throw new Error("address/privateKey mismatch");if(ic(n)){const S=n.mnemonic;if(Rt.fromMnemonic(S.phrase,null,S.locale).derivePath(S.path||Fn).privateKey!=n.privateKey)throw new Error("mnemonic mismatch")}}catch(S){return Promise.reject(S)}typeof t=="function"&&!r&&(r=t,t={}),t||(t={});const i=de(n.privateKey),s=fa(e);let o=null,a=null,h=null;if(ic(n)){const S=n.mnemonic;o=de(fs(S.phrase,S.locale||"en")),a=S.path||Fn,h=S.locale||"en"}let b=t.client;b||(b="ethers.js");let p=null;t.salt?p=de(t.salt):p=Qn(32);let d=null;if(t.iv){if(d=de(t.iv),d.length!==16)throw new Error("invalid iv")}else d=Qn(16);let E=null;if(t.uuid){if(E=de(t.uuid),E.length!==16)throw new Error("invalid uuid")}else E=Qn(16);let v=1<<17,T=8,A=1;return t.scrypt&&(t.scrypt.N&&(v=t.scrypt.N),t.scrypt.r&&(T=t.scrypt.r),t.scrypt.p&&(A=t.scrypt.p)),da.scrypt(s,p,v,T,A,64,r).then(S=>{S=de(S);const k=S.slice(0,16),L=S.slice(16,32),K=S.slice(32,64),z=new sr.Counter(d),q=new sr.ModeOfOperation.ctr(k,z),U=de(q.encrypt(i)),Z=Ue(He([L,U])),se={address:n.address.substring(2).toLowerCase(),id:jd(E),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:me(d).substring(2)},ciphertext:me(U).substring(2),kdf:"scrypt",kdfparams:{salt:me(p).substring(2),n:v,dklen:32,p:A,r:T},mac:Z.substring(2)}};if(o){const ne=Qn(16),J=new sr.Counter(ne),M=new sr.ModeOfOperation.ctr(K,J),l=de(M.encrypt(o)),u=new Date,y=u.getUTCFullYear()+"-"+Wn(u.getUTCMonth()+1,2)+"-"+Wn(u.getUTCDate(),2)+"T"+Wn(u.getUTCHours(),2)+"-"+Wn(u.getUTCMinutes(),2)+"-"+Wn(u.getUTCSeconds(),2)+".0Z";se["x-ethers"]={client:b,gethFilename:"UTC--"+y+"--"+se.address,mnemonicCounter:me(ne).substring(2),mnemonicCiphertext:me(l).substring(2),path:a,locale:h,version:"0.1"}}return JSON.stringify(se)})}function np(n,e,t){if(ua(n)){t&&t(0);const r=hl(n,e);return t&&t(1),Promise.resolve(r)}return ha(n)?tp(n,e,t):Promise.reject(new Error("invalid JSON wallet"))}function ip(n,e){if(ua(n))return hl(n,e);if(ha(n))return ep(n,e);throw new Error("invalid JSON wallet")}const sp="wallet/5.5.0";var sc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const nn=new W(sp);function op(n){return n!=null&&ke(n.privateKey,32)&&n.address!=null}function ap(n){const e=n.mnemonic;return e&&e.phrase}class gr extends _r{constructor(e,t){if(nn.checkNew(new.target,gr),super(),op(e)){const r=new cn(e.privateKey);if(ce(this,"_signingKey",()=>r),ce(this,"address",Dr(this.publicKey)),this.address!==$e(e.address)&&nn.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),ap(e)){const i=e.mnemonic;ce(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Fn,locale:i.locale||"en"}));const s=this.mnemonic,o=Rt.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);Dr(o.privateKey)!==this.address&&nn.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ce(this,"_mnemonic",()=>null)}else{if(cn.isSigningKey(e))e.curve!=="secp256k1"&&nn.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ce(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const r=new cn(e);ce(this,"_signingKey",()=>r)}ce(this,"_mnemonic",()=>null),ce(this,"address",Dr(this.publicKey))}t&&!Gr.isProvider(t)&&nn.throwArgumentError("invalid provider","provider",t),ce(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new gr(this,e)}signTransaction(e){return ct(e).then(t=>{t.from!=null&&($e(t.from)!==this.address&&nn.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(Ue(Ro(t)));return Ro(t,r)})}signMessage(e){return sc(this,void 0,void 0,function*(){return wo(this._signingKey().signDigest(ta(e)))})}_signTypedData(e,t,r){return sc(this,void 0,void 0,function*(){const i=yield mt.resolveNames(e,t,r,s=>(this.provider==null&&nn.throwError("cannot resolve ENS names without a provider",W.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return wo(this._signingKey().signDigest(mt.hash(i.domain,t,i.value)))})}encrypt(e,t,r){if(typeof t=="function"&&!r&&(r=t,t={}),r&&typeof r!="function")throw new Error("invalid callback");return t||(t={}),rp(this,e,t,r)}static createRandom(e){let t=Qn(16);e||(e={}),e.extraEntropy&&(t=de(Bt(Ue(He([t,e.extraEntropy])),0,16)));const r=us(t,e.locale);return gr.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return np(e,t,r).then(i=>new gr(i))}static fromEncryptedJsonSync(e,t){return new gr(ip(e,t))}static fromMnemonic(e,t,r){return t||(t=Fn),new gr(Rt.fromMnemonic(e,null,r).derivePath(t))}}function cp(n,e){return Ei(ta(n),e)}function lp(n,e,t,r){return Ei(mt.hash(n,e,t),r)}const fp="networks/5.5.2",oc=new W(fp);function up(n){return n&&typeof n.renetwork=="function"}function Nn(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider)try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider)try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider)try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider){const s=["goerli","ropsten","rinkeby"];try{const o=new t.PocketProvider(n);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider)try{i.push(new t.CloudflareProvider(n))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return Nn(t)},e}function Zi(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return Zi(n,r)},t}const ac={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Nn("homestead")},cc={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Nn("ropsten")},lc={chainId:63,name:"classicMordor",_defaultProvider:Zi("https://www.ethercluster.com/mordor","classicMordor")},Ri={unspecified:{chainId:0,name:"unspecified"},homestead:ac,mainnet:ac,morden:{chainId:2,name:"morden"},ropsten:cc,testnet:cc,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Nn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Nn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Nn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:Zi("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:lc,classicTestnet:lc,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Zi("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function pa(n){if(n==null)return null;if(typeof n=="number"){for(const r in Ri){const i=Ri[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=Ri[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=Ri[n.name];if(!e)return typeof n.chainId!="number"&&oc.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&oc.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(up(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}function bl(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return de(e)}function xa(n){n=de(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}const hp=Object.freeze(Object.defineProperty({__proto__:null,decode:bl,encode:xa},Symbol.toStringTag,{value:"Module"})),dp="web/5.5.1";var pp=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};function xp(n,e){return pp(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client");const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:de(new Uint8Array(i))}})}var bp=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const qt=new W(dp);function fc(n){return new Promise(e=>{setTimeout(e,n)})}function Lr(n,e){if(n==null)return null;if(typeof n=="string")return n;if(Un(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return pr(n)}catch{}return me(n)}return n}function mp(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;qt.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;qt.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o={};let a=null;const h={method:"GET"};let b=!1,p=2*60*1e3;if(typeof n=="string")a=n;else if(typeof n=="object"){if((n==null||n.url==null)&&qt.throwArgumentError("missing URL","connection.url",n),a=n.url,typeof n.timeout=="number"&&n.timeout>0&&(p=n.timeout),n.headers)for(const S in n.headers)o[S.toLowerCase()]={key:S,value:String(n.headers[S])},["if-none-match","if-modified-since"].indexOf(S.toLowerCase())>=0&&(b=!0);if(h.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){a.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&qt.throwError("basic authentication requires a secure https url",W.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:n.user,password:"[REDACTED]"});const S=n.user+":"+n.password;o.authorization={key:"Authorization",value:"Basic "+xa(lt(S))}}}const d=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),E=a?a.match(d):null;if(E)try{const S={statusCode:200,statusMessage:"OK",headers:{"content-type":E[1]},body:bl(E[2])};let k=S.body;return t&&(k=t(S.body,S)),Promise.resolve(k)}catch(S){qt.throwError("processing response error",W.errors.SERVER_ERROR,{body:Lr(E[1],E[2]),error:S,requestBody:null,requestMethod:"GET",url:a})}e&&(h.method="POST",h.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const v={};Object.keys(o).forEach(S=>{const k=o[S];v[k.key]=k.value}),h.headers=v;const T=function(){let S=null;return{promise:new Promise(function(K,z){p&&(S=setTimeout(()=>{S!=null&&(S=null,z(qt.makeError("timeout",W.errors.TIMEOUT,{requestBody:Lr(h.body,v["content-type"]),requestMethod:h.method,timeout:p,url:a})))},p))}),cancel:function(){S!=null&&(clearTimeout(S),S=null)}}}(),A=function(){return bp(this,void 0,void 0,function*(){for(let S=0;S<r;S++){let k=null;try{if(k=yield xp(a,h),S<r){if(k.statusCode===301||k.statusCode===302){const K=k.headers.location||"";if(h.method==="GET"&&K.match(/^https:/)){a=k.headers.location;continue}}else if(k.statusCode===429){let K=!0;if(i&&(K=yield i(S,a)),K){let z=0;const q=k.headers["retry-after"];typeof q=="string"&&q.match(/^[1-9][0-9]*$/)?z=parseInt(q)*1e3:z=s*parseInt(String(Math.random()*Math.pow(2,S))),yield fc(z);continue}}}}catch(K){k=K.response,k==null&&(T.cancel(),qt.throwError("missing response",W.errors.SERVER_ERROR,{requestBody:Lr(h.body,v["content-type"]),requestMethod:h.method,serverError:K,url:a}))}let L=k.body;if(b&&k.statusCode===304?L=null:(k.statusCode<200||k.statusCode>=300)&&(T.cancel(),qt.throwError("bad response",W.errors.SERVER_ERROR,{status:k.statusCode,headers:k.headers,body:Lr(L,k.headers?k.headers["content-type"]:null),requestBody:Lr(h.body,v["content-type"]),requestMethod:h.method,url:a})),t)try{const K=yield t(L,k);return T.cancel(),K}catch(K){if(K.throttleRetry&&S<r){let z=!0;if(i&&(z=yield i(S,a)),z){const q=s*parseInt(String(Math.random()*Math.pow(2,S)));yield fc(q);continue}}T.cancel(),qt.throwError("processing response error",W.errors.SERVER_ERROR,{body:Lr(L,k.headers?k.headers["content-type"]:null),error:K,requestBody:Lr(h.body,v["content-type"]),requestMethod:h.method,url:a})}return T.cancel(),L}return qt.throwError("failed response",W.errors.SERVER_ERROR,{requestBody:Lr(h.body,v["content-type"]),requestMethod:h.method,url:a})})}();return Promise.race([T.promise,A])}function hs(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(pr(s))}catch(h){qt.throwError("invalid JSON",W.errors.SERVER_ERROR,{body:s,error:h})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=lt(e);const s=typeof n=="string"?{url:n}:De(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=De(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return mp(n,i,r)}function Sn(n,e){return e||(e={}),e=De(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let h=0;function b(){return n().then(function(p){if(p!==void 0)o()&&t(p);else if(e.oncePoll)e.oncePoll.once("poll",b);else if(e.onceBlock)e.onceBlock.once("block",b);else if(!s){if(h++,h>a){o()&&r(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,h)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(b,d)}return null},function(p){o()&&r(p)})}b()})}var Qi="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Io={};for(var Ni=0;Ni<Qi.length;Ni++){var Zs=Qi.charAt(Ni);if(Io[Zs]!==void 0)throw new TypeError(Zs+" is ambiguous");Io[Zs]=Ni}function Bn(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function ml(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Bn(e)^r>>5}for(e=Bn(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=Bn(e)^i&31}return e}function gp(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=ml(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=Bn(r)^o,i+=Qi.charAt(o)}for(s=0;s<6;++s)r=Bn(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=Qi.charAt(a)}return i}function gl(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=ml(s);if(typeof a=="string")return a;for(var h=[],b=0;b<o.length;++b){var p=o.charAt(b),d=Io[p];if(d===void 0)return"Unknown character "+p;a=Bn(a)^d,!(b+6>=o.length)&&h.push(d)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:h}}function yp(){var n=gl.apply(null,arguments);if(typeof n=="object")return n}function wp(n){var e=gl.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function ds(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],h=0;h<n.length;++h)for(i=i<<e|n[h],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function vp(n){var e=ds(n,8,5,!0);if(Array.isArray(e))return e}function Ep(n){var e=ds(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function Ap(n){var e=ds(n,5,8,!1);if(Array.isArray(e))return e}function Tp(n){var e=ds(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var uc={decodeUnsafe:yp,decode:wp,encode:gp,toWordsUnsafe:vp,toWords:Ep,fromWordsUnsafe:Ap,fromWords:Tp};const _t="providers/5.5.0",yn=new W(_t);class ve{constructor(){yn.checkNew(new.target,ve),this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),h=this.number.bind(this),b=this.type.bind(this),p=d=>this.data(d,!0);return e.transaction={hash:o,type:b,accessList:ve.allowNull(this.accessList.bind(this),null),blockHash:ve.allowNull(o,null),blockNumber:ve.allowNull(h,null),transactionIndex:ve.allowNull(h,null),confirmations:ve.allowNull(h,null),from:t,gasPrice:ve.allowNull(r),maxPriorityFeePerGas:ve.allowNull(r),maxFeePerGas:ve.allowNull(r),gasLimit:r,to:ve.allowNull(t,null),value:r,nonce:h,data:s,r:ve.allowNull(this.uint256),s:ve.allowNull(this.uint256),v:ve.allowNull(h),creates:ve.allowNull(t,null),raw:ve.allowNull(s)},e.transactionRequest={from:ve.allowNull(t),nonce:ve.allowNull(h),gasLimit:ve.allowNull(r),gasPrice:ve.allowNull(r),maxPriorityFeePerGas:ve.allowNull(r),maxFeePerGas:ve.allowNull(r),to:ve.allowNull(t),value:ve.allowNull(r),data:ve.allowNull(p),type:ve.allowNull(h),accessList:ve.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:h,blockNumber:h,transactionHash:o,address:t,topics:ve.arrayOf(o),data:s,logIndex:h,blockHash:o},e.receipt={to:ve.allowNull(this.address,null),from:ve.allowNull(this.address,null),contractAddress:ve.allowNull(t,null),transactionIndex:h,root:ve.allowNull(a),gasUsed:r,logsBloom:ve.allowNull(s),blockHash:o,transactionHash:o,logs:ve.arrayOf(this.receiptLog.bind(this)),blockNumber:h,confirmations:ve.allowNull(h,null),cumulativeGasUsed:r,effectiveGasPrice:ve.allowNull(r),status:ve.allowNull(h),type:b},e.block={hash:o,parentHash:o,number:h,timestamp:h,nonce:ve.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:t,extraData:s,transactions:ve.allowNull(ve.arrayOf(o)),baseFeePerGas:ve.allowNull(r)},e.blockWithTransactions=De(e.block),e.blockWithTransactions.transactions=ve.allowNull(ve.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ve.allowNull(i,void 0),toBlock:ve.allowNull(i,void 0),blockHash:ve.allowNull(o,void 0),address:ve.allowNull(t,void 0),topics:ve.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ve.allowNull(h),blockHash:ve.allowNull(o),transactionIndex:h,removed:ve.allowNull(this.boolean.bind(this)),address:t,data:ve.allowFalsish(s,"0x"),topics:ve.arrayOf(o),transactionHash:o,logIndex:h},e}accessList(e){return Vr(e||[])}number(e){return e==="0x"?0:pe.from(e).toNumber()}type(e){return e==="0x"||e==null?0:pe.from(e).toNumber()}bigNumber(e){return pe.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),ke(e))?e.toLowerCase():yn.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return $e(e)}callAddress(e){if(!ke(e,32))return null;const t=$e(Bt(e,12));return t===u0?null:t}contractAddress(e){return is(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";if(e==="latest"||e==="pending")return e;if(typeof e=="number"||ke(e))return yi(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return Hr(r)!==32?yn.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=pe.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!ke(e))throw new Error("invalid uint256");return Ge(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=ve.check(t,e);return i._difficulty=r==null?null:pe.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ve.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&pe.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=ve.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;ke(r)&&(r=pe.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),ke(r)&&(r=pe.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return tl(e)}receiptLog(e){return ve.check(this.formats.receiptLog,e)}receipt(e){const t=ve.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=pe.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&yn.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):yn.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&yn.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return ve.check(this.formats.filter,e)}filterLog(e){return ve.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}}function yl(n){return n&&typeof n.isCommunityResource=="function"}function Lo(n){return yl(n)&&n.isCommunityResource()}let hc=!1;function ps(){hc||(hc=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Se=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Ie=new W(_t);function dc(n){return n==null?"null":(Hr(n)!==32&&Ie.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function pc(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[dc(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return dc(e)}).join("&")}function kp(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function wn(n){if(typeof n=="string"){if(n=n.toLowerCase(),Hr(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+pc(n);if(Mu.isForkEvent(n))throw Ie.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+pc(n.topics||[])}throw new Error("invalid event - "+n)}function Jn(){return new Date().getTime()}function xc(n){return new Promise(e=>{setTimeout(e,n)})}const Sp=["block","network","pending","poll"];class _p{constructor(e,t,r){ce(this,"tag",e),ce(this,"listener",t),ce(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=kp(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Sp.indexOf(this.tag)>=0}}const Mp={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Qs(n){return Ge(pe.from(n).toHexString(),32)}function bc(n){return Ai.encode(He([n,Bt(Tr(Tr(n)),0,4)]))}const mc=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Cp(n){try{return pr(wl(n))}catch{}return null}function wl(n){if(n==="0x")return null;const e=pe.from(Bt(n,0,32)).toNumber(),t=pe.from(Bt(n,e,e+32)).toNumber();return Bt(n,e+32,e+32+t)}class $o{constructor(e,t,r,i){ce(this,"provider",e),ce(this,"name",r),ce(this,"address",e.formatter.address(t)),ce(this,"_resolvedAddress",i)}_fetchBytes(e,t){return Se(this,void 0,void 0,function*(){const r={to:this.address,data:Dt([e,pi(this.name),t||"0x"])};try{return wl(yield this.provider.call(r))}catch(i){return i.code===W.errors.CALL_EXCEPTION,null}})}_getAddress(e,t){const r=Mp[String(e)];if(r==null&&Ie.throwError(`unsupported coin type: ${e}`,W.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=de(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return bc(He([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return bc(He([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=uc.toWords(i.slice(2));return a.unshift(o),uc.encode(r.prefix,a)}}return null}getAddress(e){return Se(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i={to:this.address,data:"0x3b3b57de"+pi(this.name).substring(2)},s=yield this.provider.call(i);return s==="0x"||s===Yo?null:this.provider.formatter.callAddress(s)}catch(i){if(i.code===W.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",Qs(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Ie.throwError("invalid or unsupported coin data",W.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return Se(this,void 0,void 0,function*(){const e=[];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<mc.length;r++){const i=t.match(mc[r]);if(i!=null)switch(i[1]){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:`https://gateway.ipfs.io/ipfs/${t.substring(7)}`};case"erc721":case"erc1155":{const s=i[1]==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i[1],content:t});const o=this._resolvedAddress||(yield this.getAddress()),a=(i[2]||"").split("/");if(a.length!==2)return null;const h=yield this.provider.formatter.address(a[0]),b=Ge(pe.from(a[1]).toHexString(),32);if(i[1]==="erc721"){const v=this.provider.formatter.callAddress(yield this.provider.call({to:h,data:Dt(["0x6352211e",b])}));if(o!==v)return null;e.push({type:"owner",content:v})}else if(i[1]==="erc1155"){const v=pe.from(yield this.provider.call({to:h,data:Dt(["0x00fdd58e",Ge(o,32),b])}));if(v.isZero())return null;e.push({type:"balance",content:v.toString()})}const p={to:this.provider.formatter.address(a[0]),data:Dt([s,b])};let d=Cp(yield this.provider.call(p));if(d==null)return null;e.push({type:"metadata-url",content:d}),i[1]==="erc1155"&&(d=d.replace("{id}",b.substring(2)));const E=yield hs(d);return!E||typeof E.image!="string"||!E.image.match(/^https:\/\//i)?null:(e.push({type:"metadata",content:JSON.stringify(E)}),e.push({type:"url",content:E.image}),{linkage:e,url:E.image})}}}}catch{}return null})}getContentHash(){return Se(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=parseInt(t[3],16);if(t[4].length===i*2)return"ipfs://"+Ai.encode("0x"+t[1])}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);return r&&r[1].length===32*2?"bzz://"+r[1]:Ie.throwError("invalid or unsupported content hash data",W.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Se(this,void 0,void 0,function*(){let t=lt(e);t=He([Qs(64),Qs(t.length),t]),t.length%32!==0&&(t=He([t,Ge("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",me(t));return r==null||r==="0x"?null:pr(r)})}}let eo=null,Rp=1;class xs extends Gr{constructor(e){if(Ie.checkNew(new.target,Gr),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),ce(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=pt(new.target,"getNetwork")(e);t?(ce(this,"_network",t),this.emit("network",t,null)):Ie.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Se(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Ie.throwError("no network detected",W.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ce(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Sn(()=>this._ready().then(e=>e,e=>{if(!(e.code===W.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return eo==null&&(eo=new ve),eo}static getNetwork(e){return pa(e??"homestead")}_getInternalBlockNumber(e){return Se(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Jn()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=Jn(),r=ct({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=Jn();return i=pe.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Se(this,void 0,void 0,function*(){const e=Rp++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Ie.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Ie.makeError("network block skew detected",W.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{const s=i.filter;s.fromBlock=this._lastBlockNumber+1,s.toBlock=r;const o=this.getLogs(s).then(a=>{a.length!==0&&a.forEach(h=>{this._emitted["b:"+h.blockHash]=h.blockNumber,this._emitted["t:"+h.transactionHash]=h.blockNumber,this.emit(s,h)})}).catch(a=>{this.emit("error",a)});t.push(o);break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Se(this,void 0,void 0,function*(){return Ie.throwError("provider does not support network detection",W.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Se(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield xc(0),this._network;const r=Ie.makeError("underlying network changed",W.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Jn();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Jn(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Se(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return Se(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const h=[];let b=!1;const p=function(){return b?!0:(b=!0,h.forEach(E=>{E()}),!1)},d=E=>{E.confirmations<t||p()||o(E)};if(this.on(e,d),h.push(()=>{this.removeListener(e,d)}),i){let E=i.startBlock,v=null;const T=A=>Se(this,void 0,void 0,function*(){b||(yield xc(1e3),this.getTransactionCount(i.from).then(S=>Se(this,void 0,void 0,function*(){if(!b){if(S<=i.nonce)E=A;else{{const k=yield this.getTransaction(e);if(k&&k.blockNumber!=null)return}for(v==null&&(v=E-3,v<i.startBlock&&(v=i.startBlock));v<=A;){if(b)return;const k=yield this.getBlockWithTransactions(v);for(let L=0;L<k.transactions.length;L++){const K=k.transactions[L];if(K.hash===e)return;if(K.from===i.from&&K.nonce===i.nonce){if(b)return;const z=yield this.waitForTransaction(K.hash,t);if(p())return;let q="replaced";K.data===i.data&&K.to===i.to&&K.value.eq(i.value)?q="repriced":K.data==="0x"&&K.from===K.to&&K.value.isZero()&&(q="cancelled"),a(Ie.makeError("transaction was replaced",W.errors.TRANSACTION_REPLACED,{cancelled:q==="replaced"||q==="cancelled",reason:q,replacement:this._wrapTransaction(K),hash:e,receipt:z}));return}}v++}}b||this.once("block",T)}}),S=>{b||this.once("block",T)}))});if(b)return;this.once("block",T),h.push(()=>{this.removeListener("block",T)})}if(typeof r=="number"&&r>0){const E=setTimeout(()=>{p()||a(Ie.makeError("timeout exceeded",W.errors.TIMEOUT,{timeout:r}))},r);E.unref&&E.unref(),h.push(()=>{clearTimeout(E)})}})})}getBlockNumber(){return Se(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return pe.from(e)}catch(t){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ct({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return pe.from(i)}catch(s){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ct({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return pe.from(i).toNumber()}catch(s){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ct({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return me(i)}catch(s){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ct({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>yi(o))}),s=yield this.perform("getStorageAt",i);try{return me(s)}catch(o){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&Hr(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Ie.throwError("Transaction hash mismatch from Provider.sendTransaction.",W.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>Se(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const h=yield this._waitForTransaction(e.hash,s,o,a);return h==null&&s===0?null:(this._emitted["t:"+e.hash]=h.blockNumber,h.status===0&&Ie.throwError("transaction failed",W.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:h}),h)}),i}sendTransaction(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>me(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return Se(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?pe.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?me(s):null))}),this.formatter.transactionRequest(yield ct(r))})}_getFilter(e){return Se(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield ct(t))})}call(e,t){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ct({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("call",r);try{return me(i)}catch(s){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"call",params:r,result:i,error:s})}})}estimateGas(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield ct({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return pe.from(r)}catch(i){return Ie.throwError("bad result from backend",W.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return Se(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Ie.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Ie.throwError("ENS name not configured",W.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(ke(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),ke(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Ie.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Sn(()=>Se(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let h=0;h<s.transactions.length;h++){const b=s.transactions[h];if(b.blockNumber==null)b.confirmations=0;else if(b.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let p=o-b.blockNumber+1;p<=0&&(p=1),b.confirmations=p}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(h=>this._wrapTransaction(h)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Sn(()=>Se(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Sn(()=>Se(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield ct({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),ve.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Se(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Se(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Ie.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Se(this,void 0,void 0,function*(){try{const t=yield this._getResolver(e);return t==null?null:new $o(this,t,e)}catch(t){return t.code===W.errors.CALL_EXCEPTION,null}})}_getResolver(e){return Se(this,void 0,void 0,function*(){const t=yield this.getNetwork();t.ensAddress||Ie.throwError("network does not support ENS",W.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:t.name});const r={to:t.ensAddress,data:"0x0178b8bf"+pi(e).substring(2)};try{return this.formatter.callAddress(yield this.call(r))}catch(i){if(i.code===W.errors.CALL_EXCEPTION)return null;throw i}})}resolveName(e){return Se(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(ke(e))throw r}typeof e!="string"&&Ie.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Se(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t);if(!r)return null;let i=de(yield this.call({to:r,data:"0x691f3431"+pi(t).substring(2)}));if(i.length<32||!pe.from(i.slice(0,32)).eq(32)||(i=i.slice(32),i.length<32))return null;const s=pe.from(i.slice(0,32)).toNumber();if(i=i.slice(32),s>i.length)return null;const o=pr(i.slice(0,s));return(yield this.resolveName(o))!=e?null:o})}getAvatar(e){return Se(this,void 0,void 0,function*(){let t=null;if(ke(e)){const i=this.formatter.address(e),s=i.substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s);if(!o)return null;t=new $o(this,o,"_",i)}else t=yield this.getResolver(e);const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Ie.throwError(e+" not implemented",W.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new _p(wn(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=wn(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=wn(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=wn(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=wn(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=wn(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var mr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const gt=new W(_t),Np=["call","estimateGas"];function vl(n,e,t){if(n==="call"&&e.code===W.errors.SERVER_ERROR){const s=e.error;if(s&&s.message.match("reverted")&&ke(s.data))return s.data;gt.throwError("missing revert data in call exception",W.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let r=e.message;e.code===W.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText),r=(r||"").toLowerCase();const i=t.transaction||t.signedTransaction;throw r.match(/insufficient funds|base fee exceeds gas limit/)&&gt.throwError("insufficient funds for intrinsic transaction cost",W.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:i}),r.match(/nonce too low/)&&gt.throwError("nonce has already been used",W.errors.NONCE_EXPIRED,{error:e,method:n,transaction:i}),r.match(/replacement transaction underpriced/)&&gt.throwError("replacement fee too low",W.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:i}),r.match(/only replay-protected/)&&gt.throwError("legacy pre-eip-155 transactions not supported",W.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:i}),Np.indexOf(n)>=0&&r.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&gt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",W.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:i}),e}function gc(n){return new Promise(function(e){setTimeout(e,n)})}function Bp(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function Yn(n){return n&&n.toLowerCase()}const Fo={};class Ti extends _r{constructor(e,t,r){if(gt.checkNew(new.target,Ti),super(),e!==Fo)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ce(this,"provider",t),r==null&&(r=0),typeof r=="string"?(ce(this,"_address",this.provider.formatter.address(r)),ce(this,"_index",null)):typeof r=="number"?(ce(this,"_index",r),ce(this,"_address",null)):gt.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return gt.throwError("cannot alter JSON-RPC Signer connection",W.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Pp(Fo,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&gt.throwError("unknown account #"+this._index,W.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=De(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=De(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>mr(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&gt.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),ct({tx:ct(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&gt.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>vl("sendTransaction",o,s))})}signTransaction(e){return gt.throwError("signing transactions is unsupported",W.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return mr(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Sn(()=>mr(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return mr(this,void 0,void 0,function*(){const t=typeof e=="string"?lt(e):e,r=yield this.getAddress();return yield this.provider.send("personal_sign",[me(t),r.toLowerCase()])})}_legacySignMessage(e){return mr(this,void 0,void 0,function*(){const t=typeof e=="string"?lt(e):e,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),me(t)])})}_signTypedData(e,t,r){return mr(this,void 0,void 0,function*(){const i=yield mt.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(mt.getPayload(i.domain,t,i.value))])})}unlock(e){return mr(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class Pp extends Ti{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Op={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class kr extends xs{constructor(e,t){gt.checkNew(new.target,kr);let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=pt(this.constructor,"defaultUrl")()),typeof e=="string"?ce(this,"connection",Object.freeze({url:e})):ce(this,"connection",Object.freeze(De(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return mr(this,void 0,void 0,function*(){yield gc(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=pt(this.constructor,"getNetwork");try{return t(pe.from(e).toNumber())}catch(r){return gt.throwError("could not detect network",W.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return gt.throwError("could not detect network",W.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Ti(Fo,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:St(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=hs(this.connection,JSON.stringify(r),Bp).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Yn(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Yn(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Yn(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Yn(t.address),t.position,t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[pt(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[pt(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Yn(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return mr(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&pe.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=De(t),t.transaction=De(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&gt.throwError(e+" not implemented",W.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return vl(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(h){return e.emit("pending",h),null})})}),o.then(function(){return gc(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=De(Op);if(t)for(const s in t)t[s]&&(r[s]=!0);qo(e,r);const i={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=yi(e[s]);s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=me(e[s]))}),e.accessList&&(i.accessList=Vr(e.accessList)),i}}let ai=null;try{if(ai=WebSocket,ai==null)throw new Error("inject please")}catch{const e=new W(_t);ai=function(){e.throwError("WebSockets not supported in this environment",W.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var to=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Bi=new W(_t);let Ip=1;class bs extends kr{constructor(e,t){t==="any"&&Bi.throwError("WebSocketProvider does not support 'any' network yet",W.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(e,t),this._pollingInterval=-1,this._wsReady=!1,ce(this,"_websocket",new ai(this.connection.url)),ce(this,"_requests",{}),ce(this,"_subs",{}),ce(this,"_subIds",{}),ce(this,"_detectNetwork",super.detectNetwork()),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this._websocket.send(this._requests[i].payload)})},this._websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),h=this._requests[a];if(delete this._requests[a],o.result!==void 0)h.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(h.payload),response:o.result,provider:this});else{let b=null;o.error?(b=new Error(o.error.message||"unknown error"),ce(b,"code",o.error.code||null),ce(b,"response",s)):b=new Error("unknown error"),h.callback(b,void 0),this.emit("debug",{action:"response",error:b,request:JSON.parse(h.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Bi.throwError("cannot reset events block on WebSocketProvider",W.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Bi.throwError("cannot set polling interval on WebSocketProvider",W.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return to(this,void 0,void 0,function*(){return null})}set polling(e){e&&Bi.throwError("cannot set polling on WebSocketProvider",W.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Ip++;return new Promise((i,s)=>{function o(h,b){return h?s(h):i(b)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(r)]={callback:o,payload:a},this._wsReady&&this._websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return to(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=pe.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return to(this,void 0,void 0,function*(){this._websocket.readyState===ai.CONNECTING&&(yield new Promise(e=>{this._websocket.onopen=function(){e(!0)},this._websocket.onerror=function(){e(!1)}})),this._websocket.close(1e3)})}}var Lp=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const ei=new W(_t);class El extends kr{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Lp(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||ei.throwError("no network detected",W.errors.UNKNOWN_ERROR,{}),this._network==null&&(ce(this,"_network",t),this.emit("network",t,null))),t})}}class Wr extends El{constructor(e,t){ei.checkAbstract(new.target,Wr),e=pt(new.target,"getNetwork")(e),t=pt(new.target,"getApiKey")(t);const r=pt(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?ce(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{ce(this,i,t[i])})}_startPending(){ei.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return ei.throwError("API provider does not support signing",W.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return ei.throwError("not implemented; sub-classes must override getUrl",W.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const yc=new W(_t),Gi="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Al extends bs{constructor(e,t){const r=new ba(e,t),i=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,r.network),ce(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Gi}}class ba extends Wr{static getWebSocketProvider(e,t){return new Al(e,t)}static getApiKey(e){return e==null?Gi:(e&&typeof e!="string"&&yc.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;default:yc.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===Gi&&ps(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Gi}}var $p=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const wc=new W(_t);class Tl extends Wr{static getApiKey(e){return e!=null&&wc.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:wc.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return $p(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var Pi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const wr=new W(_t);function vc(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=yi(me(r)):t==="accessList"?r="["+Vr(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":r=me(r),e[t]=r)}return e}function Fp(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||n.message!="OK"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function Ec(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function Ac(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}const Tc="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function ro(n,e,t){if(n==="call"&&e.code===W.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),ke(s))return s;wr.throwError("missing revert data in call exception",W.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===W.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&wr.throwError("insufficient funds for intrinsic transaction cost",W.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&wr.throwError("nonce has already been used",W.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&wr.throwError("replacement fee too low",W.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&wr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",W.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class ms extends xs{constructor(e,t){wr.checkNew(new.target,ms),super(e),ce(this,"baseUrl",this.getBaseUrl()),ce(this,"apiKey",t||Tc)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io"}return wr.throwArgumentError("unsupported network","network",name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Pi(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?Ec:Fp;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(p,d)=>(this.isCommunityResource()&&ps(),Promise.resolve(!0))};let h=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},h=Object.keys(s).map(p=>`${p}=${s[p]}`).join("&"));const b=yield hs(a,h,o||Ec);return this.emit("debug",{action:"response",request:i,response:St(b),provider:this}),b})}detectNetwork(){return Pi(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Pi(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>ro("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=vc(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return ro("call",s,t.transaction)}}case"estimateGas":{const i=vc(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return ro("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=Ac(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=Ac(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&wr.throwError("unsupported topic count",W.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&wr.throwError("unsupported topic format",W.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const h=s[a];if(h.blockHash==null){if(o[h.blockNumber]==null){const b=yield this.getBlock(h.blockNumber);b&&(o[h.blockNumber]=b.hash)}h.blockHash=o[h.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Pi(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(h){o[h]==""&&delete o[h]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey===Tc}}var es=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const $r=new W(_t);function Oi(){return new Date().getTime()}function kc(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||$r.throwArgumentError("provider mismatch","networks",n):e=r}return e}function Sc(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function _n(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(pe.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>_n(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return typeof r=="function"?r="[function]":r=_n(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let Up=1;function _c(n){let e=null,t=null,r=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,n)});const i=o=>(r=r.then(o),r);function s(){return r}return{cancel:e,getPromise:s,wait:i}}const Dp=[W.errors.CALL_EXCEPTION,W.errors.INSUFFICIENT_FUNDS,W.errors.NONCE_EXPIRED,W.errors.REPLACEMENT_UNDERPRICED,W.errors.UNPREDICTABLE_GAS_LIMIT],Hp=["address","args","errorArgs","errorSignature","method","transaction"];function Ii(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function Gp(n,e){return function(t){const r={};t.forEach(s=>{const o=n(s.result);r[o]||(r[o]={count:0,result:s.result}),r[o].count++});const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];if(o.count>=e)return o.result}}}function Kp(n,e,t){let r=_n;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=Sc(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return Sc(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:(i=De(i),i.confirmations=-1,_n(i))};break;case"getBlock":t.includeTransactions?r=function(i){return i==null?null:(i=De(i),i.transactions=i.transactions.map(s=>(s=De(s),s.confirmations=-1,s)),_n(i))}:r=function(i){return i==null?null:_n(i)};break;default:throw new Error("unknown method: "+e)}return Gp(r,n.quorum)}function Xn(n,e){return es(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:Sn(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function zp(n,e,t,r){return es(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&ke(r.blockTag)&&(i=yield Xn(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&ke(r.blockTag)&&(i=yield Xn(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&ke(r.blockTag)&&(i=yield Xn(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&ke(r.blockTag)&&(i=yield Xn(n,e)),i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&ke(s.fromBlock)||s.toBlock&&ke(s.toBlock))&&(i=yield Xn(n,e)),i.getLogs(s)}}return $r.throwError("unknown method error",W.errors.UNKNOWN_ERROR,{method:t,params:r})})}class gs extends xs{constructor(e,t){$r.checkNew(new.target,gs),e.length===0&&$r.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(Gr.isProvider(o)){const p=Lo(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:p,priority:1})}const h=De(o);h.priority==null&&(h.priority=1),h.stallTimeout==null&&(h.stallTimeout=Lo(o)?2e3:750),h.weight==null&&(h.weight=1);const b=h.weight;return(b%1||b>512||b<1)&&$r.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,b),Object.freeze(h)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&$r.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=kc(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),ce(this,"providerConfigs",Object.freeze(r)),ce(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return es(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return kc(e)})}perform(e,t){return es(this,void 0,void 0,function*(){if(e==="sendTransaction"){const h=yield Promise.all(this.providerConfigs.map(b=>b.provider.sendTransaction(t.signedTransaction).then(p=>p.hash,p=>p)));for(let b=0;b<h.length;b++){const p=h[b];if(typeof p=="string")return p}throw h[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Kp(this,e,t),i=Kd(this.providerConfigs.map(De));i.sort((h,b)=>h.priority-b.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const h=Oi();let b=i.filter(v=>v.runner&&h-v.start<v.stallTimeout).reduce((v,T)=>v+T.weight,0);for(;b<this.quorum&&o<i.length;){const v=i[o++],T=Up++;v.start=Oi(),v.staller=_c(v.stallTimeout),v.staller.wait(()=>{v.staller=null}),v.runner=zp(v,s,e,t).then(A=>{v.done=!0,v.result=A,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Ii(v,Oi()),request:{method:e,params:St(t)},provider:this})},A=>{v.done=!0,v.error=A,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Ii(v,Oi()),request:{method:e,params:St(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Ii(v,null),request:{method:e,params:St(t)},provider:this}),b+=v.weight}const p=[];i.forEach(v=>{v.done||!v.runner||(p.push(v.runner),v.staller&&p.push(v.staller.getPromise()))}),p.length&&(yield Promise.race(p));const d=i.filter(v=>v.done&&v.error==null);if(d.length>=this.quorum){const v=r(d);if(v!==void 0)return i.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0}),v;a||(yield _c(100).getPromise()),a=!1}const E=i.reduce((v,T)=>{if(!T.done||T.error==null)return v;const A=T.error.code;return Dp.indexOf(A)>=0&&(v[A]||(v[A]={error:T.error,weight:0}),v[A].weight+=T.weight),v},{});if(Object.keys(E).forEach(v=>{const T=E[v];if(T.weight<this.quorum)return;i.forEach(k=>{k.staller&&k.staller.cancel(),k.cancelled=!0});const A=T.error,S={};Hp.forEach(k=>{A[k]!=null&&(S[k]=A[k])}),$r.throwError(A.reason||A.message,v,S)}),i.filter(v=>!v.done).length===0)break}return i.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0}),$r.throwError("failed to meet quorum",W.errors.SERVER_ERROR,{method:e,params:t,results:i.map(h=>Ii(h)),provider:this})})}}const kl=null,Ki=new W(_t),ti="84842078b09946638c03157f83405213";class Sl extends bs{constructor(e,t){const r=new ma(e,t),i=r.connection;i.password&&Ki.throwError("INFURA WebSocket project secrets unsupported",W.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),ce(this,"apiKey",r.projectId),ce(this,"projectId",r.projectId),ce(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ti}}class ma extends Wr{static getWebSocketProvider(e,t){return new Sl(e,t)}static getApiKey(e){const t={apiKey:ti,projectId:ti,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Ki.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ki.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;default:Ki.throwError("unsupported network",W.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===ti&&ps(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===ti}}class jp extends kr{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:r,resolve:null,reject:null},s=new Promise((o,a)=>{i.resolve=o,i.reject=a});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const o=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const a=o.map(h=>h.request);return this.emit("debug",{action:"requestBatch",request:St(a),provider:this}),hs(this.connection,JSON.stringify(a)).then(h=>{this.emit("debug",{action:"response",request:a,response:h,provider:this}),o.forEach((b,p)=>{const d=h[p];if(d.error){const E=new Error(d.error.message);E.code=d.error.code,E.data=d.error.data,b.reject(E)}else b.resolve(d.result)})},h=>{this.emit("debug",{action:"response",error:h,request:a,provider:this}),o.forEach(b=>{b.reject(h)})})},10)),s}}const no=new W(_t),qp="ETHERS_JS_SHARED";class _l extends Wr{static getApiKey(e){return e&&typeof e!="string"&&no.throwArgumentError("invalid apiKey","apiKey",e),e||qp}static getUrl(e,t){no.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:no.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const sn=new W(_t),Mc={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class Ml extends Wr{constructor(e,t){if(t==null){const r=pt(new.target,"getNetwork")(e);if(r){const i=Mc[r.name];i&&(t={applicationId:i,loadBalancer:!0})}t==null&&sn.throwError("unsupported network",W.errors.INVALID_ARGUMENT,{argument:"network",value:e})}super(e,t)}static getApiKey(e){e==null&&sn.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",e);const t={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(sn.assertArgument(typeof e.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",e.applicationId),sn.assertArgument(typeof e.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey,t.loadBalancer=!!e.loadBalancer):e.applicationId?(sn.assertArgument(typeof e.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",e.applicationId),t.applicationId=e.applicationId,t.loadBalancer=!!e.loadBalancer):sn.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:sn.throwError("unsupported network",W.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let i=null;t.loadBalancer?i=`https://${r}/v1/lb/${t.applicationId}`:i=`https://${r}/v1/${t.applicationId}`;const s={url:i};return s.headers={},t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===Mc[this.network.name]}}const io=new W(_t);let Vp=1;function Cc(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:Vp++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:St(s),provider:this}),e(s,(h,b)=>{if(h)return this.emit("debug",{action:"response",fetcher:t,error:h,request:s,provider:this}),a(h);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:b,provider:this}),b.error){const p=new Error(b.error.message);return p.code=b.error.code,p.data=b.error.data,a(p)}o(b.result)})})}}function Wp(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:St(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class ki extends kr{constructor(e,t){io.checkNew(new.target,ki),e==null&&io.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=Wp(e)):e.sendAsync?i=Cc(e,e.sendAsync.bind(e)):e.send?i=Cc(e,e.send.bind(e)):io.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),ce(this,"jsonRpcFetchFunc",i),ce(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Rc=new W(_t);function ga(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1]){case"http":return new kr(n);case"ws":return new bs(n);default:Rc.throwArgumentError("unsupported URL scheme","network",n)}}const t=pa(n);return(!t||!t._defaultProvider)&&Rc.throwError("unsupported getDefaultProvider network",W.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:gs,AlchemyProvider:ba,CloudflareProvider:Tl,EtherscanProvider:ms,InfuraProvider:ma,JsonRpcProvider:kr,NodesmithProvider:_l,PocketProvider:Ml,Web3Provider:ki,IpcProvider:kl},e)}const Cl=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:ba,AlchemyWebSocketProvider:Al,BaseProvider:xs,CloudflareProvider:Tl,EtherscanProvider:ms,FallbackProvider:gs,Formatter:ve,InfuraProvider:ma,InfuraWebSocketProvider:Sl,IpcProvider:kl,JsonRpcBatchProvider:jp,JsonRpcProvider:kr,JsonRpcSigner:Ti,NodesmithProvider:_l,PocketProvider:Ml,Provider:Gr,Resolver:$o,StaticJsonRpcProvider:El,UrlJsonRpcProvider:Wr,Web3Provider:ki,WebSocketProvider:bs,getDefaultProvider:ga,getNetwork:pa,isCommunityResourcable:yl,isCommunityResource:Lo,showThrottleMessage:ps},Symbol.toStringTag,{value:"Module"})),Jp="solidity/5.5.0",Yp=new RegExp("^bytes([0-9]+)$"),Xp=new RegExp("^(u?int)([0-9]*)$"),Zp=new RegExp("^(.*)\\[([0-9]*)\\]$"),Qp="0000000000000000000000000000000000000000000000000000000000000000",Tn=new W(Jp);function Rl(n,e,t){switch(n){case"address":return t?ri(e,32):de(e);case"string":return lt(e);case"bytes":return de(e);case"bool":return e=e?"0x01":"0x00",t?ri(e,32):de(e)}let r=n.match(Xp);if(r){let i=parseInt(r[2]||"256");return(r[2]&&String(i)!==r[2]||i%8!==0||i===0||i>256)&&Tn.throwArgumentError("invalid number type","type",n),t&&(i=256),e=pe.from(e).toTwos(i),ri(e,i/8)}if(r=n.match(Yp),r){const i=parseInt(r[1]);return(String(i)!==r[1]||i===0||i>32)&&Tn.throwArgumentError("invalid bytes type","type",n),de(e).byteLength!==i&&Tn.throwArgumentError(`invalid value for ${n}`,"value",e),t?de((e+Qp).substring(0,66)):e}if(r=n.match(Zp),r&&Array.isArray(e)){const i=r[1];parseInt(r[2]||String(e.length))!=e.length&&Tn.throwArgumentError(`invalid array length for ${n}`,"value",e);const o=[];return e.forEach(function(a){o.push(Rl(i,a,!0))}),He(o)}return Tn.throwArgumentError("invalid type","type",n)}function ya(n,e){n.length!=e.length&&Tn.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const t=[];return n.forEach(function(r,i){t.push(Rl(r,e[i]))}),me(He(t))}function ex(n,e){return Ue(ya(n,e))}function tx(n,e){return Tr(ya(n,e))}const rx="random/5.5.0",Uo=new W(rx);let an=null;try{if(an=window,an==null)throw new Error("try next")}catch{try{if(an=global,an==null)throw new Error("try next")}catch{an={}}}let zi=an.crypto||an.msCrypto;(!zi||!zi.getRandomValues)&&(Uo.warn("WARNING: Missing strong random number source"),zi={getRandomValues:function(n){return Uo.throwError("no secure random source avaialble",W.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function nx(n){(n<=0||n>1024||n%1||n!=n)&&Uo.throwArgumentError("invalid length","length",n);const e=new Uint8Array(n);return zi.getRandomValues(e),de(e)}function ix(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}const sx="units/5.5.0",Nl=new W(sx),Bl=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ox(n){const e=String(n).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||n==="."||n==="-.")&&Nl.throwArgumentError("invalid value","value",n);let t=e[0],r="";for(t.substring(0,1)==="-"&&(r="-",t=t.substring(1));t.substring(0,1)==="0";)t=t.substring(1);t===""&&(t="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;t.length;)if(t.length<=3){s.unshift(t);break}else{const o=t.length-3;s.unshift(t.substring(o)),t=t.substring(0,o)}return r+s.join(",")+i}function Pl(n,e){if(typeof e=="string"){const t=Bl.indexOf(e);t!==-1&&(e=3*t)}return $i(n,e??18)}function Ol(n,e){if(typeof n!="string"&&Nl.throwArgumentError("value must be a string","value",n),typeof e=="string"){const t=Bl.indexOf(e);t!==-1&&(e=3*t)}return Xt(n,e??18)}function ax(n){return Pl(n,18)}function cx(n){return Ol(n,18)}const lx="web/5.5.0";var fx=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};function ux(n,e){return fx(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client");const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:de(new Uint8Array(i))}})}var hx=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(p){try{b(r.next(p))}catch(d){o(d)}}function h(p){try{b(r.throw(p))}catch(d){o(d)}}function b(p){p.done?s(p.value):i(p.value).then(a,h)}b((r=r.apply(n,e||[])).next())})};const Zt=new W(lx);function Nc(n){return new Promise(e=>{setTimeout(e,n)})}function on(n,e){if(n==null)return null;if(typeof n=="string")return n;if(Un(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return pr(n)}catch{}return me(n)}return n}function Il(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Zt.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Zt.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o={};let a=null;const h={method:"GET"};let b=!1,p=2*60*1e3;if(typeof n=="string")a=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Zt.throwArgumentError("missing URL","connection.url",n),a=n.url,typeof n.timeout=="number"&&n.timeout>0&&(p=n.timeout),n.headers)for(const T in n.headers)o[T.toLowerCase()]={key:T,value:String(n.headers[T])},["if-none-match","if-modified-since"].indexOf(T.toLowerCase())>=0&&(b=!0);if(h.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){a.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Zt.throwError("basic authentication requires a secure https url",W.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:n.user,password:"[REDACTED]"});const T=n.user+":"+n.password;o.authorization={key:"Authorization",value:"Basic "+xa(lt(T))}}}e&&(h.method="POST",h.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const d={};Object.keys(o).forEach(T=>{const A=o[T];d[A.key]=A.value}),h.headers=d;const E=function(){let T=null;return{promise:new Promise(function(k,L){p&&(T=setTimeout(()=>{T!=null&&(T=null,L(Zt.makeError("timeout",W.errors.TIMEOUT,{requestBody:on(h.body,d["content-type"]),requestMethod:h.method,timeout:p,url:a})))},p))}),cancel:function(){T!=null&&(clearTimeout(T),T=null)}}}(),v=function(){return hx(this,void 0,void 0,function*(){for(let T=0;T<r;T++){let A=null;try{if(A=yield ux(a,h),A.statusCode===429&&T<r){let k=!0;if(i&&(k=yield i(T,a)),k){let L=0;const K=A.headers["retry-after"];typeof K=="string"&&K.match(/^[1-9][0-9]*$/)?L=parseInt(K)*1e3:L=s*parseInt(String(Math.random()*Math.pow(2,T))),yield Nc(L);continue}}}catch(k){A=k.response,A==null&&(E.cancel(),Zt.throwError("missing response",W.errors.SERVER_ERROR,{requestBody:on(h.body,d["content-type"]),requestMethod:h.method,serverError:k,url:a}))}let S=A.body;if(b&&A.statusCode===304?S=null:(A.statusCode<200||A.statusCode>=300)&&(E.cancel(),Zt.throwError("bad response",W.errors.SERVER_ERROR,{status:A.statusCode,headers:A.headers,body:on(S,A.headers?A.headers["content-type"]:null),requestBody:on(h.body,d["content-type"]),requestMethod:h.method,url:a})),t)try{const k=yield t(S,A);return E.cancel(),k}catch(k){if(k.throttleRetry&&T<r){let L=!0;if(i&&(L=yield i(T,a)),L){const K=s*parseInt(String(Math.random()*Math.pow(2,T)));yield Nc(K);continue}}E.cancel(),Zt.throwError("processing response error",W.errors.SERVER_ERROR,{body:on(S,A.headers?A.headers["content-type"]:null),error:k,requestBody:on(h.body,d["content-type"]),requestMethod:h.method,url:a})}return E.cancel(),S}return Zt.throwError("failed response",W.errors.SERVER_ERROR,{requestBody:on(h.body,d["content-type"]),requestMethod:h.method,url:a})})}();return Promise.race([E.promise,v])}function dx(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(pr(s))}catch(h){Zt.throwError("invalid JSON",W.errors.SERVER_ERROR,{body:s,error:h})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=lt(e);const s=typeof n=="string"?{url:n}:De(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=De(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return Il(n,i,r)}function px(n,e){return e||(e={}),e=De(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let h=0;function b(){return n().then(function(p){if(p!==void 0)o()&&t(p);else if(e.oncePoll)e.oncePoll.once("poll",b);else if(e.onceBlock)e.onceBlock.once("block",b);else if(!s){if(h++,h>a){o()&&r(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,h)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(b,d)}return null},function(p){o()&&r(p)})}b()})}const Ll=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:ss,ConstructorFragment:Vt,ErrorFragment:yr,EventFragment:rr,FormatTypes:Oe,Fragment:ir,FunctionFragment:Wt,HDNode:Rt,Indexed:Vi,Interface:xi,LogDescription:S0,Logger:W,ParamType:dt,RLP:Sf,SigningKey:cn,get SupportedAlgorithm(){return $n},TransactionDescription:_0,get TransactionTypes(){return Co},get UnicodeNormalizationForm(){return fr},Utf8ErrorFuncs:g0,get Utf8ErrorReason(){return Nt},_TypedDataEncoder:mt,_fetchData:Il,_toEscapedUtf8String:Jf,accessListify:Vr,arrayify:de,base58:Ai,base64:hp,checkProperties:qo,checkResultErrors:i0,commify:ox,computeAddress:Dr,computeHmac:gi,computePublicKey:sa,concat:He,deepCopy:St,defaultAbiCoder:w0,defaultPath:Fn,defineReadOnly:ce,entropyToMnemonic:us,fetchJson:dx,formatBytes32String:Yf,formatEther:ax,formatUnits:Pl,getAccountPath:Dd,getAddress:$e,getContractAddress:is,getCreate2Address:Bf,getIcapAddress:Nf,getJsonWalletAddress:Wd,getStatic:pt,hashMessage:ta,hexConcat:Dt,hexDataLength:Hr,hexDataSlice:Bt,hexStripZeros:Jc,hexValue:yi,hexZeroPad:Ge,hexlify:me,id:Ur,isAddress:Rf,isBytes:jr,isBytesLike:Un,isHexString:ke,isValidMnemonic:Ud,isValidName:pu,joinSignature:wo,keccak256:Ue,mnemonicToEntropy:fs,mnemonicToSeed:fl,namehash:pi,nameprep:ea,parseBytes32String:Xf,parseEther:cx,parseTransaction:tl,parseUnits:Ol,poll:px,randomBytes:nx,recoverAddress:Ei,recoverPublicKey:Y0,resolveProperties:ct,ripemd160:al,serializeTransaction:Ro,sha256:Tr,sha512:Rd,shallowCopy:De,shuffled:ix,solidityKeccak256:ex,solidityPack:ya,soliditySha256:tx,splitSignature:dn,stripZeros:or,toUtf8Bytes:lt,toUtf8CodePoints:To,toUtf8String:pr,verifyMessage:cp,verifyTypedData:lp,zeroPad:ri},Symbol.toStringTag,{value:"Module"})),wa="ethers/5.5.1",$l=new W(wa),Fl=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:aa,BigNumber:pe,Contract:mi,ContractFactory:sl,FixedNumber:ht,Signer:_r,VoidSigner:Pn,Wallet:gr,Wordlist:bn,constants:x0,get errors(){return ci},getDefaultProvider:ga,logger:$l,providers:Cl,utils:Ll,version:wa,wordlists:Xi},Symbol.toStringTag,{value:"Module"}));try{const n=window;n._ethers==null&&(n._ethers=Fl)}catch{}const xx=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:aa,BigNumber:pe,Contract:mi,ContractFactory:sl,FixedNumber:ht,Signer:_r,VoidSigner:Pn,Wallet:gr,Wordlist:bn,constants:x0,get errors(){return ci},ethers:Fl,getDefaultProvider:ga,logger:$l,providers:Cl,utils:Ll,version:wa,wordlists:Xi},Symbol.toStringTag,{value:"Module"}));var Ul={},Dl={},Hl={},ys={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.BrowserRandomSource=void 0;const Bc=65536;class bx{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=Bc)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,Bc)));return t}}ws.BrowserRandomSource=bx;function mx(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vs={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});function gx(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Es.wipe=gx;Object.defineProperty(vs,"__esModule",{value:!0});vs.NodeRandomSource=void 0;const yx=Es;class wx{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof mx<"u"){const e=Vc;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let i=0;i<r.length;i++)r[i]=t[i];return(0,yx.wipe)(t),r}}vs.NodeRandomSource=wx;Object.defineProperty(ys,"__esModule",{value:!0});ys.SystemRandomSource=void 0;const vx=ws,Ex=vs;class Ax{constructor(){if(this.isAvailable=!1,this.name="",this._source=new vx.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ex.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ys.SystemRandomSource=Ax;var Ce={},Gl={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(a,h){var b=a>>>16&65535,p=a&65535,d=h>>>16&65535,E=h&65535;return p*E+(b*E+p*d<<16>>>0)|0}n.mul=Math.imul||e;function t(a,h){return a+h|0}n.add=t;function r(a,h){return a-h|0}n.sub=r;function i(a,h){return a<<h|a>>>32-h}n.rotl=i;function s(a,h){return a<<32-h|a>>>h}n.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}n.isInteger=Number.isInteger||o,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(a){return n.isInteger(a)&&a>=-n.MAX_SAFE_INTEGER&&a<=n.MAX_SAFE_INTEGER}})(Gl);Object.defineProperty(Ce,"__esModule",{value:!0});var Kl=Gl;function Tx(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ce.readInt16BE=Tx;function kx(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ce.readUint16BE=kx;function Sx(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ce.readInt16LE=Sx;function _x(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ce.readUint16LE=_x;function zl(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Ce.writeUint16BE=zl;Ce.writeInt16BE=zl;function jl(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Ce.writeUint16LE=jl;Ce.writeInt16LE=jl;function Do(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ce.readInt32BE=Do;function Ho(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ce.readUint32BE=Ho;function Go(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ce.readInt32LE=Go;function Ko(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ce.readUint32LE=Ko;function ts(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Ce.writeUint32BE=ts;Ce.writeInt32BE=ts;function rs(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Ce.writeUint32LE=rs;Ce.writeInt32LE=rs;function Mx(n,e){e===void 0&&(e=0);var t=Do(n,e),r=Do(n,e+4);return t*4294967296+r-(r>>31)*4294967296}Ce.readInt64BE=Mx;function Cx(n,e){e===void 0&&(e=0);var t=Ho(n,e),r=Ho(n,e+4);return t*4294967296+r}Ce.readUint64BE=Cx;function Rx(n,e){e===void 0&&(e=0);var t=Go(n,e),r=Go(n,e+4);return r*4294967296+t-(t>>31)*4294967296}Ce.readInt64LE=Rx;function Nx(n,e){e===void 0&&(e=0);var t=Ko(n,e),r=Ko(n,e+4);return r*4294967296+t}Ce.readUint64LE=Nx;function ql(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),ts(n/4294967296>>>0,e,t),ts(n>>>0,e,t+4),e}Ce.writeUint64BE=ql;Ce.writeInt64BE=ql;function Vl(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),rs(n>>>0,e,t),rs(n/4294967296>>>0,e,t+4),e}Ce.writeUint64LE=Vl;Ce.writeInt64LE=Vl;function Bx(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,i=1,s=n/8+t-1;s>=t;s--)r+=e[s]*i,i*=256;return r}Ce.readUintBE=Bx;function Px(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,i=1,s=t;s<t+n/8;s++)r+=e[s]*i,i*=256;return r}Ce.readUintLE=Px;function Ox(n,e,t,r){if(t===void 0&&(t=new Uint8Array(n/8)),r===void 0&&(r=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Kl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=n/8+r-1;s>=r;s--)t[s]=e/i&255,i*=256;return t}Ce.writeUintBE=Ox;function Ix(n,e,t,r){if(t===void 0&&(t=new Uint8Array(n/8)),r===void 0&&(r=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Kl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=r;s<r+n/8;s++)t[s]=e/i&255,i*=256;return t}Ce.writeUintLE=Ix;function Lx(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Ce.readFloat32BE=Lx;function $x(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Ce.readFloat32LE=$x;function Fx(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Ce.readFloat64BE=Fx;function Ux(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Ce.readFloat64LE=Ux;function Dx(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(t,n),e}Ce.writeFloat32BE=Dx;function Hx(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(t,n,!0),e}Ce.writeFloat32LE=Hx;function Gx(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(t,n),e}Ce.writeFloat64BE=Gx;function Kx(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(t,n,!0),e}Ce.writeFloat64LE=Kx;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=ys,t=Ce,r=Es;n.defaultRandomSource=new e.SystemRandomSource;function i(b,p=n.defaultRandomSource){return p.randomBytes(b)}n.randomBytes=i;function s(b=n.defaultRandomSource){const p=i(4,b),d=(0,t.readUint32LE)(p);return(0,r.wipe)(p),d}n.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(b,p=o,d=n.defaultRandomSource){if(p.length<2)throw new Error("randomString charset is too short");if(p.length>256)throw new Error("randomString charset is too long");let E="";const v=p.length,T=256-256%v;for(;b>0;){const A=i(Math.ceil(b*256/T),d);for(let S=0;S<A.length&&b>0;S++){const k=A[S];k<T&&(E+=p.charAt(k%v),b--)}(0,r.wipe)(A)}return E}n.randomString=a;function h(b,p=o,d=n.defaultRandomSource){const E=Math.ceil(b/(Math.log(p.length)/Math.LN2));return a(E,p,d)}n.randomStringForEntropy=h})(Hl);const zx=qc(xx);var Wl={},As={},br={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604},ft={},Ts={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"},Zn={},bt={},Pc;function jx(){if(Pc)return bt;Pc=1;const n=Lt,e=4294967292,t=4294967293,r=4294967294,i=4294967295,s=[0,1,3,7,15,31,63,127,255,511,1023],o=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),h=[];a.forEach(d=>{h.push(d.charCodeAt(0))}),bt.utf8={encode(d){const E=[];return d.forEach(v=>{if(v>=0&&v<=127)E.push(v);else if(v<=2047)E.push(192+(v>>6&s[5])),E.push(128+(v&s[6]));else if(v<55296||v>57343&&v<=65535)E.push(224+(v>>12&s[4])),E.push(128+(v>>6&s[6])),E.push(128+(v&s[6]));else if(v>=65536&&v<=1114111){const T=v>>16&s[5];E.push(240+(T>>2)),E.push(128+((T&s[2])<<4)+(v>>12&s[4])),E.push(128+(v>>6&s[6])),E.push(128+(v&s[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${v}`)}),Buffer.from(E)},decode(d,E){function v(ne,J){if((J&192)!==128)return t;const M=((ne&s[5])<<6)+(J&s[6]);return M<128?e:M}function T(ne,J,M){if((M&192)!==128||(J&192)!==128)return t;const l=((ne&s[4])<<12)+((J&s[6])<<6)+(M&s[6]);return l<2048?e:l>=55296&&l<=57343?r:l}function A(ne,J,M,l){if((l&192)!==128||(M&192)!==128||(J&192)!==128)return t;const u=(((ne&s[3])<<2)+(J>>4&s[2])<<16)+((J&s[4])<<12)+((M&s[6])<<6)+(l&s[6]);return u<65536?e:u>1114111?r:u}let S,k,L,K,z,q;const U=d.length;let Z=E?3:0;const se=[];for(;Z<U;){k=d[Z],S=i;const ne=!0;for(;ne;){if(k>=0&&k<=127){S=k,q=1;break}if(L=Z+1,L<U&&k>=194&&k<=223){S=v(k,d[L]),q=2;break}if(K=Z+2,K<U&&k>=224&&k<=239){S=T(k,d[L],d[K]),q=3;break}if(z=Z+3,z<U&&k>=240&&k<=244){S=A(k,d[L],d[K],d[z]),q=4;break}break}if(S>1114111){const J=`byte[${Z}]`;throw S===i?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${J}`):S===t?new RangeError(`utf8.decode: illegal trailing byte found at: ${J}`):S===r?new RangeError(`utf8.decode: code point out of range found at: ${J}`):S===e?new RangeError(`utf8.decode: non-shortest form found at: ${J}`):new RangeError(`utf8.decode: unrecognized error found at: ${J}`)}se.push(S),Z+=q}return se}},bt.utf16be={encode(d){const E=[];let v,T,A;for(let S=0;S<d.length;S+=1)if(v=d[S],v>=0&&v<=55295||v>=57344&&v<=65535)E.push(v>>8&s[8]),E.push(v&s[8]);else if(v>=65536&&v<=1114111)A=v-65536,T=55296+(A>>10),A=56320+(A&s[10]),E.push(T>>8&s[8]),E.push(T&s[8]),E.push(A>>8&s[8]),E.push(A&s[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${S}]: ${v}`);return Buffer.from(E)},decode(d,E){if(d.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${d.length}`);const v=[],T=d.length;let A=E?2:0,S=0,k,L,K,z,q,U;for(;A<T;){for(;;){if(K=A+1,K<T){if(q=(d[A]<<8)+d[K],q<55296||q>57343){k=q,L=2;break}if(z=A+3,z<T&&(U=(d[A+2]<<8)+d[z],q<=56319&&U>=56320&&U<=57343)){k=65536+(q-55296<<10)+(U-56320),L=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${A}]`)}v[S++]=k,A+=L}return v}},bt.utf16le={encode(d){const E=[];let v,T,A;for(let S=0;S<d.length;S+=1)if(v=d[S],v>=0&&v<=55295||v>=57344&&v<=65535)E.push(v&s[8]),E.push(v>>8&s[8]);else if(v>=65536&&v<=1114111)A=v-65536,T=55296+(A>>10),A=56320+(A&s[10]),E.push(T&s[8]),E.push(T>>8&s[8]),E.push(A&s[8]),E.push(A>>8&s[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${S}]: ${v}`);return Buffer.from(E)},decode(d,E){if(d.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${d.length}`);const v=[],T=d.length;let A=E?2:0,S=0,k,L,K,z,q,U;for(;A<T;){for(;;){if(K=A+1,K<T){if(q=(d[K]<<8)+d[A],q<55296||q>57343){k=q,L=2;break}if(z=A+3,z<T&&(U=(d[z]<<8)+d[A+2],q<=56319&&U>=56320&&U<=57343)){k=65536+(q-55296<<10)+(U-56320),L=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${A}]`)}v[S++]=k,A+=L}return v}},bt.utf32be={encode(d){const E=Buffer.alloc(d.length*4);let v=0;return d.forEach(T=>{if(T>=55296&&T<=57343||T>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${v/4}]: ${T}`);E[v++]=T>>24&s[8],E[v++]=T>>16&s[8],E[v++]=T>>8&s[8],E[v++]=T&s[8]}),E},decode(d,E){if(d.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${d.length}`);const v=[];let T=E?4:0;for(;T<d.length;T+=4){const A=(d[T]<<24)+(d[T+1]<<16)+(d[T+2]<<8)+d[T+3];if(A>=55296&&A<=57343||A>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${T/4}]: ${A}`);v.push(A)}return v}},bt.utf32le={encode(d){const E=Buffer.alloc(d.length*4);let v=0;return d.forEach(T=>{if(T>=55296&&T<=57343||T>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${v/4}]: ${T}`);E[v++]=T&s[8],E[v++]=T>>8&s[8],E[v++]=T>>16&s[8],E[v++]=T>>24&s[8]}),E},decode(d,E){if(d.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${d.length}`);const v=[];let T=E?4:0;for(;T<d.length;T+=4){const A=(d[T+3]<<24)+(d[T+2]<<16)+(d[T+1]<<8)+d[T];if(A>=55296&&A<=57343||A>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${T/4}]: ${A}`);v.push(A)}return v}},bt.uint7={encode(d){const E=Buffer.alloc(d.length);for(let v=0;v<d.length;v+=1){if(d[v]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${v}]: ${d[v]}`);E[v]=d[v]}return E},decode(d){const E=[];for(let v=0;v<d.length;v+=1){if(d[v]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${v}]: ${d[v]}`);E[v]=d[v]}return E}},bt.uint8={encode(d){const E=Buffer.alloc(d.length);for(let v=0;v<d.length;v+=1){if(d[v]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${v}]: ${d[v]}`);E[v]=d[v]}return E},decode(d){const E=[];for(let v=0;v<d.length;v+=1)E[v]=d[v];return E}},bt.uint16be={encode(d){const E=Buffer.alloc(d.length*2);let v=0;return d.forEach(T=>{if(T>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${v/2}]: ${T}`);E[v++]=T>>8&s[8],E[v++]=T&s[8]}),E},decode(d){if(d.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${d.length}`);const E=[];for(let v=0;v<d.length;v+=2)E.push((d[v]<<8)+d[v+1]);return E}},bt.uint16le={encode(d){const E=Buffer.alloc(d.length*2);let v=0;return d.forEach(T=>{if(T>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${v/2}]: ${T}`);E[v++]=T&s[8],E[v++]=T>>8&s[8]}),E},decode(d){if(d.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${d.length}`);const E=[];for(let v=0;v<d.length;v+=2)E.push((d[v+1]<<8)+d[v]);return E}},bt.uint32be={encode(d){const E=Buffer.alloc(d.length*4);let v=0;return d.forEach(T=>{E[v++]=T>>24&s[8],E[v++]=T>>16&s[8],E[v++]=T>>8&s[8],E[v++]=T&s[8]}),E},decode(d){if(d.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${d.length}`);const E=[];for(let v=0;v<d.length;v+=4)E.push((d[v]<<24)+(d[v+1]<<16)+(d[v+2]<<8)+d[v+3]);return E}},bt.uint32le={encode(d){const E=Buffer.alloc(d.length*4);let v=0;return d.forEach(T=>{E[v++]=T&s[8],E[v++]=T>>8&s[8],E[v++]=T>>16&s[8],E[v++]=T>>24&s[8]}),E},decode(d){if(d.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${d.length}`);const E=[];for(let v=0;v<d.length;v+=4)E.push((d[v+3]<<24)+(d[v+2]<<16)+(d[v+1]<<8)+d[v]);return E}},bt.string={encode(d){return n.utf16le.encode(d).toString("utf16le")},decode(d){return n.utf16le.decode(Buffer.from(d,"utf16le"),0)}},bt.escaped={encode(d){const E=[];for(let v=0;v<d.length;v+=1){const T=d[v];if(T===96)E.push(T),E.push(T);else if(T===10)E.push(T);else if(T>=32&&T<=126)E.push(T);else{let A="";if(T>=0&&T<=31)A+=`\`x${o[T]}`;else if(T>=127&&T<=255)A+=`\`x${o[T]}`;else if(T>=256&&T<=65535)A+=`\`u${o[T>>8&s[8]]}${o[T&s[8]]}`;else if(T>=65536&&T<=4294967295){A+="`u{";const k=T>>24&s[8];k>0&&(A+=o[k]),A+=`${o[T>>16&s[8]]+o[T>>8&s[8]]+o[T&s[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer.from(A).forEach(k=>{E.push(k)})}}return Buffer.from(E)},decode(d){function E(U){return U>=48&&U<=57||U>=65&&U<=70||U>=97&&U<=102}function v(U,Z,se){const ne={char:null,nexti:U+2,error:!0};if(U+1<Z&&E(se[U])&&E(se[U+1])){const J=String.fromCodePoint(se[U],se[U+1]);ne.char=parseInt(J,16),Number.isNaN(ne.char)||(ne.error=!1)}return ne}function T(U,Z,se){const ne={char:null,nexti:U+4,error:!0};if(U+3<Z&&E(se[U])&&E(se[U+1])&&E(se[U+2])&&E(se[U+3])){const J=String.fromCodePoint(se[U],se[U+1],se[U+2],se[U+3]);ne.char=parseInt(J,16),Number.isNaN(ne.char)||(ne.error=!1)}return ne}function A(U,Z,se){const ne={char:null,nexti:U+4,error:!0};let J="";for(;U<Z&&E(se[U]);)J+=String.fromCodePoint(se[U]),U+=1;return ne.char=parseInt(J,16),se[U]===125&&!Number.isNaN(ne.char)&&(ne.error=!1),ne.nexti=U+1,ne}const S=[],k=d.length;let L,K,z,q=0;for(;q<k;){for(;;){if(z=!0,d[q]!==96){S.push(d[q]),q+=1,z=!1;break}if(L=q+1,L>=k)break;if(d[L]===96){S.push(96),q+=2,z=!1;break}if(d[L]===120){if(K=v(L+1,k,d),K.error)break;S.push(K.char),q=K.nexti,z=!1;break}if(d[L]===117){if(d[L+1]===123){if(K=A(L+2,k,d),K.error)break;S.push(K.char),q=K.nexti,z=!1;break}if(K=T(L+1,k,d),K.error)break;S.push(K.char),q=K.nexti,z=!1;break}break}if(z)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${q}]`)}return S}};const b=13,p=10;return bt.lineEnds={crlf(d){const E=[];let v=0;for(;v<d.length;)switch(d[v]){case b:v+1<d.length&&d[v+1]===p?v+=2:v+=1,E.push(b),E.push(p);break;case p:E.push(b),E.push(p),v+=1;break;default:E.push(d[v]),v+=1;break}return E.length>0&&E[E.length-1]!==p&&(E.push(b),E.push(p)),E},lf(d){const E=[];let v=0;for(;v<d.length;)switch(d[v]){case b:v+1<d.length&&d[v+1]===p?v+=2:v+=1,E.push(p);break;case p:E.push(p),v+=1;break;default:E.push(d[v]),v+=1;break}return E.length>0&&E[E.length-1]!==p&&E.push(p),E}},bt.base64={encode(d){if(d.length===0)return Buffer.alloc(0);let E,v,T,A=d.length%3;A=A>0?3-A:0;let S=(d.length+A)/3;const k=Buffer.alloc(S*4);A>0&&(S-=1),E=0,v=0;for(let L=0;L<S;L+=1)T=d[E++]<<16,T+=d[E++]<<8,T+=d[E++],k[v++]=h[T>>18&s[6]],k[v++]=h[T>>12&s[6]],k[v++]=h[T>>6&s[6]],k[v++]=h[T&s[6]];if(A===0)return k;if(A===1)return T=d[E++]<<16,T+=d[E]<<8,k[v++]=h[T>>18&s[6]],k[v++]=h[T>>12&s[6]],k[v++]=h[T>>6&s[6]],k[v]=h[64],k;if(A===2)return T=d[E]<<16,k[v++]=h[T>>18&s[6]],k[v++]=h[T>>12&s[6]],k[v++]=h[64],k[v]=h[64],k},decode(d){function E(q){const U=[];let Z=0;for(let se=0;se<q.length;se+=1){const ne=q[se],J=!0;for(;J&&!(ne===32||ne===9||ne===10||ne===13);){if(ne>=65&&ne<=90){U.push(ne-65);break}if(ne>=97&&ne<=122){U.push(ne-71);break}if(ne>=48&&ne<=57){U.push(ne+4);break}if(ne===43){U.push(62);break}if(ne===47){U.push(63);break}if(ne===61){U.push(64),Z+=1;break}throw new RangeError(`base64.decode: invalid character buf[${se}]: ${ne}`)}}if(U.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${U.length}`);switch(Z){case 0:break;case 1:if(U[U.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(U[U.length-1]!==64||U[U.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${Z}`)}return{tail:Z,buf:Buffer.from(U)}}if(d.length===0)return Buffer.alloc(0);const v=E(d),{tail:T}=v,A=v.buf;let S,k,L,K=A.length/4;const z=Buffer.alloc(K*3-T);T>0&&(K-=1),k=0,S=0;for(let q=0;q<K;q+=1)L=A[S++]<<18,L+=A[S++]<<12,L+=A[S++]<<6,L+=A[S++],z[k++]=L>>16&s[8],z[k++]=L>>8&s[8],z[k++]=L&s[8];return T===1&&(L=A[S++]<<18,L+=A[S++]<<12,L+=A[S]<<6,z[k++]=L>>16&s[8],z[k]=L>>8&s[8]),T===2&&(L=A[S++]<<18,L+=A[S++]<<12,z[k]=L>>16&s[8]),z},toString(d){if(d.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${d.length}`);let E="",v=0;function T(S,k,L,K){switch(v){case 76:E+=`\r
${S}${k}${L}${K}`,v=4;break;case 75:E+=`${S}\r
${k}${L}${K}`,v=3;break;case 74:E+=`${S+k}\r
${L}${K}`,v=2;break;case 73:E+=`${S+k+L}\r
${K}`,v=1;break;default:E+=S+k+L+K,v+=4;break}}function A(S){return S>=65&&S<=90||S>=97&&S<=122||S>=48&&S<=57||S===43||S===47||S===61}for(let S=0;S<d.length;S+=4){for(let k=S;k<S+4;k+=1)if(!A(d[k]))throw new RangeError(`base64.toString: buf[${k}]: ${d[k]} : not valid base64 character code`);T(String.fromCharCode(d[S]),String.fromCharCode(d[S+1]),String.fromCharCode(d[S+2]),String.fromCharCode(d[S+3]))}return E}},bt}var Oc;function Jl(){if(Oc)return Zn;Oc=1;const n=Lt,e=jx(),t="UTF8",r="UTF16",i="UTF16BE",s="UTF16LE",o="UTF32",a="UTF32BE",h="UTF32LE",b="UINT7",p="ASCII",d="BINARY",E="UINT8",v="UINT16",T="UINT16LE",A="UINT16BE",S="UINT32",k="UINT32LE",L="UINT32BE",K="ESCAPED",z="STRING",q=function(u){u.type=t;const y=u.data;u.bom=0,y.length>=3&&y[0]===239&&y[1]===187&&y[2]===191&&(u.bom=3)},U=function(u){const y=u.data;switch(u.bom=0,u.type){case r:u.type=i,y.length>=2&&(y[0]===254&&y[1]===255?u.bom=2:y[0]===255&&y[1]===254&&(u.type=s,u.bom=2));break;case i:if(u.type=i,y.length>=2){if(y[0]===254&&y[1]===255)u.bom=2;else if(y[0]===255&&y[1]===254)throw new TypeError(`src type: "${i}" specified but BOM is for "${s}"`)}break;case s:if(u.type=s,y.length>=0){if(y[0]===254&&y[1]===255)throw new TypeError(`src type: "${s}" specified but BOM is for "${i}"`);y[0]===255&&y[1]===254&&(u.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${u.type}" unrecognized`)}},Z=function(u){const y=u.data;switch(u.bom=0,u.type){case o:u.type=a,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(u.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(u.type=h,u.bom=4));break;case a:if(u.type=a,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(u.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0))throw new TypeError(`src type: ${a} specified but BOM is for ${h}"`);break;case h:if(u.type=h,y.length>=4){if(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255)throw new TypeError(`src type: "${h}" specified but BOM is for "${a}"`);y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(u.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${u.type}" unrecognized`)}},se=function(u,y){function C(D){const V={type:"",base64:!1},x=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(D);return x&&(x[2]&&(V.type=x[2].toUpperCase()),x[1]&&(V.base64=!0)),V}if(typeof u!="string"||u==="")throw new TypeError(`type: "${u}" not recognized`);const R=C(u.toUpperCase());if(R.base64){if(R.type===z)throw new TypeError(`type: "${u} "BASE64:" prefix not allowed with type ${z}`);if(Buffer.isBuffer(y))R.data=e.base64.decode(y);else if(typeof y=="string"){const D=Buffer.from(y,"ascii");R.data=e.base64.decode(D)}else throw new TypeError(`type: "${u} unrecognized data type: typeof(data): ${typeof y}`)}else R.data=y;switch(R.type){case t:q(R);break;case r:case i:case s:U(R);break;case o:case a:case h:Z(R);break;case v:R.type=A;break;case S:R.type=L;break;case p:R.type=b;break;case d:R.type=E;break;case b:case E:case T:case A:case k:case L:case z:case K:break;default:throw new TypeError(`type: "${u}" not recognized`)}if(R.type===z){if(typeof R.data!="string")throw new TypeError(`type: "${u}" but data is not a string`)}else if(!Buffer.isBuffer(R.data))throw new TypeError(`type: "${u}" but data is not a Buffer`);return R},ne=function(u,y){function C(D){let V,O;const x={crlf:!1,lf:!1,base64:!1,type:""},w=!0;for(;w;){if(O=D,V=D.slice(0,5),V==="CRLF:"){x.crlf=!0,O=D.slice(5);break}if(V=D.slice(0,3),V==="LF:"){x.lf=!0,O=D.slice(3);break}break}return V=O.split(":"),V.length===1?x.type=V[0]:V.length===2&&V[1]==="BASE64"&&(x.base64=!0,x.type=V[0]),x}if(!Array.isArray(y))throw new TypeError(`dst chars: not array: "${typeof y}`);if(typeof u!="string")throw new TypeError(`dst type: not string: "${typeof u}`);const R=C(u.toUpperCase());switch(R.type){case t:case i:case s:case a:case h:case b:case E:case T:case A:case k:case L:case K:break;case z:if(R.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${z}`);break;case p:R.type=b;break;case d:R.type=E;break;case r:R.type=i;break;case o:R.type=a;break;case v:R.type=A;break;case S:R.type=L;break;default:throw new TypeError(`dst type unrecognized: "${u}" : must have form [crlf:|lf:]type[:base64]`)}return R},J=function(u,y){switch(u){case t:return e.utf8.encode(y);case i:return e.utf16be.encode(y);case s:return e.utf16le.encode(y);case a:return e.utf32be.encode(y);case h:return e.utf32le.encode(y);case b:return e.uint7.encode(y);case E:return e.uint8.encode(y);case A:return e.uint16be.encode(y);case T:return e.uint16le.encode(y);case L:return e.uint32be.encode(y);case k:return e.uint32le.encode(y);case z:return e.string.encode(y);case K:return e.escaped.encode(y);default:throw new TypeError(`encode type "${u}" not recognized`)}},M=function(u){switch(u.type){case t:return e.utf8.decode(u.data,u.bom);case s:return e.utf16le.decode(u.data,u.bom);case i:return e.utf16be.decode(u.data,u.bom);case a:return e.utf32be.decode(u.data,u.bom);case h:return e.utf32le.decode(u.data,u.bom);case b:return e.uint7.decode(u.data);case E:return e.uint8.decode(u.data);case A:return e.uint16be.decode(u.data);case T:return e.uint16le.decode(u.data);case L:return e.uint32be.decode(u.data);case k:return e.uint32le.decode(u.data);case z:return e.string.decode(u.data);case K:return e.escaped.decode(u.data);default:throw new TypeError(`decode type "${u.type}" not recognized`)}};return Zn.decode=function(u,y){const C=se(u,y);return M(C)},Zn.encode=function(u,y){let C,R;const D=ne(u,y);return D.crlf?(C=e.lineEnds.crlf(y),R=J(D.type,C)):D.lf?(C=e.lineEnds.lf(y),R=J(D.type,C)):R=J(D.type,y),D.base64&&(R=e.base64.encode(R)),R},Zn.convert=function(u,y,C){return n.encode(C,n.decode(u,y))},Zn}var Yl=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`};const Ct=Ts,va=Jl(),qx=Yl,ot=br,Jr="utilities.js: ",vr=Lt,mn=function(n,e,t){let r,i=e;const s=!0;for(;s;){if(n<=0){i=0,r=0;break}if(typeof i!="number"){i=0,r=n;break}if(i>=n){i=n,r=n;break}if(typeof t!="number"){r=n;break}if(r=i+t,r>n){r=n;break}break}return{beg:i,end:r}};ft.htmlToPage=function(n,e){let t;if(typeof n!="string")throw new Error(`${Jr}htmlToPage: input HTML is not a string`);typeof e!="string"?t="htmlToPage":t=e;let r="";return r+=`<!DOCTYPE html>
`,r+=`<html lang="en">
`,r+=`<head>
`,r+=`<meta charset="utf-8">
`,r+=`<title>${t}</title>
`,r+=`<style>
`,r+=qx(),r+=`</style>
`,r+=`</head>
<body>
`,r+=`<p>${new Date}</p>
`,r+=n,r+=`</body>
</html>
`,r};ft.parserResultToHtml=function(n,e){let t=null;typeof e=="string"&&e!==""&&(t=e);let r,i;n.success===!0?r=`<span class="${Ct.CLASS_MATCH}">true</span>`:r=`<span class="${Ct.CLASS_NOMATCH}">false</span>`,n.state===ot.EMPTY?i=`<span class="${Ct.CLASS_EMPTY}">EMPTY</span>`:n.state===ot.MATCH?i=`<span class="${Ct.CLASS_MATCH}">MATCH</span>`:n.state===ot.NOMATCH?i=`<span class="${Ct.CLASS_NOMATCH}">NOMATCH</span>`:i=`<span class="${Ct.CLASS_NOMATCH}">unrecognized</span>`;let s="";return s+=`<table class="${Ct.CLASS_STATE}">
`,t&&(s+=`<caption>${t}</caption>
`),s+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,s+=`<tr><td>parser success</td><td>${r}</td>
`,s+=`<td><span class="${Ct.CLASS_MATCH}">true</span> if the parse succeeded,
`,s+=` <span class="${Ct.CLASS_NOMATCH}">false</span> otherwise`,s+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,s+=`<tr><td>parser state</td><td>${i}</td>
`,s+=`<td><span class="${Ct.CLASS_EMPTY}">EMPTY</span>, `,s+=`<span class="${Ct.CLASS_MATCH}">MATCH</span> or 
`,s+=`<span class="${Ct.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,s+=`<tr><td>string length</td><td>${n.length}</td><td>length of the input (sub)string</td></tr>
`,s+=`<tr><td>matched length</td><td>${n.matched}</td><td>number of input string characters matched</td></tr>
`,s+=`<tr><td>max matched</td><td>${n.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,s+=`<tr><td>max tree depth</td><td>${n.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,s+=`<tr><td>node hits</td><td>${n.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,s+=`<tr><td>input length</td><td>${n.inputLength}</td><td>length of full input string</td></tr>
`,s+=`<tr><td>sub-string begin</td><td>${n.subBegin}</td><td>sub-string first character index</td></tr>
`,s+=`<tr><td>sub-string end</td><td>${n.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,s+=`<tr><td>sub-string length</td><td>${n.subLength}</td><td>sub-string length</td></tr>
`,s+=`</table>
`,s};ft.charsToString=function(n,e,t){let r,i;if(typeof e=="number"){if(e>=n.length)return"";r=e<0?0:e}else r=0;if(typeof t=="number"){if(t<=0)return"";i=t>n.length-r?n.length:r+t}else i=n.length;return r<i?va.encode("UTF16LE",n.slice(r,i)).toString("utf16le"):""};ft.stringToChars=function(n){return va.decode("STRING",n)};ft.opcodeToString=function(n){let e="unknown";switch(n){case ot.ALT:e="ALT";break;case ot.CAT:e="CAT";break;case ot.RNM:e="RNM";break;case ot.UDT:e="UDT";break;case ot.AND:e="AND";break;case ot.NOT:e="NOT";break;case ot.REP:e="REP";break;case ot.TRG:e="TRG";break;case ot.TBS:e="TBS";break;case ot.TLS:e="TLS";break;case ot.BKR:e="BKR";break;case ot.BKA:e="BKA";break;case ot.BKN:e="BKN";break;case ot.ABG:e="ABG";break;case ot.AEN:e="AEN";break;default:throw new Error("unrecognized opcode")}return e};ft.stateToString=function(n){let e="unknown";switch(n){case ot.ACTIVE:e="ACTIVE";break;case ot.MATCH:e="MATCH";break;case ot.EMPTY:e="EMPTY";break;case ot.NOMATCH:e="NOMATCH";break;default:throw new Error("unrecognized state")}return e};ft.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"];ft.charToHex=function(n){let e=n.toString(16).toUpperCase();switch(e.length){case 1:case 3:case 7:e=`0${e}`;break;case 2:case 6:e=`00${e}`;break;case 4:break;case 5:e=`000${e}`;break;default:throw new Error("unrecognized option")}return e};ft.charsToDec=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToDec: input must be an array of integers`);const i=mn(n.length,e,t);if(i.end>i.beg){r+=n[i.beg];for(let s=i.beg+1;s<i.end;s+=1)r+=`,${n[s]}`}return r};ft.charsToHex=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToHex: input must be an array of integers`);const i=mn(n.length,e,t);if(i.end>i.beg){r+=`\\x${vr.charToHex(n[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)r+=`,\\x${vr.charToHex(n[s])}`}return r};ft.charsToHtmlEntities=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToHex: input must be an array of integers`);const i=mn(n.length,e,t);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)r+=`&#x${n[s].toString(16)};`;return r};function Vx(n){return!(n>=55296&&n<=57343||n>1114111)}ft.charsToUnicode=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToUnicode: input must be an array of integers`);const i=mn(n.length,e,t);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)Vx(n[s])?r+=`&#${n[s]};`:r+=` U+${vr.charToHex(n[s])}`;return r};ft.charsToJsUnicode=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToJsUnicode: input must be an array of integers`);const i=mn(n.length,e,t);if(i.end>i.beg){r+=`\\u${vr.charToHex(n[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)r+=`,\\u${vr.charToHex(n[s])}`}return r};ft.charsToAscii=function(n,e,t){let r="";if(!Array.isArray(n))throw new Error(`${Jr}charsToAscii: input must be an array of integers`);const i=mn(n.length,e,t);for(let s=i.beg;s<i.end;s+=1){const o=n[s];o>=32&&o<=126?r+=String.fromCharCode(o):r+=`\\x${vr.charToHex(o)}`}return r};ft.charsToAsciiHtml=function(n,e,t){if(!Array.isArray(n))throw new Error(`${Jr}charsToAsciiHtml: input must be an array of integers`);let r="",i;const s=mn(n.length,e,t);for(let o=s.beg;o<s.end;o+=1)i=n[o],i<32||i===127?r+=`<span class="${Ct.CLASS_CTRLCHAR}">${vr.asciiChars[i]}</span>`:i>127?r+=`<span class="${Ct.CLASS_CTRLCHAR}">U+${vr.charToHex(i)}</span>`:r+=vr.asciiChars[i];return r};ft.stringToAsciiHtml=function(n){const e=va.decode("STRING",n);return this.charsToAsciiHtml(e)};var Wx=function(){const e=br,t=ft,r="ast.js: ",i=this;let s=null,o=null,a=null,h=0;const b=[],p=[],d=[],E=[];this.callbacks=[],this.astObject="astObject",this.init=function(A,S,k){d.length=0,E.length=0,b.length=0,h=0,s=A,o=S,a=k;let L;const K=[];for(L=0;L<s.length;L+=1)K.push(s[L].lower);for(L=0;L<o.length;L+=1)K.push(o[L].lower);for(h=s.length+o.length,L=0;L<h;L+=1)b[L]=!1,p[L]=null;for(const z in i.callbacks){const q=z.toLowerCase();if(L=K.indexOf(q),L<0)throw new Error(`${r}init: node '${z}' not a rule or udt name`);typeof i.callbacks[z]=="function"&&(b[L]=!0,p[L]=i.callbacks[z]),i.callbacks[z]===!0&&(b[L]=!0)}},this.ruleDefined=function(A){return b[A]!==!1},this.udtDefined=function(A){return b[s.length+A]!==!1},this.down=function(A,S){const k=E.length;return d.push(k),E.push({name:S,thisIndex:k,thatIndex:null,state:e.SEM_PRE,callbackIndex:A,phraseIndex:null,phraseLength:null,stack:d.length}),k},this.up=function(A,S,k,L){const K=E.length,z=d.pop();return E.push({name:S,thisIndex:K,thatIndex:z,state:e.SEM_POST,callbackIndex:A,phraseIndex:k,phraseLength:L,stack:d.length}),E[z].thatIndex=K,E[z].phraseIndex=k,E[z].phraseLength=L,K},this.translate=function(A){let S,k,L;for(let K=0;K<E.length;K+=1)L=E[K],k=p[L.callbackIndex],L.state===e.SEM_PRE?k!==null&&(S=k(e.SEM_PRE,a,L.phraseIndex,L.phraseLength,A),S===e.SEM_SKIP&&(K=L.thatIndex)):k!==null&&k(e.SEM_POST,a,L.phraseIndex,L.phraseLength,A)},this.setLength=function(A){E.length=A,A>0?d.length=E[A-1].stack:d.length=0},this.getLength=function(){return E.length};function v(T){let A="";for(let S=0;S<T;S+=1)A+=" ";return A}this.toXml=function(A){let S=t.charsToDec,k="decimal integer character codes";if(typeof A=="string"&&A.length>=3){const z=A.slice(0,3).toLowerCase();z==="asc"?(S=t.charsToAscii,k="ASCII for printing characters, hex for non-printing"):z==="hex"?(S=t.charsToHex,k="hexadecimal integer character codes"):z==="uni"&&(S=t.charsToUnicode,k="Unicode UTF-32 integer character codes")}let L="",K=0;return L+=`<?xml version="1.0" encoding="utf-8"?>
`,L+=`<root nodes="${E.length/2}" characters="${a.length}">
`,L+=`<!-- input string, ${k} -->
`,L+=v(K+2),L+=S(a),L+=`
`,E.forEach(z=>{z.state===e.SEM_PRE?(K+=1,L+=v(K),L+=`<node name="${z.name}" index="${z.phraseIndex}" length="${z.phraseLength}">
`,L+=v(K+2),L+=S(a,z.phraseIndex,z.phraseLength),L+=`
`):(L+=v(K),L+=`</node><!-- name="${z.name}" -->
`,K-=1)}),L+=`</root>
`,L},this.phrases=function(){const A={};let S,k;for(S=0;S<E.length;S+=1)k=E[S],k.state===e.SEM_PRE&&(Array.isArray(A[k.name])||(A[k.name]=[]),A[k.name].push({index:k.phraseIndex,length:k.phraseLength}));return A}},Xl=function(){const e="circular-buffer.js: ";let t=-1,r=0;this.init=function(s){if(typeof s!="number"||s<=0)throw new Error(`${e}init: circular buffer size must an integer > 0`);r=Math.ceil(s),t=-1},this.increment=function(){return t+=1,(t+r)%r},this.maxSize=function(){return r},this.items=function(){return t+1},this.getListIndex=function(s){return t===-1||s<0||s>t||t-s>=r?-1:(s+r)%r},this.forEach=function(s){if(t!==-1){if(t<r){for(let o=0;o<=t;o+=1)s(o,o);return}for(let o=t-r+1;o<=t;o+=1){const a=(o+r)%r;s(a,o)}}}},Jx=function(){const e=br,t=ft,r="parser.js: ",i=this;let s;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let o=null,a=null,h,b,p,d,E=0,v=0,T=0,A=null,S=null,k=null,L=null,K=null,z=0,q=1/0,U=1/0;const Z=function(m,c,f){const _=`${r}evaluateRule(): `;if(m>=k.length)throw new Error(`${_}rule index: ${m} out of range`);if(c>=p)throw new Error(`${_}phrase index: ${c} out of range`);const{length:N}=o;o.push({type:e.RNM,index:m}),s(N,c,f),o.pop()},se=function(ie,m,c){const f=`${r}evaluateUdt(): `;if(ie>=L.length)throw new Error(`${f}udt index: ${ie} out of range`);if(m>=p)throw new Error(`${f}phrase index: ${m} out of range`);const{length:_}=o;o.push({type:e.UDT,empty:L[ie].empty,index:ie}),s(_,m,c),o.pop()},ne=function(){E=0,v=0,T=0,z=0,d=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],k=null,L=null,a=null,h=0,b=0,p=0,A=null,S=null,K=null,o=null},J=function(){const ie=[],m=function(){const f={};k.forEach(_=>{_.isBkr&&(f[_.lower]=null)}),L.length>0&&L.forEach(_=>{_.isBkr&&(f[_.lower]=null)}),ie.push(f)},c=function(){const f=ie[ie.length-1],_={};for(const N in f)_[N]=f[N];return _};this.push=function(){ie.push(c())},this.pop=function(_){let N=_;if(N||(N=ie.length-1),N<1||N>ie.length)throw new Error(`${r}backRef.pop(): bad length: ${N}`);return ie.length=N,ie[ie.length-1]},this.length=function(){return ie.length},this.savePhrase=function(_,N,H){ie[ie.length-1][_]={phraseIndex:N,phraseLength:H}},this.getPhrase=function(f){return ie[ie.length-1][f]},m()},M=function(){const m=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=d[d.length-1],this.uFrame=new J,this.pFrame=new J,this.evaluateRule=Z,this.evaluateUdt=se,this.refresh=function(){m.state=e.ACTIVE,m.phraseLength=0,m.lookAround=d[d.length-1]}},l=function(){return d[d.length-1]},u=function(){return d.length>1},y=function(){return d[d.length-1].lookAround===e.LOOKAROUND_BEHIND},C=function(){const ie=`${r}initializeAst(): `,m=!0;for(;m;){if(i.ast===void 0){i.ast=null;break}if(i.ast===null)break;if(i.ast.astObject!=="astObject")throw new Error(`${ie}ast object not recognized`);break}i.ast!==null&&i.ast.init(k,L,a)},R=function(){const ie=`${r}initializeTrace(): `,m=!0;for(;m;){if(i.trace===void 0){i.trace=null;break}if(i.trace===null)break;if(i.trace.traceObject!=="traceObject")throw new Error(`${ie}trace object not recognized`);break}i.trace!==null&&i.trace.init(k,L,a)},D=function(){const ie=`${r}initializeStats(): `,m=!0;for(;m;){if(i.stats===void 0){i.stats=null;break}if(i.stats===null)break;if(i.stats.statsObject!=="statsObject")throw new Error(`${ie}stats object not recognized`);break}i.stats!==null&&i.stats.init(k,L)},V=function(ie){const m=`${r}initializeGrammar(): `;if(!ie)throw new Error(`${m}grammar object undefined`);if(ie.grammarObject!=="grammarObject")throw new Error(`${m}bad grammar object`);k=ie.rules,L=ie.udts},O=function(ie){const m=`${r}initializeStartRule(): `;let c=null;if(typeof ie=="number"){if(ie>=k.length)throw new Error(`${m}start rule index too large: max: ${k.length}: index: ${ie}`);c=ie}else if(typeof ie=="string"){const f=ie.toLowerCase();for(let _=0;_<k.length;_+=1)if(f===k[_].lower){c=k[_].index;break}if(c===null)throw new Error(`${m}start rule name '${ie}' not recognized`)}else throw new Error(`${m}type of start rule '${typeof ie}' not recognized`);return c},x=function(m,c,f){const _=`${r}initializeInputChars(): `;let N=m,H=c,X=f;if(N===void 0)throw new Error(`${_}input string is undefined`);if(N===null)throw new Error(`${_}input string is null`);if(typeof N=="string")N=t.stringToChars(N);else if(!Array.isArray(N))throw new Error(`${_}input string is not a string or array`);if(N.length>0&&typeof N[0]!="number")throw new Error(`${_}input string not an array of integers`);if(typeof H!="number")H=0;else if(H=Math.floor(H),H<0||H>N.length)throw new Error(`${_}input beginning index out of range: ${H}`);if(typeof X!="number")X=N.length-H;else if(X=Math.floor(X),X<0||X>N.length-H)throw new Error(`${_}input length out of range: ${X}`);a=N,h=H,b=X,p=h+b},w=function(){const ie=`${r}initializeCallbacks(): `;let m;for(A=[],S=[],m=0;m<k.length;m+=1)A[m]=null;for(m=0;m<L.length;m+=1)S[m]=null;let c;const f=[];for(m=0;m<k.length;m+=1)f.push(k[m].lower);for(m=0;m<L.length;m+=1)f.push(L[m].lower);for(const _ in i.callbacks){if(m=f.indexOf(_.toLowerCase()),m<0)throw new Error(`${ie}syntax callback '${_}' not a rule or udt name`);if(c=i.callbacks[_],c||(c=null),typeof c=="function"||c===null)m<k.length?A[m]=c:S[m-k.length]=c;else throw new Error(`${ie}syntax callback[${_}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(m=0;m<L.length;m+=1)if(S[m]===null)throw new Error(`${ie}all UDT callbacks must be defined. UDT callback[${L[m].lower}] not a function reference`)};this.setMaxTreeDepth=function(ie){if(typeof ie!="number")throw new Error(`parser: max tree depth must be integer > 0: ${ie}`);if(q=Math.floor(ie),q<=0)throw new Error(`parser: max tree depth must be integer > 0: ${ie}`)},this.setMaxNodeHits=function(ie){if(typeof ie!="number")throw new Error(`parser: max node hits must be integer > 0: ${ie}`);if(U=Math.floor(ie),U<=0)throw new Error(`parser: max node hits must be integer > 0: ${ie}`)};const I=function(ie,m,c){let f;const _=`${r}parse(): `;V(ie);const N=O(m);w(),R(),D(),C();const H=new M;switch(c!=null&&(K=c),o=[{type:e.RNM,index:N}],s(0,h,H),o=null,H.state){case e.ACTIVE:throw new Error(`${_}final state should never be 'ACTIVE'`);case e.NOMATCH:f=!1;break;case e.EMPTY:case e.MATCH:H.phraseLength===b?f=!0:f=!1;break;default:throw new Error("unrecognized state")}return{success:f,state:H.state,length:b,matched:H.phraseLength,maxMatched:z,maxTreeDepth:v,nodeHits:T,inputLength:a.length,subBegin:h,subEnd:p,subLength:b}};this.parseSubstring=function(m,c,f,_,N,H){return ne(),x(f,_,N),I(m,c,H)},this.parse=function(m,c,f,_){return ne(),x(f,0,f.length),I(m,c,_)};const B=function(ie,m,c){const f=o[ie];for(let _=0;_<f.children.length&&(s(f.children[_],m,c),c.state===e.NOMATCH);_+=1);},j=function(ie,m,c){let f,_,N,H;const X=o[ie],ge=c.uFrame.length(),Ee=c.pFrame.length();i.ast&&(_=i.ast.getLength()),f=!0,N=m,H=0;for(let xe=0;xe<X.children.length;xe+=1)if(s(X.children[xe],N,c),c.state===e.NOMATCH){f=!1;break}else N+=c.phraseLength,H+=c.phraseLength;f?(c.state=H===0?e.EMPTY:e.MATCH,c.phraseLength=H):(c.state=e.NOMATCH,c.phraseLength=0,c.uFrame.pop(ge),c.pFrame.pop(Ee),i.ast&&i.ast.setLength(_))},g=function(ie,m,c){let f,_,N,H;const X=o[ie];_=m,N=0,H=0;const ge=c.uFrame.length(),Ee=c.pFrame.length();i.ast&&(f=i.ast.getLength());const xe=!0;for(;xe&&!(_>=p||(s(ie+1,_,c),c.state===e.NOMATCH)||c.state===e.EMPTY||(H+=1,N+=c.phraseLength,_+=c.phraseLength,H===X.max)););c.state===e.EMPTY||H>=X.min?(c.state=N===0?e.EMPTY:e.MATCH,c.phraseLength=N):(c.state=e.NOMATCH,c.phraseLength=0,c.uFrame.pop(ge),c.pFrame.pop(Ee),i.ast&&i.ast.setLength(f))},Y=function(ie,m,c,f){if(m.phraseLength>c){let _=`${r}opRNM(${ie.name}): callback function error: `;throw _+=`sysData.phraseLength: ${m.phraseLength}`,_+=` must be <= remaining chars: ${c}`,new Error(_)}switch(m.state){case e.ACTIVE:if(f!==!0)throw new Error(`${r}opRNM(${ie.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:m.phraseLength=0;break;case e.MATCH:m.phraseLength===0&&(m.state=e.EMPTY);break;case e.NOMATCH:m.phraseLength=0;break;default:throw new Error(`${r}opRNM(${ie.name}): callback function return error. Unrecognized return state: ${m.state}`)}},Q=function(ie,m,c){let f,_,N,H,X,ge;const Ee=o[ie],xe=k[Ee.index],we=A[xe.index],Ae=!u();if(Ae&&(_=i.ast&&i.ast.ruleDefined(Ee.index),_&&(f=i.ast.getLength(),i.ast.down(Ee.index,k[Ee.index].name)),H=c.uFrame.length(),X=c.pFrame.length(),c.uFrame.push(),c.pFrame.push(),ge=c.pFrame,c.pFrame=new J),we===null)N=o,o=xe.opcodes,s(0,m,c),o=N;else{const Fe=p-m;c.ruleIndex=xe.index,we(c,a,m,K),Y(xe,c,Fe,!0),c.state===e.ACTIVE&&(N=o,o=xe.opcodes,s(0,m,c),o=N,c.ruleIndex=xe.index,we(c,a,m,K),Y(xe,c,Fe,!1))}Ae&&(_&&(c.state===e.NOMATCH?i.ast.setLength(f):i.ast.up(Ee.index,xe.name,m,c.phraseLength)),c.pFrame=ge,c.state===e.NOMATCH?(c.uFrame.pop(H),c.pFrame.pop(X)):xe.isBkr&&(c.pFrame.savePhrase(xe.lower,m,c.phraseLength),c.uFrame.savePhrase(xe.lower,m,c.phraseLength)))},$=function(ie,m,c){if(m.phraseLength>c){let f=`${r}opUDT(${ie.name}): callback function error: `;throw f+=`sysData.phraseLength: ${m.phraseLength}`,f+=` must be <= remaining chars: ${c}`,new Error(f)}switch(m.state){case e.ACTIVE:throw new Error(`${r}opUDT(${ie.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(ie.empty===!1)throw new Error(`${r}opUDT(${ie.name}): callback function return error. May not return EMPTY.`);m.phraseLength=0;break;case e.MATCH:if(m.phraseLength===0){if(ie.empty===!1)throw new Error(`${r}opUDT(${ie.name}): callback function return error. May not return EMPTY.`);m.state=e.EMPTY}break;case e.NOMATCH:m.phraseLength=0;break;default:throw new Error(`${r}opUDT(${ie.name}): callback function return error. Unrecognized return state: ${m.state}`)}},P=function(ie,m,c){let f,_,N,H,X,ge;const Ee=o[ie],xe=L[Ee.index];c.UdtIndex=xe.index;const we=!u();we&&(N=i.ast&&i.ast.udtDefined(Ee.index),N&&(_=k.length+Ee.index,f=i.ast.getLength(),i.ast.down(_,xe.name)),H=c.uFrame.length(),X=c.pFrame.length(),c.uFrame.push(),c.pFrame.push(),ge=c.pFrame,c.pFrame=new J);const Ae=p-m;S[Ee.index](c,a,m,K),$(xe,c,Ae),we&&(N&&(c.state===e.NOMATCH?i.ast.setLength(f):i.ast.up(_,xe.name,m,c.phraseLength)),c.pFrame=ge,c.state===e.NOMATCH?(c.uFrame.pop(H),c.pFrame.pop(X)):xe.isBkr&&(c.pFrame.savePhrase(xe.lower,m,c.phraseLength),c.uFrame.savePhrase(xe.lower,m,c.phraseLength)))},G=function(ie,m,c){d.push({lookAround:e.LOOKAROUND_AHEAD,anchor:m,charsEnd:p,charsLength:b}),p=a.length,b=a.length-h,s(ie+1,m,c);const f=d.pop();switch(p=f.charsEnd,b=f.charsLength,c.phraseLength=0,c.state){case e.EMPTY:c.state=e.EMPTY;break;case e.MATCH:c.state=e.EMPTY;break;case e.NOMATCH:c.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${c.state}`)}},te=function(ie,m,c){d.push({lookAround:e.LOOKAROUND_AHEAD,anchor:m,charsEnd:p,charsLength:b}),p=a.length,b=a.length-h,s(ie+1,m,c);const f=d.pop();switch(p=f.charsEnd,b=f.charsLength,c.phraseLength=0,c.state){case e.EMPTY:case e.MATCH:c.state=e.NOMATCH;break;case e.NOMATCH:c.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${c.state}`)}},oe=function(ie,m,c){const f=o[ie];c.state=e.NOMATCH,m<p&&f.min<=a[m]&&a[m]<=f.max&&(c.state=e.MATCH,c.phraseLength=1)},ue=function(ie,m,c){let f;const _=o[ie],N=_.string.length;if(c.state=e.NOMATCH,m+N<=p){for(f=0;f<N;f+=1)if(a[m+f]!==_.string[f])return;c.state=e.MATCH,c.phraseLength=N}},he=function(ie,m,c){let f,_;const N=o[ie];c.state=e.NOMATCH;const H=N.string.length;if(H===0){c.state=e.EMPTY;return}if(m+H<=p){for(f=0;f<H;f+=1)if(_=a[m+f],_>=65&&_<=90&&(_+=32),_!==N.string[f])return;c.state=e.MATCH,c.phraseLength=H}},ee=function(ie,m,c){c.state=e.NOMATCH,c.phraseLength=0,c.state=m===0?e.EMPTY:e.NOMATCH},fe=function(ie,m,c){c.state=e.NOMATCH,c.phraseLength=0,c.state=m===a.length?e.EMPTY:e.NOMATCH},re=function(ie,m,c){let f,_,N,H;const X=o[ie];c.state=e.NOMATCH,X.index<k.length?H=k[X.index].lower:H=L[X.index-k.length].lower;const ge=X.bkrMode===e.BKR_MODE_PM?c.pFrame.getPhrase(H):c.uFrame.getPhrase(H),Ee=X.bkrCase===e.BKR_MODE_CI;if(ge===null)return;const xe=ge.phraseIndex,we=ge.phraseLength;if(we===0){c.state=e.EMPTY;return}if(m+we<=p){if(Ee){for(f=0;f<we;f+=1)if(_=a[m+f],N=a[xe+f],_>=65&&_<=90&&(_+=32),N>=65&&N<=90&&(N+=32),_!==N)return;c.state=e.MATCH,c.phraseLength=we}else for(f=0;f<we;f+=1)if(_=a[m+f],N=a[xe+f],_!==N)return;c.state=e.MATCH,c.phraseLength=we}},le=function(ie,m,c){switch(d.push({lookAround:e.LOOKAROUND_BEHIND,anchor:m}),s(ie+1,m,c),d.pop(),c.phraseLength=0,c.state){case e.EMPTY:c.state=e.EMPTY;break;case e.MATCH:c.state=e.EMPTY;break;case e.NOMATCH:c.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${c.state}`)}},F=function(ie,m,c){switch(d.push({lookAround:e.LOOKAROUND_BEHIND,anchor:m}),s(ie+1,m,c),d.pop(),c.phraseLength=0,c.state){case e.EMPTY:case e.MATCH:c.state=e.NOMATCH;break;case e.NOMATCH:c.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${c.state}`)}},ae=function(ie,m,c){let f,_,N,H;const X=o[ie],ge=c.uFrame.length(),Ee=c.pFrame.length();i.ast&&(_=i.ast.getLength()),f=!0,N=m,H=0;for(let xe=X.children.length-1;xe>=0;xe-=1)if(s(X.children[xe],N,c),N-=c.phraseLength,H+=c.phraseLength,c.state===e.NOMATCH){f=!1;break}f?(c.state=H===0?e.EMPTY:e.MATCH,c.phraseLength=H):(c.state=e.NOMATCH,c.phraseLength=0,c.uFrame.pop(ge),c.pFrame.pop(Ee),i.ast&&i.ast.setLength(_))},be=function(ie,m,c){let f,_,N,H;const X=o[ie];_=m,N=0,H=0;const ge=c.uFrame.length(),Ee=c.pFrame.length();i.ast&&(f=i.ast.getLength());const xe=!0;for(;xe&&!(_<=0||(s(ie+1,_,c),c.state===e.NOMATCH)||c.state===e.EMPTY||(H+=1,N+=c.phraseLength,_-=c.phraseLength,H===X.max)););c.state===e.EMPTY||H>=X.min?(c.state=N===0?e.EMPTY:e.MATCH,c.phraseLength=N):(c.state=e.NOMATCH,c.phraseLength=0,c.uFrame.pop(ge),c.pFrame.pop(Ee),i.ast&&i.ast.setLength(f))},ye=function(ie,m,c){const f=o[ie];if(c.state=e.NOMATCH,c.phraseLength=0,m>0){const _=a[m-1];f.min<=_&&_<=f.max&&(c.state=e.MATCH,c.phraseLength=1)}},Me=function(ie,m,c){let f;const _=o[ie];c.state=e.NOMATCH;const N=_.string.length,H=m-N;if(H>=0){for(f=0;f<N;f+=1)if(a[H+f]!==_.string[f])return;c.state=e.MATCH,c.phraseLength=N}},Pe=function(ie,m,c){let f;const _=o[ie];c.state=e.NOMATCH;const N=_.string.length;if(N===0){c.state=e.EMPTY;return}const H=m-N;if(H>=0){for(let X=0;X<N;X+=1)if(f=a[H+X],f>=65&&f<=90&&(f+=32),f!==_.string[X])return;c.state=e.MATCH,c.phraseLength=N}},_e=function(ie,m,c){let f,_,N,H;const X=o[ie];c.state=e.NOMATCH,c.phraseLength=0,X.index<k.length?H=k[X.index].lower:H=L[X.index-k.length].lower;const ge=X.bkrMode===e.BKR_MODE_PM?c.pFrame.getPhrase(H):c.uFrame.getPhrase(H),Ee=X.bkrCase===e.BKR_MODE_CI;if(ge===null)return;const xe=ge.phraseIndex,we=ge.phraseLength;if(we===0){c.state=e.EMPTY,c.phraseLength=0;return}const Ae=m-we;if(Ae>=0){if(Ee){for(f=0;f<we;f+=1)if(_=a[Ae+f],N=a[xe+f],_>=65&&_<=90&&(_+=32),N>=65&&N<=90&&(N+=32),_!==N)return;c.state=e.MATCH,c.phraseLength=we}else for(f=0;f<we;f+=1)if(_=a[Ae+f],N=a[xe+f],_!==N)return;c.state=e.MATCH,c.phraseLength=we}};s=function(m,c,f){let _=!0;const N=o[m];if(T+=1,T>U)throw new Error(`parser: maximum number of node hits exceeded: ${U}`);if(E+=1,E>v&&(v=E,v>q))throw new Error(`parser: maximum parse tree depth exceeded: ${q}`);if(f.refresh(),i.trace!==null){const H=l();i.trace.down(N,f.state,c,f.phraseLength,H.anchor,H.lookAround)}if(y())switch(N.type){case e.ALT:B(m,c,f);break;case e.CAT:ae(m,c,f);break;case e.REP:be(m,c,f);break;case e.RNM:Q(m,c,f);break;case e.UDT:P(m,c,f);break;case e.AND:G(m,c,f);break;case e.NOT:te(m,c,f);break;case e.TRG:ye(m,c,f);break;case e.TBS:Me(m,c,f);break;case e.TLS:Pe(m,c,f);break;case e.BKR:_e(m,c,f);break;case e.BKA:le(m,c,f);break;case e.BKN:F(m,c,f);break;case e.ABG:ee(m,c,f);break;case e.AEN:fe(m,c,f);break;default:_=!1;break}else switch(N.type){case e.ALT:B(m,c,f);break;case e.CAT:j(m,c,f);break;case e.REP:g(m,c,f);break;case e.RNM:Q(m,c,f);break;case e.UDT:P(m,c,f);break;case e.AND:G(m,c,f);break;case e.NOT:te(m,c,f);break;case e.TRG:oe(m,c,f);break;case e.TBS:ue(m,c,f);break;case e.TLS:he(m,c,f);break;case e.BKR:re(m,c,f);break;case e.BKA:le(m,c,f);break;case e.BKN:F(m,c,f);break;case e.ABG:ee(m,c,f);break;case e.AEN:fe(m,c,f);break;default:_=!1;break}if(!u()&&c+f.phraseLength>z&&(z=c+f.phraseLength),i.stats!==null&&i.stats.collect(N,f),i.trace!==null){const H=l();i.trace.up(N,f.state,c,f.phraseLength,H.anchor,H.lookAround)}return E-=1,_}},Yx=function(){const e=br,t=ft,r=Ts,i="stats.js: ";let s=[],o=[];const a=[];let h;const b=[],p=[];this.statsObject="statsObject";const d="stats",E=function(U,Z){return U.lower<Z.lower?-1:U.lower>Z.lower?1:0},v=function(U,Z){return U.total<Z.total?1:U.total>Z.total?-1:E(U,Z)},T=function(U,Z){return U.index<Z.index?-1:U.index>Z.index?1:0},A=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},S=function(){a.length=0,h=new A,a[e.ALT]=new A,a[e.CAT]=new A,a[e.REP]=new A,a[e.RNM]=new A,a[e.TRG]=new A,a[e.TBS]=new A,a[e.TLS]=new A,a[e.UDT]=new A,a[e.AND]=new A,a[e.NOT]=new A,a[e.BKR]=new A,a[e.BKA]=new A,a[e.BKN]=new A,a[e.ABG]=new A,a[e.AEN]=new A,b.length=0;for(let U=0;U<s.length;U+=1)b.push({empty:0,match:0,nomatch:0,total:0,name:s[U].name,lower:s[U].lower,index:s[U].index});if(o.length>0){p.length=0;for(let U=0;U<o.length;U+=1)p.push({empty:0,match:0,nomatch:0,total:0,name:o[U].name,lower:o[U].lower,index:o[U].index})}},k=function(U,Z){switch(U.total+=1,Z){case e.EMPTY:U.empty+=1;break;case e.MATCH:U.match+=1;break;case e.NOMATCH:U.nomatch+=1;break;default:throw new Error(`${i}collect(): incStat(): unrecognized state: ${Z}`)}},L=function(U,Z){let se="";return se+="<tr>",se+=`<td class="${r.CLASS_ACTIVE}">${U}</td>`,se+=`<td class="${r.CLASS_EMPTY}">${Z.empty}</td>`,se+=`<td class="${r.CLASS_MATCH}">${Z.match}</td>`,se+=`<td class="${r.CLASS_NOMATCH}">${Z.nomatch}</td>`,se+=`<td class="${r.CLASS_ACTIVE}">${Z.total}</td>`,se+=`</tr>
`,se},K=function(){let U="";return U+=L("ALT",a[e.ALT]),U+=L("CAT",a[e.CAT]),U+=L("REP",a[e.REP]),U+=L("RNM",a[e.RNM]),U+=L("TRG",a[e.TRG]),U+=L("TBS",a[e.TBS]),U+=L("TLS",a[e.TLS]),U+=L("UDT",a[e.UDT]),U+=L("AND",a[e.AND]),U+=L("NOT",a[e.NOT]),U+=L("BKR",a[e.BKR]),U+=L("BKA",a[e.BKA]),U+=L("BKN",a[e.BKN]),U+=L("ABG",a[e.ABG]),U+=L("AEN",a[e.AEN]),U+=L("totals",h),U},z=function(){let U="";U+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,U+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let Z=0;Z<s.length;Z+=1)b[Z].total>0&&(U+="<tr>",U+=`<td class="${r.CLASS_ACTIVE}">${b[Z].name}</td>`,U+=`<td class="${r.CLASS_EMPTY}">${b[Z].empty}</td>`,U+=`<td class="${r.CLASS_MATCH}">${b[Z].match}</td>`,U+=`<td class="${r.CLASS_NOMATCH}">${b[Z].nomatch}</td>`,U+=`<td class="${r.CLASS_ACTIVE}">${b[Z].total}</td>`,U+=`</tr>
`);if(o.length>0){U+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,U+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let Z=0;Z<o.length;Z+=1)p[Z].total>0&&(U+="<tr>",U+=`<td class="${r.CLASS_ACTIVE}">${p[Z].name}</td>`,U+=`<td class="${r.CLASS_EMPTY}">${p[Z].empty}</td>`,U+=`<td class="${r.CLASS_MATCH}">${p[Z].match}</td>`,U+=`<td class="${r.CLASS_NOMATCH}">${p[Z].nomatch}</td>`,U+=`<td class="${r.CLASS_ACTIVE}">${p[Z].total}</td>`,U+=`</tr>
`)}return U};this.validate=function(U){let Z=!1;return typeof U=="string"&&d===U&&(Z=!0),Z},this.init=function(U,Z){s=U,o=Z,S()},this.collect=function(U,Z){k(h,Z.state,Z.phraseLength),k(a[U.type],Z.state,Z.phraseLength),U.type===e.RNM&&k(b[U.index],Z.state,Z.phraseLength),U.type===e.UDT&&k(p[U.index],Z.state,Z.phraseLength)},this.toHtml=function(U,Z){let se="";se+=`<table class="${r.CLASS_STATS}">
`,typeof Z=="string"&&(se+=`<caption>${Z}</caption>
`),se+=`<tr><th class="${r.CLASS_ACTIVE}">ops</th>
`,se+=`<th class="${r.CLASS_EMPTY}">EMPTY</th>
`,se+=`<th class="${r.CLASS_MATCH}">MATCH</th>
`,se+=`<th class="${r.CLASS_NOMATCH}">NOMATCH</th>
`,se+=`<th class="${r.CLASS_ACTIVE}">totals</th></tr>
`;const ne=!0;for(;ne;){if(U===void 0){se+=K();break}if(U===null){se+=K();break}if(U==="ops"){se+=K();break}if(U==="index"){b.sort(T),p.length>0&&p.sort(T),se+=K(),se+=z();break}if(U==="hits"){b.sort(v),p.length>0&&p.sort(T),se+=K(),se+=z();break}if(U==="alpha"){b.sort(E),p.length>0&&p.sort(E),se+=K(),se+=z();break}break}return se+=`</table>
`,se},this.toHtmlPage=function(U,Z,se){return t.htmlToPage(this.toHtml(U,Z),se)}},Xx=function(){const e=ft,t=Ts,r=new Xl,i=br,s="trace.js: ",o=this,a=16,h=10,b=8,p=32,d=80,E=5,v=[];let T=5e3,A=-1,S=0,k=0;const L=[];let K=null,z=null,q=null;const U=[],Z=[],se=`<span class="${t.CLASS_LINEEND}">&bull;</span>`,ne=`<span class="${t.CLASS_LINEEND}">&hellip;</span>`,J=`<span class="${t.CLASS_EMPTY}">&#120634;</span>`,M=function(){const $=function(G){U[i.ALT]=G,U[i.CAT]=G,U[i.REP]=G,U[i.TLS]=G,U[i.TBS]=G,U[i.TRG]=G,U[i.AND]=G,U[i.NOT]=G,U[i.BKR]=G,U[i.BKA]=G,U[i.BKN]=G,U[i.ABG]=G,U[i.AEN]=G};let P=0;for(const G in o.filter.operators)P+=1;if(P===0){$(!1);return}for(const G in o.filter.operators){const te=G.toUpperCase();if(te==="<ALL>"){$(!0);return}if(te==="<NONE>"){$(!1);return}}$(!1);for(const G in o.filter.operators){const te=G.toUpperCase();if(te==="ALT")U[i.ALT]=o.filter.operators[G]===!0;else if(te==="CAT")U[i.CAT]=o.filter.operators[G]===!0;else if(te==="REP")U[i.REP]=o.filter.operators[G]===!0;else if(te==="AND")U[i.AND]=o.filter.operators[G]===!0;else if(te==="NOT")U[i.NOT]=o.filter.operators[G]===!0;else if(te==="TLS")U[i.TLS]=o.filter.operators[G]===!0;else if(te==="TBS")U[i.TBS]=o.filter.operators[G]===!0;else if(te==="TRG")U[i.TRG]=o.filter.operators[G]===!0;else if(te==="BKR")U[i.BKR]=o.filter.operators[G]===!0;else if(te==="BKA")U[i.BKA]=o.filter.operators[G]===!0;else if(te==="BKN")U[i.BKN]=o.filter.operators[G]===!0;else if(te==="ABG")U[i.ABG]=o.filter.operators[G]===!0;else if(te==="AEN")U[i.AEN]=o.filter.operators[G]===!0;else throw new Error(`${s}initOpratorFilter: '${G}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},l=function(){const $=function(oe){U[i.RNM]=oe,U[i.UDT]=oe;const ue=z.length+q.length;Z.length=0;for(let he=0;he<ue;he+=1)Z.push(oe)};let P,G;const te=[];for(G=0;G<z.length;G+=1)te.push(z[G].lower);for(G=0;G<q.length;G+=1)te.push(q[G].lower);Z.length=0,P=0;for(const oe in o.filter.rules)P+=1;if(P===0){$(!0);return}for(const oe in o.filter.rules){const ue=oe.toLowerCase();if(ue==="<all>"){$(!0);return}if(ue==="<none>"){$(!1);return}}$(!1),U[i.RNM]=!0,U[i.UDT]=!0;for(const oe in o.filter.rules){const ue=oe.toLowerCase();if(G=te.indexOf(ue),G<0)throw new Error(`${s}initRuleFilter: '${oe}' not a valid rule or udt name`);Z[G]=o.filter.rules[oe]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function($,P){if(A=-1,typeof $=="number"&&$>0)T=Math.ceil($);else{T=0;return}typeof P=="number"&&(A=Math.floor(P),A<0&&(A=-1))},this.getMaxRecords=function(){return T},this.getLastRecord=function(){return A},this.init=function($,P,G){v.length=0,L.length=0,S=0,k=0,K=G,z=$,q=P,M(),l(),r.init(T)};const u=function($){let P=!1;return $.type===i.RNM?U[$.type]&&Z[$.index]?P=!0:P=!1:$.type===i.UDT?U[$.type]&&Z[z.length+$.index]?P=!0:P=!1:P=U[$.type],P},y=function($){return A===-1||$<=A};this.down=function($,P,G,te,oe,ue){y(S)&&u($)&&(L.push(S),v[r.increment()]={dirUp:!1,depth:k,thisLine:S,thatLine:void 0,opcode:$,state:P,phraseIndex:G,phraseLength:te,lookAnchor:oe,lookAround:ue},S+=1,k+=1)},this.up=function($,P,G,te,oe,ue){if(y(S)&&u($)){const he=S,ee=L.pop(),fe=r.getListIndex(ee);fe!==-1&&(v[fe].thatLine=he),k-=1,v[r.increment()]={dirUp:!0,depth:k,thisLine:he,thatLine:ee,opcode:$,state:P,phraseIndex:G,phraseLength:te,lookAnchor:oe,lookAround:ue},S+=1}};const C=function(){function $(c,f){let _,N,H;if(f)switch(c.op={id:f.type,name:e.opcodeToString(f.type)},c.opData=void 0,f.type){case i.RNM:c.opData=z[f.index].name;break;case i.UDT:c.opData=q[f.index].name;break;case i.BKR:f.index<z.length?_=z[f.index].name:_=q[f.index-z.length].name,N=f.bkrCase===i.BKR_MODE_CI?"%i":"%s",H=f.bkrMode===i.BKR_MODE_UM?"%u":"%p",c.opData=`\\\\${N}${H}${_}`;break;case i.TLS:c.opData=[];for(let X=0;X<f.string.length;X+=1)c.opData.push(f.string[X]);break;case i.TBS:c.opData=[];for(let X=0;X<f.string.length;X+=1)c.opData.push(f.string[X]);break;case i.TRG:c.opData=[f.min,f.max];break;case i.REP:c.opData=[f.min,f.max];break;default:throw new Error("unrecognized opcode")}else c.op={id:void 0,name:void 0},c.opData=void 0}function P(c,f,_){return c===i.MATCH?{index:f,length:_}:c===i.NOMATCH?{index:f,length:0}:c===i.EMPTY?{index:f,length:0}:null}let G=-1;function te(c,f,_){const N={id:G++,branch:-1,parent:c,up:!1,down:!1,depth:_,children:[]};return f?(N.down=!0,N.state={id:f.state,name:e.stateToString(f.state)},N.phrase=null,$(N,f.opcode)):(N.state={id:void 0,name:void 0},N.phrase=P(),$(N,void 0)),N}function oe(c,f){f&&(c.up=!0,c.state={id:f.state,name:e.stateToString(f.state)},c.phrase=P(f.state,f.phraseIndex,f.phraseLength),c.down||$(c,f.opcode))}let ue=0,he=-1,ee=1;function fe(c){if(he+=1,c.branch=ee,he>k&&(k=he),c.children.length===0)ue+=1;else for(let f=0;f<c.children.length;f+=1)f>0&&(ee+=1),c.children[f].leftMost=!1,c.children[f].rightMost=!1,c.leftMost&&(c.children[f].leftMost=f===0),c.rightMost&&(c.children[f].rightMost=f===c.children.length-1),fe(c.children[f]);he-=1}function re(c,f){let _;const N={};if(N.id=c.id,N.branch=c.branch,N.leftMost=c.leftMost,N.rightMost=c.rightMost,_=c.state.name?c.state.name:"ACTIVE",N.state={id:c.state.id,name:_},_=c.op.name?c.op.name:"?",N.op={id:c.op.id,name:_},typeof c.opData=="string")N.opData=c.opData;else if(Array.isArray(c.opData)){N.opData=[];for(let H=0;H<c.opData.length;H+=1)N.opData[H]=c.opData[H]}else N.opData=void 0;c.phrase?N.phrase={index:c.phrase.index,length:c.phrase.length}:N.phrase=null,N.depth=c.depth,N.children=[];for(let H=0;H<c.children.length;H+=1)c.children.length-1,N.children[H]=re(c.children[H]);return N}const le=[];let F,ae,be,ye,Me=!0;const Pe=te(null,null,-1);for(le.push(Pe),ae=Pe,r.forEach(c=>{if(ye=v[c],Me&&(Me=!1,ye.depth>0)){const f=ye.dirUp?ye.depth+1:ye.depth;for(let _=0;_<f;_+=1)be=ae,ae=te(ae,null,_),le.push(ae),be.children.push(ae)}ye.dirUp?(ae=le.pop(),oe(ae,ye),ae=le[le.length-1]):(be=ae,ae=te(ae,ye,ye.depth),le.push(ae),be.children.push(ae))});le.length>1;)ae=le.pop(),oe(ae,null);if(Pe.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(le.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");F=Pe.children[0];let _e=F;for(;F&&!F.down&&!F.up;)_e=F,F=F.children[0];F=_e,F.leftMost=!0,F.rightMost=!0,fe(F),F.branch=0;const ie={};ie.string=[];for(let c=0;c<K.length;c+=1)ie.string[c]=K[c];ie.rules=[];for(let c=0;c<z.length;c+=1)ie.rules[c]=z[c].name;ie.udts=[];for(let c=0;c<q.length;c+=1)ie.udts[c]=q[c].name;ie.id={},ie.id.ALT={id:i.ALT,name:"ALT"},ie.id.CAT={id:i.CAT,name:"CAT"},ie.id.REP={id:i.REP,name:"REP"},ie.id.RNM={id:i.RNM,name:"RNM"},ie.id.TLS={id:i.TLS,name:"TLS"},ie.id.TBS={id:i.TBS,name:"TBS"},ie.id.TRG={id:i.TRG,name:"TRG"},ie.id.UDT={id:i.UDT,name:"UDT"},ie.id.AND={id:i.AND,name:"AND"},ie.id.NOT={id:i.NOT,name:"NOT"},ie.id.BKR={id:i.BKR,name:"BKR"},ie.id.BKA={id:i.BKA,name:"BKA"},ie.id.BKN={id:i.BKN,name:"BKN"},ie.id.ABG={id:i.ABG,name:"ABG"},ie.id.AEN={id:i.AEN,name:"AEN"},ie.id.ACTIVE={id:i.ACTIVE,name:"ACTIVE"},ie.id.MATCH={id:i.MATCH,name:"MATCH"},ie.id.EMPTY={id:i.EMPTY,name:"EMPTY"},ie.id.NOMATCH={id:i.NOMATCH,name:"NOMATCH"},ie.treeDepth=k,ie.leafNodes=ue;let m;return F.down?F.up?m="none":m="right":F.up?m="left":m="both",ie.branchesIncomplete=m,ie.tree=re(F,F.depth),ie};this.toTree=function($){const P=C();return $?JSON.stringify(P):P},this.toHtmlPage=function($,P,G){return e.htmlToPage(this.toHtml($,P),G)};const R=function($,P){let G;switch($){case a:G="hexadecimal";break;case h:G="decimal";break;case b:G="ASCII";break;case p:G="UNICODE";break;default:throw new Error(`${s}htmlHeader: unrecognized mode: ${$}`)}let te="";return te+=`<p>display mode: ${G}</p>
`,te+=`<table class="${t.CLASS_TRACE}">
`,typeof P=="string"&&(te+=`<caption>${P}</caption>`),te},D=function(){let $="";return $+=`</table>
`,$+=`<p class="${t.CLASS_MONOSPACE}">legend:<br>
`,$+=`(a)&nbsp;-&nbsp;line number<br>
`,$+=`(b)&nbsp;-&nbsp;matching line number<br>
`,$+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,$+=`(d)&nbsp;-&nbsp;phrase length<br>
`,$+=`(e)&nbsp;-&nbsp;tree depth<br>
`,$+=`(f)&nbsp;-&nbsp;operator state<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,$+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,$+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${d} characters of the phrase being matched<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">matched characters</span><br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${J} empty string<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${se} end of input string<br>
`,$+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ne} input string display truncated<br>
`,$+=`</p>
`,$+=`<p class="${t.CLASS_MONOSPACE}">
`,$+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,$+=`ALT - alternation<br>
`,$+=`CAT - concatenation<br>
`,$+=`REP - repetition<br>
`,$+=`RNM - rule name<br>
`,$+=`TRG - terminal range<br>
`,$+=`TLS - terminal literal string (case insensitive)<br>
`,$+=`TBS - terminal binary string (case sensitive)<br>
`,$+=`<br>
`,$+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,$+=`UDT - user-defined terminal<br>
`,$+=`AND - positive look ahead<br>
`,$+=`NOT - negative look ahead<br>
`,$+=`BKA - positive look behind<br>
`,$+=`BKN - negative look behind<br>
`,$+=`BKR - back reference<br>
`,$+=`ABG - anchor - begin of input string<br>
`,$+=`AEN - anchor - end of input string<br>
`,$+=`</p>
`,$};this.indent=function($){let P="";for(let G=0;G<$;G+=1)P+=".";return P};const V=function($,P){let G="";if(P.type===i.TRG)if($===a||$===p){let te=P.min.toString(16).toUpperCase();te.length%2!==0&&(te=`0${te}`),G+=$===a?"%x":"U+",G+=te,te=P.max.toString(16).toUpperCase(),te.length%2!==0&&(te=`0${te}`),G+=`&ndash;${te}`}else G=`%d${P.min.toString(10)}&ndash;${P.max.toString(10)}`;return G},O=function($,P){let G="";if(P.type===i.REP)if($===a){let te=P.min.toString(16).toUpperCase();te.length%2!==0&&(te=`0${te}`),G=`x${te}`,P.max<1/0?(te=P.max.toString(16).toUpperCase(),te.length%2!==0&&(te=`0${te}`)):te="inf",G+=`&ndash;${te}`}else P.max<1/0?G=`${P.min.toString(10)}&ndash;${P.max.toString(10)}`:G=`${P.min.toString(10)}&ndash;inf`;return G},x=function($,P){let G="";if(P.type===i.TBS){const te=Math.min(P.string.length,E*2);if($===a||$===p){G+=$===a?"%x":"U+";for(let oe=0;oe<te;oe+=1){let ue;oe>0&&(G+="."),ue=P.string[oe].toString(16).toUpperCase(),ue.length%2!==0&&(ue=`0${ue}`),G+=ue}}else{G="%d";for(let oe=0;oe<te;oe+=1)oe>0&&(G+="."),G+=P.string[oe].toString(10)}te<P.string.length&&(G+=ne)}return G},w=function($,P){let G="";if(P.type===i.TLS){const te=Math.min(P.string.length,E);if($===a||$===h){let oe,ue,he;$===a?(G="%x",he=16):(G="%d",he=10);for(let ee=0;ee<te;ee+=1)ee>0&&(G+="."),ue=P.string[ee],ue>=97&&ue<=122?(oe=ue-32,G+=`${oe.toString(he)}/${ue.toString(he)}`.toUpperCase()):ue>=65&&ue<=90?(oe=ue,ue+=32,G+=`${oe.toString(he)}/${ue.toString(he)}`.toUpperCase()):G+=ue.toString(he).toUpperCase();te<P.string.length&&(G+=ne)}else{G='"';for(let oe=0;oe<te;oe+=1)G+=e.asciiChars[P.string[oe]];te<P.string.length&&(G+=ne),G+='"'}}return G},I=function($,P,G,te,oe){if(te===0)return"";let ue="";const he=oe?",":"";switch($){case a:ue=he+e.charsToHex(P,G,te);break;case h:if(oe)return`,${e.charsToDec(P,G,te)}`;ue=he+e.charsToDec(P,G,te);break;case p:ue=e.charsToUnicode(P,G,te);break;case b:default:ue=e.charsToAsciiHtml(P,G,te);break}return ue},B=function($,P,G,te,oe,ue){let he="",ee,fe,re,le,F=se;const ae=`<span class="${t.CLASS_LOOKBEHIND}">`,be=`<span class="${t.CLASS_REMAINDER}">`,ye="</span>";let Me=!1;switch(G){case i.EMPTY:he+=J;case i.NOMATCH:case i.MATCH:case i.ACTIVE:ee=te-oe,fe=ue-ee,re=ue,le=P.length-re;break;default:throw new Error("unrecognized state")}return F=se,fe>d?(fe=d,F=ne,le=0):fe+le>d&&(F=ne,le=d-fe),fe>0&&(he+=ae,he+=I($,P,ee,fe,Me),he+=ye,Me=!0),le>0&&(he+=be,he+=I($,P,re,le,Me),he+=ye),he+F},j=function($,P,G,te,oe,ue){let he="",ee,fe,re,le,F=se;const ae=`<span class="${t.CLASS_REMAINDER}">`,be="</span>";let ye=!1;switch(G){case i.EMPTY:he+=J;case i.NOMATCH:case i.ACTIVE:ee=te,fe=0,re=te,le=P.length-re;break;case i.MATCH:ee=te,fe=oe,re=te+fe,le=P.length-re;break;default:throw new Error("unrecognized state")}return F=se,fe>d?(fe=d,F=ne,le=0):fe+le>d&&(F=ne,le=d-fe),fe>0&&(he+=ue,he+=I($,P,ee,fe,ye),he+=be,ye=!0),le>0&&(he+=ae,he+=I($,P,re,le,ye),he+=be),he+F},g=function($,P,G,te,oe){const ue=`<span class="${t.CLASS_LOOKAHEAD}">`;return j($,P,G,te,oe,ue)},Y=function($,P,G,te,oe){const ue=`<span class="${t.CLASS_MATCH}">`;return j($,P,G,te,oe,ue)},Q=function($){if(z===null)return"";let P="",G,te,oe,ue,he,ee;return P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,r.forEach(fe=>{const re=v[fe];switch(G=re.thisLine,te=re.thatLine!==void 0?re.thatLine:"--",oe=!1,ue=!1,he=!1,re.lookAround===i.LOOKAROUND_AHEAD&&(oe=!0,he=!0,ee=re.lookAnchor),(re.opcode.type===i.AND||re.opcode.type===i.NOT)&&(oe=!0,he=!0,ee=re.phraseIndex),re.lookAround===i.LOOKAROUND_BEHIND&&(ue=!0,he=!0,ee=re.lookAnchor),(re.opcode.type===i.BKA||re.opcode.type===i.BKN)&&(ue=!0,he=!0,ee=re.phraseIndex),P+="<tr>",P+=`<td>${G}</td><td>${te}</td>`,P+=`<td>${re.phraseIndex}</td>`,P+=`<td>${re.phraseLength}</td>`,P+=`<td>${re.depth}</td>`,P+="<td>",re.state){case i.ACTIVE:P+=`<span class="${t.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case i.MATCH:P+=`<span class="${t.CLASS_MATCH}">&uarr;M</span>`;break;case i.NOMATCH:P+=`<span class="${t.CLASS_NOMATCH}">&uarr;N</span>`;break;case i.EMPTY:P+=`<span class="${t.CLASS_EMPTY}">&uarr;E</span>`;break;default:P+=`<span class="${t.CLASS_ACTIVE}">--</span>`;break}if(P+="</td>",P+="<td>",P+=o.indent(re.depth),oe?P+=`<span class="${t.CLASS_LOOKAHEAD}">`:ue&&(P+=`<span class="${t.CLASS_LOOKBEHIND}">`),P+=e.opcodeToString(re.opcode.type),re.opcode.type===i.RNM&&(P+=`(${z[re.opcode.index].name}) `),re.opcode.type===i.BKR){const le=re.opcode.bkrCase===i.BKR_MODE_CI?"%i":"%s",F=re.opcode.bkrMode===i.BKR_MODE_UM?"%u":"%p";P+=`(\\${le}${F}${z[re.opcode.index].name}) `}re.opcode.type===i.UDT&&(P+=`(${q[re.opcode.index].name}) `),re.opcode.type===i.TRG&&(P+=`(${V($,re.opcode)}) `),re.opcode.type===i.TBS&&(P+=`(${x($,re.opcode)}) `),re.opcode.type===i.TLS&&(P+=`(${w($,re.opcode)}) `),re.opcode.type===i.REP&&(P+=`(${O($,re.opcode)}) `),he&&(P+="</span>"),P+="</td>",P+="<td>",ue?P+=B($,K,re.state,re.phraseIndex,re.phraseLength,ee):oe?P+=g($,K,re.state,re.phraseIndex,re.phraseLength):P+=Y($,K,re.state,re.phraseIndex,re.phraseLength),P+=`</td></tr>
`}),P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,P+=`</table>
`,P};this.toHtml=function($,P){let G=b;if(typeof $=="string"&&$.length>=3){const oe=$.toLowerCase().slice(0,3);oe==="hex"?G=a:oe==="dec"?G=h:oe==="uni"&&(G=p)}let te="";return te+=R(G,P),te+=Q(G),te+=D(),te}},zn={ast:Wx,circular:Xl,ids:br,parser:Jx,stats:Yx,trace:Xx,utils:ft,emitcss:Yl,style:Ts},so,Ic;function Zx(){return Ic||(Ic=1,so=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let t="";return t+=`file = *line [last-line]
`,t+=`line = line-text end
`,t+=`line-text = *(valid/invalid)
`,t+=`last-line = 1*(valid/invalid)
`,t+=`valid = %d32-126 / %d9
`,t+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,t+=`end = CRLF / LF / CR
`,t+=`CRLF = %d13.10
`,t+=`LF = %d10
`,t+=`CR = %d13
`,t}}),so}var oo={},Lc;function Qx(){if(Lc)return oo;Lc=1;const n=br,e=ft;function t(d,E,v,T,A){return d===n.SEM_PRE?(A.endLength=0,A.textLength=0,A.invalidCount=0):A.lines.push({lineNo:A.lines.length,beginChar:v,length:T,textLength:A.textLength,endType:A.endType,invalidChars:A.invalidCount}),n.SEM_OK}function r(d,E,v,T,A){return d===n.SEM_PRE&&(A.textLength=T),n.SEM_OK}function i(d,E,v,T,A){return d===n.SEM_PRE?(A.endLength=0,A.textLength=0,A.invalidCount=0):A.strict?(A.lines.push({lineNo:A.lines.length,beginChar:v,length:T,textLength:T,endType:"none",invalidChars:A.invalidCount}),A.errors.push({line:A.lineNo,char:v+T,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(E.push(10),A.lines.push({lineNo:A.lines.length,beginChar:v,length:T+1,textLength:T,endType:"LF",invalidChars:A.invalidCount})),n.SEM_OK}function s(d,E,v,T,A){return d===n.SEM_PRE&&A.errors.push({line:A.lineNo,char:v,msg:`invalid character found '\\x${e.charToHex(E[v])}'`}),n.SEM_OK}function o(d,E,v,T,A){return d===n.SEM_POST&&(A.lineNo+=1),n.SEM_OK}function a(d,E,v,T,A){return d===n.SEM_PRE&&(A.endType="LF",A.strict&&A.errors.push({line:A.lineNo,char:v,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function h(d,E,v,T,A){return d===n.SEM_PRE&&(A.endType="CR",A.strict&&A.errors.push({line:A.lineNo,char:v,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function b(d,E,v,T,A){return d===n.SEM_PRE&&(A.endType="CRLF"),n.SEM_OK}const p=[];return p.line=t,p["line-text"]=r,p["last-line"]=i,p.invalid=s,p.end=o,p.lf=a,p.cr=h,p.crlf=b,oo.callbacks=p,oo}var ao,$c;function e1(){return $c||($c=1,ao=function(e,t,r,i){const s="scanner.js: ",o=zn,a=new(Zx()),{callbacks:h}=Qx(),b=[],p=new o.parser;if(p.ast=new o.ast,p.ast.callbacks=h,i){if(i.traceObject!=="traceObject")throw new TypeError(`${s}trace argument is not a trace object`);p.trace=i}if(p.parse(a,"file",e).success!==!0){t.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const E={lines:b,lineNo:0,errors:t,strict:!!r};return p.ast.translate(E),b}),ao}var co,Fc;function t1(){return Fc||(Fc=1,co=function(){const e="syntax-callbacks.js: ",t=zn,r=t.ids;let i;const s=function(w,I,B,j){switch(w.state){case r.ACTIVE:j.altStack=[],j.repCount=0;break;case r.EMPTY:j.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case r.MATCH:j.ruleCount===0&&j.errors.push({line:0,char:0,msg:"no rules defined"});break;case r.NOMATCH:throw new Error(`${e}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${e}synFile: unrecognized case.`)}},o=function(x,w,I,B){switch(x.state){case r.ACTIVE:B.altStack.length=0,i={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},B.altStack.push(i);break;case r.EMPTY:throw new Error(`${e}synRule: EMPTY: rule cannot be empty`);case r.NOMATCH:break;case r.MATCH:B.ruleCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},a=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},h=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},b=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},p=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},d=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},E=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},v=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},T=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},A=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},S=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:if(B.strict){const j=t.utils.charsToString(w,I,x.phraseLength);B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:`Back reference operator(${j}) found - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},k=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:if(B.strict){const j=t.utils.charsToString(w,I,x.phraseLength);B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:`UDT operator found(${j}) - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},L=function(x,w,I){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i.tlsOpen=I;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},K=function(x,w,I,B){switch(x.state){case r.ACTIVE:B.stringTabChar=!1;break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.stringTabChar!==!1&&B.errors.push({line:B.findLine(B.lines,B.stringTabChar),char:B.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},z=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.stringTabChar=I;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},q=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.errors.push({line:B.findLine(B.lines,i.tlsOpen),char:i.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),i.basicError=!0,i.tlsOpen=null;break;case r.MATCH:i.tlsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},U=function(x,w,I){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i.clsOpen=I;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Z=function(x,w,I,B){switch(x.state){case r.ACTIVE:B.stringTabChar=!1;break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.stringTabChar!==!1&&B.errors.push({line:B.findLine(B.lines,B.stringTabChar),char:B.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},se=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.errors.push({line:B.findLine(B.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),i.clsOpen=null,i.basicError=!0;break;case r.MATCH:B.strict&&B.errors.push({line:B.findLine(B.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),i.clsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},ne=function(x,w,I){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i.prosValOpen=I;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},J=function(x,w,I,B){switch(x.state){case r.ACTIVE:B.stringTabChar=!1;break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.stringTabChar!==!1&&B.errors.push({line:B.findLine(B.lines,B.stringTabChar),char:B.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},M=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.errors.push({line:B.findLine(B.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),i.basicError=!0,i.prosValOpen=null;break;case r.MATCH:B.errors.push({line:B.findLine(B.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),i.prosValOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},l=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i={groupOpen:I,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},B.altStack.push(i);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},u=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.errors.push({line:B.findLine(B.lines,i.groupOpen),char:i.groupOpen,msg:'Group "(...)" opened but not closed.'}),i=B.altStack.pop(),i.groupError=!0;break;case r.MATCH:i=B.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},y=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i={groupOpen:null,groupError:!1,optionOpen:I,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},B.altStack.push(i);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},C=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.errors.push({line:B.findLine(B.lines,i.optionOpen),char:i.optionOpen,msg:'Option "[...]" opened but not closed.'}),i=B.altStack.pop(),i.optionError=!0;break;case r.MATCH:i=B.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},R=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:i.basicError===!1&&B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},D=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:if(x.phraseLength===1&&B.strict){const j=w[I]===13?"CR":"LF";B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:`Line end '${j}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},V=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:break;case r.MATCH:B.errors.push({line:B.findLine(B.lines,I,B.charsLength),char:I,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},O=function(x,w,I,B){switch(x.state){case r.ACTIVE:break;case r.EMPTY:break;case r.NOMATCH:B.repCount+=1;break;case r.MATCH:B.repCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=p,this.callbacks.basicelementerr=R,this.callbacks.clsclose=se,this.callbacks.clsopen=U,this.callbacks.clsstring=Z,this.callbacks.definedaserror=b,this.callbacks.file=s,this.callbacks.groupclose=u,this.callbacks.groupopen=l,this.callbacks.lineenderror=V,this.callbacks.lineend=D,this.callbacks.notop=d,this.callbacks.optionclose=C,this.callbacks.optionopen=y,this.callbacks.prosvalclose=M,this.callbacks.prosvalopen=ne,this.callbacks.prosvalstring=J,this.callbacks.repetition=O,this.callbacks.rule=o,this.callbacks.ruleerror=a,this.callbacks.rulenameerror=h,this.callbacks.stringtab=z,this.callbacks.tlsclose=q,this.callbacks.tlsopen=L,this.callbacks.tlsstring=K,this.callbacks.udtop=k,this.callbacks.bkaop=E,this.callbacks.bknop=v,this.callbacks.bkrop=S,this.callbacks.abgop=T,this.callbacks.aenop=A}),co}var lo,Uc;function r1(){return Uc||(Uc=1,lo=function(){const e=zn,t=e.ids,r=function(){this.names=[],this.add=function(re){let le=-1;return this.get(re)===-1&&(le={name:re,lower:re.toLowerCase(),index:this.names.length},this.names.push(le)),le},this.get=function(re){let le=-1;const F=re.toLowerCase();for(let ae=0;ae<this.names.length;ae+=1)if(this.names[ae].lower===F){le=this.names[ae];break}return le}},i=function(fe,re,le){let F=0;for(let ae=re;ae<re+le;ae+=1)F=10*F+fe[ae]-48;return F},s=function(fe,re,le){let F=0;for(let ae=re;ae<re+le;ae+=1)F=2*F+fe[ae]-48;return F},o=function(fe,re,le){let F=0;for(let ae=re;ae<re+le;ae+=1){let be=fe[ae];if(be>=48&&be<=57)be-=48;else if(be>=65&&be<=70)be-=55;else if(be>=97&&be<=102)be-=87;else throw new Error("hexnum out of range");F=16*F+be}return F};function a(ee,fe,re,le,F){const ae=t.SEM_OK;if(ee===t.SEM_PRE)F.ruleNames=new r,F.udtNames=new r,F.rules=[],F.udts=[],F.rulesLineMap=[],F.opcodes=[],F.altStack=[],F.topStack=null,F.topRule=null;else if(ee===t.SEM_POST){let be;F.rules.forEach(ye=>{ye.isBkr=!1,ye.opcodes.forEach(Me=>{Me.type===t.RNM&&(be=F.ruleNames.get(Me.index.name),be===-1?(F.errors.push({line:F.findLine(F.lines,Me.index.phraseIndex,F.charsLength),char:Me.index.phraseIndex,msg:`Rule name '${Me.index.name}' used but not defined.`}),Me.index=-1):Me.index=be.index)})}),F.udts.forEach(ye=>{ye.isBkr=!1}),F.rules.forEach(ye=>{ye.opcodes.forEach(Me=>{Me.type===t.BKR&&(ye.hasBkr=!0,be=F.ruleNames.get(Me.index.name),be!==-1?(F.rules[be.index].isBkr=!0,Me.index=be.index):(be=F.udtNames.get(Me.index.name),be!==-1?(F.udts[be.index].isBkr=!0,Me.index=F.rules.length+be.index):(F.errors.push({line:F.findLine(F.lines,Me.index.phraseIndex,F.charsLength),char:Me.index.phraseIndex,msg:`Back reference name '${Me.index.name}' refers to undefined rule or unamed UDT.`}),Me.index=-1)))})})}return ae}function h(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE&&(F.altStack.length=0,F.topStack=null,F.rulesLineMap.push({line:F.findLine(F.lines,re,F.charsLength),char:re})),ae}function b(ee,fe,re,le,F){const ae=t.SEM_OK;if(ee===t.SEM_PRE)F.ruleName="",F.definedas="";else if(ee===t.SEM_POST){let be;F.definedas==="="?(be=F.ruleNames.add(F.ruleName),be===-1?(F.definedas=null,F.errors.push({line:F.findLine(F.lines,re,F.charsLength),char:re,msg:`Rule name '${F.ruleName}' previously defined.`})):(F.topRule={name:be.name,lower:be.lower,opcodes:[],index:be.index},F.rules.push(F.topRule),F.opcodes=F.topRule.opcodes)):(be=F.ruleNames.get(F.ruleName),be===-1?(F.definedas=null,F.errors.push({line:F.findLine(F.lines,re,F.charsLength),char:re,msg:`Rule name '${F.ruleName}' for incremental alternate not previously defined.`})):(F.topRule=F.rules[be.index],F.opcodes=F.topRule.opcodes))}return ae}function p(ee,fe,re,le,F){let ae=t.SEM_OK;if(ee===t.SEM_PRE)for(;;){if(F.definedas===null){ae=t.SEM_SKIP;break}if(F.topStack===null){if(F.definedas==="="){F.topStack={alt:{type:t.ALT,children:[]},cat:null},F.altStack.push(F.topStack),F.opcodes.push(F.topStack.alt);break}F.topStack={alt:F.opcodes[0],cat:null},F.altStack.push(F.topStack);break}F.topStack={alt:{type:t.ALT,children:[]},cat:null},F.altStack.push(F.topStack),F.opcodes.push(F.topStack.alt);break}else ee===t.SEM_POST&&(F.altStack.pop(),F.altStack.length>0?F.topStack=F.altStack[F.altStack.length-1]:F.topStack=null);return ae}function d(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE?(F.topStack.alt.children.push(F.opcodes.length),F.topStack.cat={type:t.CAT,children:[]},F.opcodes.push(F.topStack.cat)):ee===t.SEM_POST&&(F.topStack.cat=null),ae}function E(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE&&F.topStack.cat.children.push(F.opcodes.length),ae}function v(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.REP,min:0,max:1,char:re}),ae}function T(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE&&(F.ruleName=e.utils.charsToString(fe,re,le)),ae}function A(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.definedas="="),ae}function S(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.definedas="=/"),ae}function k(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE?(F.min=0,F.max=1/0,F.topRep={type:t.REP,min:0,max:1/0},F.opcodes.push(F.topRep)):ee===t.SEM_POST&&(F.min>F.max&&F.errors.push({line:F.findLine(F.lines,re,F.charsLength),char:re,msg:`repetition min cannot be greater than max: min: ${F.min}: max: ${F.max}`}),F.topRep.min=F.min,F.topRep.max=F.max),ae}function L(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.min=i(fe,re,le)),ae}function K(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.max=i(fe,re,le)),ae}function z(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.max=i(fe,re,le),F.min=F.max),ae}function q(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.AND}),ae}function U(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.NOT}),ae}function Z(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.RNM,index:{phraseIndex:re,name:e.utils.charsToString(fe,re,le)}}),ae}function se(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.ABG}),ae}function ne(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.AEN}),ae}function J(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.BKA}),ae}function M(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.opcodes.push({type:t.BKN}),ae}function l(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE?(F.ci=!0,F.cs=!1,F.um=!0,F.pm=!1):ee===t.SEM_POST&&F.opcodes.push({type:t.BKR,bkrCase:F.cs===!0?t.BKR_MODE_CS:t.BKR_MODE_CI,bkrMode:F.pm===!0?t.BKR_MODE_PM:t.BKR_MODE_UM,index:{phraseIndex:F.bkrname.phraseIndex,name:e.utils.charsToString(fe,F.bkrname.phraseIndex,F.bkrname.phraseLength)}}),ae}function u(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.ci=!0),ae}function y(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.cs=!0),ae}function C(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.um=!0),ae}function R(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.pm=!0),ae}function D(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.bkrname={phraseIndex:re,phraseLength:le}),ae}function V(ee,fe,re,le,F){const ae=t.SEM_OK;if(ee===t.SEM_POST){const be=e.utils.charsToString(fe,re,le);let ye=F.udtNames.add(be);if(ye===-1){if(ye=F.udtNames.get(be),ye===-1)throw new Error("semUdtEmpty: name look up error")}else F.udts.push({name:ye.name,lower:ye.lower,index:ye.index,empty:!0});F.opcodes.push({type:t.UDT,empty:!0,index:ye.index})}return ae}function O(ee,fe,re,le,F){const ae=t.SEM_OK;if(ee===t.SEM_POST){const be=e.utils.charsToString(fe,re,le);let ye=F.udtNames.add(be);if(ye===-1){if(ye=F.udtNames.get(be),ye===-1)throw new Error("semUdtNonEmpty: name look up error")}else F.udts.push({name:ye.name,lower:ye.lower,index:ye.index,empty:!1});F.opcodes.push({type:t.UDT,empty:!1,index:ye.index,syntax:null,semantic:null})}return ae}function x(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE&&(F.tlscase=!0),ae}function w(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&le>0&&(fe[re+1]===83||fe[re+1]===115)&&(F.tlscase=!1),ae}function I(ee,fe,re,le,F){const ae=t.SEM_OK;if(ee===t.SEM_POST)if(F.tlscase){const be=fe.slice(re,re+le);for(let ye=0;ye<be.length;ye+=1)be[ye]>=65&&be[ye]<=90&&(be[ye]+=32);F.opcodes.push({type:t.TLS,string:be})}else F.opcodes.push({type:t.TBS,string:fe.slice(re,re+le)});return ae}function B(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(le<=2?F.opcodes.push({type:t.TLS,string:[]}):F.opcodes.push({type:t.TBS,string:fe.slice(re+1,re+le-1)})),ae}function j(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE?F.tbsstr=[]:ee===t.SEM_POST&&F.opcodes.push({type:t.TBS,string:F.tbsstr}),ae}function g(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_PRE?(F.min=0,F.max=0):ee===t.SEM_POST&&(F.min>F.max&&F.errors.push({line:F.findLine(F.lines,re,F.charsLength),char:re,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${F.min}: max: ${F.max}`}),F.opcodes.push({type:t.TRG,min:F.min,max:F.max})),ae}function Y(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.min=i(fe,re,le)),ae}function Q(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.max=i(fe,re,le)),ae}function $(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.min=s(fe,re,le)),ae}function P(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.max=s(fe,re,le)),ae}function G(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.min=o(fe,re,le)),ae}function te(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&(F.max=o(fe,re,le)),ae}function oe(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.tbsstr.push(i(fe,re,le)),ae}function ue(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.tbsstr.push(s(fe,re,le)),ae}function he(ee,fe,re,le,F){const ae=t.SEM_OK;return ee===t.SEM_POST&&F.tbsstr.push(o(fe,re,le)),ae}this.callbacks=[],this.callbacks.abgop=se,this.callbacks.aenop=ne,this.callbacks.alternation=p,this.callbacks.andop=q,this.callbacks.bmax=P,this.callbacks.bmin=$,this.callbacks.bkaop=J,this.callbacks.bknop=M,this.callbacks.bkrop=l,this.callbacks["bkr-name"]=D,this.callbacks.bstring=ue,this.callbacks.clsop=B,this.callbacks.ci=u,this.callbacks.cs=y,this.callbacks.um=C,this.callbacks.pm=R,this.callbacks.concatenation=d,this.callbacks.defined=A,this.callbacks.dmax=Q,this.callbacks.dmin=Y,this.callbacks.dstring=oe,this.callbacks.file=a,this.callbacks.incalt=S,this.callbacks.notop=U,this.callbacks.optionopen=v,this.callbacks["rep-max"]=K,this.callbacks["rep-min"]=L,this.callbacks["rep-min-max"]=z,this.callbacks.repetition=E,this.callbacks.repop=k,this.callbacks.rnmop=Z,this.callbacks.rule=h,this.callbacks.rulelookup=b,this.callbacks.rulename=T,this.callbacks.tbsop=j,this.callbacks.tlscase=w,this.callbacks.tlsstring=I,this.callbacks.tlsop=x,this.callbacks.trgop=g,this.callbacks["udt-empty"]=V,this.callbacks["udt-non-empty"]=O,this.callbacks.xmax=te,this.callbacks.xmin=G,this.callbacks.xstring=he}),lo}var fo,Dc;function n1(){return Dc||(Dc=1,fo=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let t="";return t+=`;
`,t+=`; ABNF for JavaScript APG 2.0 SABNF
`,t+=`; RFC 5234 with some restrictions and additions.
`,t+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,t+=`;  - accepts %s"string" as a case-sensitive string
`,t+=`;  - accepts %i"string" as a case-insensitive string
`,t+=`;  - accepts "string" as a case-insensitive string
`,t+=`;
`,t+=`; Some restrictions:
`,t+=`;   1. Rules must begin at first character of each line.
`,t+=`;      Indentations on first rule and rules thereafter are not allowed.
`,t+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,t+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,t+=`;      However, a working parser cannot be generated from them.
`,t+=`;
`,t+=`; Super set (SABNF) additions:
`,t+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,t+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,t+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,t+=`;      e.g. &%d13 or &rule or !(A / B)
`,t+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,t+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,t+=`;      u_name may be used as an element but no rule definition is given.
`,t+=`;      e.g. rule = A / u_myUdt
`,t+=`;           A = "a"
`,t+=`;      would be a valid grammar.
`,t+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,t+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,t+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,t+=`; New 12/26/2015
`,t+=`;   4. Look-behind operators are accepted as element prefixes.
`,t+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,t+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,t+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,t+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,t+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,t+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,t+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,t+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,t+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,t+=`;      Back reference modifiers can be used to specify case and mode.
`,t+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,t+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,t+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,t+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,t+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;
`,t+=`File            = *(BlankLine / Rule / RuleError)
`,t+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,t+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,t+=`                / (LineEndError LineEnd))
`,t+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,t+=`RuleNameTest    = RuleName/RuleNameError
`,t+=`RuleName        = alphanum
`,t+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,t+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,t+=`DefinedAsError  = 1*2%d33-126
`,t+=`DefinedAs       = IncAlt / Defined
`,t+=`Defined         = %d61
`,t+=`IncAlt          = %d61.47
`,t+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,t+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,t+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,t+=`Concatenation   = Repetition *(CatOp Repetition)
`,t+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,t+=`Modifier        = (Predicate [RepOp])
`,t+=`                / RepOp
`,t+=`Predicate       = BkaOp
`,t+=`                / BknOp
`,t+=`                / AndOp
`,t+=`                / NotOp
`,t+=`BasicElement    = UdtOp
`,t+=`                / RnmOp
`,t+=`                / TrgOp
`,t+=`                / TbsOp
`,t+=`                / TlsOp
`,t+=`                / ClsOp
`,t+=`                / BkrOp
`,t+=`                / AbgOp
`,t+=`                / AenOp
`,t+=`                / ProsVal
`,t+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,t+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,t+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`GroupOpen       = %d40 owsp
`,t+=`GroupClose      = owsp %d41
`,t+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,t+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`OptionOpen      = %d91 owsp
`,t+=`OptionClose     = owsp %d93
`,t+=`RnmOp           = alphanum
`,t+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,t+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,t+=`cs              = '%s'
`,t+=`ci              = '%i'
`,t+=`um              = '%u'
`,t+=`pm              = '%p'
`,t+=`bkr-name        = uname / ename / rname
`,t+=`rname           = alphanum
`,t+=`uname           = %d117.95 alphanum
`,t+=`ename           = %d101.95 alphanum
`,t+=`UdtOp           = udt-empty
`,t+=`                / udt-non-empty
`,t+=`udt-non-empty   = %d117.95 alphanum
`,t+=`udt-empty       = %d101.95 alphanum
`,t+=`RepOp           = (rep-min StarOp rep-max)
`,t+=`                / (rep-min StarOp)
`,t+=`                / (StarOp rep-max)
`,t+=`                / StarOp
`,t+=`                / rep-min-max
`,t+=`AltOp           = %d47 owsp
`,t+=`CatOp           = wsp
`,t+=`StarOp          = %d42
`,t+=`AndOp           = %d38
`,t+=`NotOp           = %d33
`,t+=`BkaOp           = %d38.38
`,t+=`BknOp           = %d33.33
`,t+=`AbgOp           = %d37.94
`,t+=`AenOp           = %d37.36
`,t+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,t+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,t+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,t+=`TlsCase         = ["%i" / "%s"]
`,t+=`TlsOpen         = %d34
`,t+=`TlsClose        = %d34
`,t+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,t+=`StringTab       = %d9
`,t+=`ClsOp           = ClsOpen ClsString ClsClose
`,t+=`ClsOpen         = %d39
`,t+=`ClsClose        = %d39
`,t+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,t+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,t+=`ProsValOpen     = %d60
`,t+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,t+=`ProsValClose    = %d62
`,t+=`rep-min         = rep-num
`,t+=`rep-min-max     = rep-num
`,t+=`rep-max         = rep-num
`,t+=`rep-num         = 1*(%d48-57)
`,t+=`dString         = dnum
`,t+=`xString         = xnum
`,t+=`bString         = bnum
`,t+=`Dec             = (%d68/%d100)
`,t+=`Hex             = (%d88/%d120)
`,t+=`Bin             = (%d66/%d98)
`,t+=`dmin            = dnum
`,t+=`dmax            = dnum
`,t+=`bmin            = bnum
`,t+=`bmax            = bnum
`,t+=`xmin            = xnum
`,t+=`xmax            = xnum
`,t+=`dnum            = 1*(%d48-57)
`,t+=`bnum            = 1*%d48-49
`,t+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,t+=`;
`,t+=`; Basics
`,t+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,t+=`owsp            = *space
`,t+=`wsp             = 1*space
`,t+=`space           = %d32
`,t+=`                / %d9
`,t+=`                / comment
`,t+=`                / LineContinue
`,t+=`comment         = %d59 *(%d32-126 / %d9)
`,t+=`LineEnd         = %d13.10
`,t+=`                / %d10
`,t+=`                / %d13
`,t+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,t}}),fo}var uo,Hc;function i1(){return Hc||(Hc=1,uo=function(){const e="parser: ",t=zn,r=t.ids,i=new(t1()),s=new(r1()),o=new(n1()),a=new t.parser;a.ast=new t.ast,a.callbacks=i.callbacks,a.ast.callbacks=s.callbacks;const h=function(E,v,T){if(v<0||v>=T)return-1;for(let A=0;A<E.length;A+=1)if(v>=E[A].beginChar&&v<E[A].beginChar+E[A].length)return A;return-1},b=function(E,v){let T=-1;if(v<E.length){for(let A=v;A<E.length;A+=1)if(E[A]!==null){T=E[A];break}}return T},p=function(E){E.forEach(v=>{const T=[],A=[];let S=0;v.opcodes.forEach(k=>{k.type===r.ALT&&k.children.length===1||k.type===r.CAT&&k.children.length===1||k.type===r.REP&&k.min===1&&k.max===1?A.push(null):(A.push(S),T.push(k),S+=1)}),A.push(S),T.forEach(k=>{if(k.type===r.ALT||k.type===r.CAT)for(let L=0;L<k.children.length;L+=1)k.children[L]=b(A,k.children[L])}),v.opcodes=T})};this.syntax=function(E,v,T,A,S){if(S){if(S.traceObject!=="traceObject")throw new TypeError(`${e}trace argument is not a trace object`);a.trace=S}const k={};k.errors=T,k.strict=!!A,k.lines=v,k.findLine=h,k.charsLength=E.length,k.ruleCount=0,a.parse(o,"file",E,k).success||T.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(E,v,T){const A={};return A.errors=T,A.lines=v,A.findLine=h,A.charsLength=E.length,a.ast.translate(A),T.length?null:(p(A.rules),{rules:A.rules,udts:A.udts,lineMap:A.rulesLineMap})},this.generateSource=function(E,v,T,A,S){let k="",L,K,z,q=0,U=1/0,Z=0;const se=[],ne=[];let J=0,M=0,l=0,u=0,y=0,C=0,R=0,D=0,V=0,O=0,x=0,w=0,I=0,B=0,j=0;T.forEach(Q=>{se.push(Q.lower),q+=Q.opcodes.length,Q.opcodes.forEach($=>{switch($.type){case r.ALT:J+=1;break;case r.CAT:M+=1;break;case r.RNM:l+=1;break;case r.UDT:u+=1;break;case r.REP:y+=1;break;case r.AND:C+=1;break;case r.NOT:R+=1;break;case r.BKA:w+=1;break;case r.BKN:I+=1;break;case r.BKR:x+=1;break;case r.ABG:B+=1;break;case r.AEN:j+=1;break;case r.TLS:for(D+=1,L=0;L<$.string.length;L+=1)$.string[L]<U&&(U=$.string[L]),$.string[L]>Z&&(Z=$.string[L]);break;case r.TBS:for(V+=1,L=0;L<$.string.length;L+=1)$.string[L]<U&&(U=$.string[L]),$.string[L]>Z&&(Z=$.string[L]);break;case r.TRG:O+=1,$.min<U&&(U=$.min),$.max>Z&&(Z=$.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),se.sort(),A.length>0&&(A.forEach(Q=>{ne.push(Q.lower)}),ne.sort());let g="module.exports";S&&typeof S=="string"&&(g=`let ${S}`),k+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,k+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,k+=`//
`,k+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,k+=`${g} = function grammar(){
`,k+="  // ```\n",k+=`  // SUMMARY
`,k+=`  //      rules = ${T.length}
`,k+=`  //       udts = ${A.length}
`,k+=`  //    opcodes = ${q}
`,k+=`  //        ---   ABNF original opcodes
`,k+=`  //        ALT = ${J}
`,k+=`  //        CAT = ${M}
`,k+=`  //        REP = ${y}
`,k+=`  //        RNM = ${l}
`,k+=`  //        TLS = ${D}
`,k+=`  //        TBS = ${V}
`,k+=`  //        TRG = ${O}
`,k+=`  //        ---   SABNF superset opcodes
`,k+=`  //        UDT = ${u}
`,k+=`  //        AND = ${C}
`,k+=`  //        NOT = ${R}
`,k+=`  //        BKA = ${w}
`,k+=`  //        BKN = ${I}
`,k+=`  //        BKR = ${x}
`,k+=`  //        ABG = ${B}
`,k+=`  //        AEN = ${j}
`,k+="  // characters = [",D+V+O===0?k+=" none defined ]":k+=`${U} - ${Z}]`,u>0&&(k+=" + user defined"),k+=`
`,k+="  // ```\n",k+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,k+=`  this.grammarObject = 'grammarObject';
`,k+=`
`,k+=`  /* RULES */
`,k+=`  this.rules = [];
`,T.forEach((Q,$)=>{let P="  this.rules[";P+=$,P+="] = {name: '",P+=Q.name,P+="', lower: '",P+=Q.lower,P+="', index: ",P+=Q.index,P+=", isBkr: ",P+=Q.isBkr,P+=`};
`,k+=P}),k+=`
`,k+=`  /* UDTS */
`,k+=`  this.udts = [];
`,A.length>0&&A.forEach((Q,$)=>{let P="  this.udts[";P+=$,P+="] = {name: '",P+=Q.name,P+="', lower: '",P+=Q.lower,P+="', index: ",P+=Q.index,P+=", empty: ",P+=Q.empty,P+=", isBkr: ",P+=Q.isBkr,P+=`};
`,k+=P}),k+=`
`,k+=`  /* OPCODES */
`,T.forEach((Q,$)=>{$>0&&(k+=`
`),k+=`  /* ${Q.name} */
`,k+=`  this.rules[${$}].opcodes = [];
`,Q.opcodes.forEach((P,G)=>{let te;switch(P.type){case r.ALT:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// ALT
`;break;case r.CAT:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// CAT
`;break;case r.RNM:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}};// RNM(${T[P.index].name})
`;break;case r.BKR:P.index>=T.length?(K=A[P.index-T.length].name,z=A[P.index-T.length].lower):(K=T[P.index].name,z=T[P.index].lower),te="%i",P.bkrCase===r.BKR_MODE_CS&&(te="%s"),P.bkrMode===r.BKR_MODE_UM?te+="%u":te+="%p",K=te+K,k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}, lower: '${z}', bkrCase: ${P.bkrCase}, bkrMode: ${P.bkrMode}};// BKR(\\${K})
`;break;case r.UDT:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, empty: ${P.empty}, index: ${P.index}};// UDT(${A[P.index].name})
`;break;case r.REP:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// REP
`;break;case r.AND:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// AND
`;break;case r.NOT:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// NOT
`;break;case r.ABG:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// ABG(%^)
`;break;case r.AEN:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// AEN(%$)
`;break;case r.BKA:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// BKA
`;break;case r.BKN:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}};// BKN
`;break;case r.TLS:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TLS
`;break;case r.TBS:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TBS
`;break;case r.TRG:k+=`  this.rules[${$}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),k+=`
`,k+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",k+=`  this.toString = function toString(){
`,k+=`    let str = "";
`;let Y;return v.forEach(Q=>{const $=Q.beginChar+Q.length;Y="",k+='    str += "';for(let P=Q.beginChar;P<$;P+=1){switch(E[P]){case 9:Y=" ";break;case 10:Y="\\n";break;case 13:Y="\\r";break;case 34:Y='\\"';break;case 92:Y="\\\\";break;default:Y=String.fromCharCode(E[P]);break}k+=Y}k+=`";
`}),k+=`    return str;
`,k+=`  }
`,k+=`}
`,k},this.generateObject=function(E,v,T){const A={},S=[],k=[],L=E.slice(0);return A.grammarObject="grammarObject",v.forEach(K=>{S.push(K.lower)}),S.sort(),T.length>0&&(T.forEach(K=>{k.push(K.lower)}),k.sort()),A.callbacks=[],S.forEach(K=>{A.callbacks[K]=!1}),T.length>0&&k.forEach(K=>{A.callbacks[K]=!1}),A.rules=v,A.udts=T,A.toString=function(){return L},A}}),uo}var ho,Gc;function s1(){return Gc||(Gc=1,ho=function(){const e=br,t="rule-attributes.js";let r=null;function i(J){return J.left||J.nested||J.right||J.cyclic?!1:J.empty}function s(J){return!!(J.left||J.nested||J.right||J.cyclic)}function o(J,M){let l=0,u=0,y=0;for(l=0;l<M;l+=1)if(J[l].nested)return!0;for(l=0;l<M;l+=1)if(J[l].right&&!J[l].leaf){for(u=l+1;u<M;u+=1)if(!i(J[u]))return!0}for(l=M-1;l>=0;l-=1)if(J[l].left&&!J[l].leaf){for(u=l-1;u>=0;u-=1)if(!i(J[u]))return!0}for(l=0;l<M;l+=1)if(!J[l].empty&&!s(J[l])){for(u=l+1;u<M;u+=1)if(s(J[u])){for(y=u+1;y<M;y+=1)if(!J[y].empty&&!s(J[y]))return!0}}return!1}function a(J,M){for(let l=0;l<M;l+=1)if(!J[l].cyclic)return!1;return!0}function h(J,M){for(let l=0;l<M;l+=1){if(J[l].left)return!0;if(!J[l].empty)return!1}return!1}function b(J,M){for(let l=M-1;l>=0;l-=1){if(J[l].right)return!0;if(!J[l].empty)return!1}return!1}function p(J,M){for(let l=0;l<M;l+=1)if(!J[l].empty)return!1;return!0}function d(J,M){for(let l=0;l<M;l+=1)if(!J[l].finite)return!1;return!0}function E(J,M,l,u){let y=0;const C=M[l],R=C.children.length,D=[];for(y=0;y<R;y+=1)D.push(J.attrGen());for(y=0;y<R;y+=1)A(J,M,C.children[y],D[y]);u.left=h(D,R),u.right=b(D,R),u.nested=o(D,R),u.empty=p(D,R),u.finite=d(D,R),u.cyclic=a(D,R)}function v(J,M,l,u){let y=0;const C=M[l],R=C.children.length,D=[];for(y=0;y<R;y+=1)D.push(J.attrGen());for(y=0;y<R;y+=1)A(J,M,C.children[y],D[y]);for(u.left=!1,u.right=!1,u.nested=!1,u.empty=!1,u.finite=!1,u.cyclic=!1,y=0;y<R;y+=1)D[y].left&&(u.left=!0),D[y].nested&&(u.nested=!0),D[y].right&&(u.right=!0),D[y].empty&&(u.empty=!0),D[y].finite&&(u.finite=!0),D[y].cyclic&&(u.cyclic=!0)}function T(J,M,l,u){const y=M[l];y.index>=J.ruleCount?(u.empty=J.udts[y.index-J.ruleCount].empty,u.finite=!0):(S(J,y.index,u),u.left=!1,u.nested=!1,u.right=!1,u.cyclic=!1)}function A(J,M,l,u){J.attrInit(u);const y=M[l];switch(y.type){case e.ALT:v(J,M,l,u);break;case e.CAT:E(J,M,l,u);break;case e.REP:A(J,M,l+1,u),y.min===0&&(u.empty=!0,u.finite=!0);break;case e.RNM:S(J,M[l].index,u);break;case e.BKR:T(J,M,l,u);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:A(J,M,l+1,u),u.empty=!0;break;case e.TLS:u.empty=!M[l].string.length,u.finite=!0,u.cyclic=!1;break;case e.TBS:case e.TRG:u.empty=!1,u.finite=!0,u.cyclic=!1;break;case e.UDT:u.empty=y.empty,u.finite=!0,u.cyclic=!1;break;case e.ABG:case e.AEN:u.empty=!0,u.finite=!0,u.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${y}`)}}function S(J,M,l){const u=J.attrsWorking[M];u.isComplete?J.attrCopy(l,u):u.isOpen?M===J.startRule?M===J.startRule&&(l.left=!0,l.right=!0,l.cyclic=!0,l.leaf=!0):l.finite=!0:(u.isOpen=!0,A(J,u.rule.opcodes,0,l),u.left=l.left,u.right=l.right,u.nested=l.nested,u.empty=l.empty,u.finite=l.finite,u.cyclic=l.cyclic,u.leaf=!1,u.isOpen=!1,u.isComplete=!0)}const k=J=>{r=J;let M=0,l=0;const u=r.attrGen();for(M=0;M<r.ruleCount;M+=1){for(l=0;l<r.ruleCount;l+=1)r.attrInit(r.attrsWorking[l]);r.startRule=M,S(r,M,u),r.attrCopy(r.attrs[M],r.attrsWorking[M])}r.attributesComplete=!0;let y=null;for(M=0;M<r.ruleCount;M+=1)if(y=r.attrs[M],y.left||!y.finite||y.cyclic){const C=r.attrGen(y.rule);r.attrCopy(C,y),r.attrsErrors.push(C),r.attrsErrorCount+=1}},L=J=>J?"t":"f",K=J=>J?"e":"f",z=J=>J?"t":"e",q=(J,M,l,u)=>{let y=`${J}:${M}:`;return y+=`${K(l.left)} `,y+=`${L(l.nested)} `,y+=`${L(l.right)} `,y+=`${K(l.cyclic)} `,y+=`${z(l.finite)} `,y+=`${L(l.empty)}:`,y+=`${r.typeToString(u.recursiveType)}:`,y+=u.recursiveType===e.ATTR_MR?u.groupNumber:"-",y+=`:${l.rule.name}
`,y},U=()=>{let J=`LEGEND - t=true, f=false, e=error
`;return J+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,J},Z=()=>{let J=null,M=null,l="";if(l+=`RULE ATTRIBUTES WITH ERRORS
`,l+=U(),r.attrsErrorCount)for(let u=0;u<r.attrsErrorCount;u+=1)J=r.attrsErrors[u],M=r.ruleDeps[J.rule.index],l+=q(u,J.rule.index,J,M);else l+=`<none>
`;return l},se=J=>{let M=0,l=0,u=null,y=null,C="",{ruleIndexes:R}=r;for(J===97?R=r.ruleAlphaIndexes:J===116&&(R=r.ruleTypeIndexes),M=0;M<r.ruleCount;M+=1)l=R[M],u=r.attrs[l],y=r.ruleDeps[l],C+=q(M,l,u,y);return C};return{ruleAttributes:k,showAttributes:(J="index")=>{if(!r.attributesComplete)throw new Error(`${t}:showAttributes: attributes not available`);let M="";const l=`RULE ATTRIBUTES
`;return J.charCodeAt(0)===97?(M+=`alphabetical by rule name
`,M+=l,M+=U(),M+=se(97)):J.charCodeAt(0)===116?(M+=`ordered by rule type
`,M+=l,M+=U(),M+=se(116)):(M+=`ordered by rule index
`,M+=l,M+=U(),M+=se()),M},showAttributeErrors:Z}}()),ho}var po,Kc;function o1(){return Kc||(Kc=1,po=(()=>{const n=br;let e=null;const t=(o,a,h,b)=>{let p=0,d=0;const E=a[h];b[h]=!0;const v=E.rule.opcodes;for(p=0;p<v.length;p+=1){const T=v[p];if(T.type===n.RNM)for(E.refersTo[T.index]=!0,b[T.index]||t(o,a,T.index,b),d=0;d<o;d+=1)a[T.index].refersTo[d]&&(E.refersTo[d]=!0);else T.type===n.UDT?E.refersToUdt[T.index]=!0:T.type===n.BKR&&(T.index<o?(E.refersTo[T.index]=!0,b[T.index]||t(o,a,T.index,b)):E.refersToUdt[o-T.index]=!0)}},r=o=>{e=o;let a=0,h=0,b=0,p=null,d=null,E=!1;e.dependenciesComplete=!1;const v=e.falseArray(e.ruleCount);for(a=0;a<e.ruleCount;a+=1)e.falsifyArray(v),t(e.ruleCount,e.ruleDeps,a,v);for(a=0;a<e.ruleCount;a+=1)for(h=0;h<e.ruleCount;h+=1)a!==h&&e.ruleDeps[h].refersTo[a]&&(e.ruleDeps[a].referencedBy[h]=!0);for(a=0;a<e.ruleCount;a+=1)e.ruleDeps[a].recursiveType=n.ATTR_N,e.ruleDeps[a].refersTo[a]&&(e.ruleDeps[a].recursiveType=n.ATTR_R);for(b=-1,a=0;a<e.ruleCount;a+=1)if(p=e.ruleDeps[a],p.recursiveType===n.ATTR_R)for(E=!0,h=0;h<e.ruleCount;h+=1)a!==h&&(d=e.ruleDeps[h],d.recursiveType===n.ATTR_R&&p.refersTo[h]&&d.refersTo[a]&&(E&&(b+=1,p.recursiveType=n.ATTR_MR,p.groupNumber=b,E=!1),d.recursiveType=n.ATTR_MR,d.groupNumber=b));e.isMutuallyRecursive=b>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},i=(o=null)=>{let a=0,h=0,b=0,p=0;const d=e.ruleCount-1,E=e.udtCount-1,v=100;let T="",A="";const S="=> ",k="<= ";let L=!1,K=null,{ruleIndexes:z}=e,{udtIndexes:q}=e;for(o===97?(z=e.ruleAlphaIndexes,q=e.udtAlphaIndexes):o===116&&(z=e.ruleTypeIndexes,q=e.udtAlphaIndexes),a=0;a<e.ruleCount;a+=1){for(K=e.ruleDeps[z[a]],A=`${z[a]}:${e.typeToString(K.recursiveType)}:`,e.isMutuallyRecursive&&(A+=K.groupNumber>-1?K.groupNumber:"-",A+=":"),A+=" ",T+=`${A+e.rules[z[a]].name}
`,L=!0,b=0,p=T.length,T+=A,h=0;h<e.ruleCount;h+=1)K.refersTo[z[h]]&&(L?(T+=S,L=!1,T+=e.ruleDeps[z[h]].rule.name):T+=`, ${e.ruleDeps[z[h]].rule.name}`,b+=1),T.length-p>v&&h!==d&&(T+=`
${A}${S}`,p=T.length);if(e.udtCount)for(h=0;h<e.udtCount;h+=1)K.refersToUdt[q[h]]&&(L?(T+=S,L=!1,T+=e.udts[q[h]].name):T+=`, ${e.udts[q[h]].name}`,b+=1),T.length-p>v&&h!==E&&(T+=`
${A}${S}`,p=T.length);for(b===0&&(T+=`=> <none>
`),L===!1&&(T+=`
`),L=!0,b=0,p=T.length,T+=A,h=0;h<e.ruleCount;h+=1)K.referencedBy[z[h]]&&(L?(T+=k,L=!1,T+=e.ruleDeps[z[h]].rule.name):T+=`, ${e.ruleDeps[z[h]].rule.name}`,b+=1),T.length-p>v&&h!==d&&(T+=`
${A}${S}`,p=T.length);b===0&&(T+=`<= <none>
`),L===!1&&(T+=`
`),T+=`
`}return T};return{ruleDependencies:r,showRuleDependencies:(o="index")=>{let a=`RULE DEPENDENCIES(index:type:[group number:])
`;return a+=`=> refers to rule names
`,a+=`<= referenced by rule names
`,e.dependenciesComplete&&(o.charCodeAt(0)===97?(a+=`alphabetical by rule name
`,a+=i(97)):o.charCodeAt(0)===116?(a+=`ordered by rule type
`,a+=i(116)):(a+=`ordered by rule index
`,a+=i(null))),a}}})()),po}var xo,zc;function a1(){return zc||(zc=1,xo=function(){const e=br,{ruleAttributes:t,showAttributes:r,showAttributeErrors:i}=s1(),{ruleDependencies:s,showRuleDependencies:o}=o1();class a{constructor(p,d){this.rules=p,this.udts=d,this.ruleCount=p.length,this.udtCount=d.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let E=0;E<this.ruleCount;E+=1)this.attrs.push(this.attrGen(this.rules[E])),this.attrsWorking.push(this.attrGen(this.rules[E])),this.ruleDeps.push(this.rdGen(p[E],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(p){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:p}}attrInit(p){p.left=!1,p.nested=!1,p.right=!1,p.empty=!1,p.finite=!1,p.cyclic=!1,p.leaf=!1,p.isOpen=!1,p.isComplete=!1}attrCopy(p,d){p.left=d.left,p.nested=d.nested,p.right=d.right,p.empty=d.empty,p.finite=d.finite,p.cyclic=d.cyclic,p.leaf=d.leaf,p.isOpen=d.isOpen,p.isComplete=d.isComplete,p.rule=d.rule}rdGen(p,d,E){return{rule:p,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(d),refersToUdt:this.falseArray(E),referencedBy:this.falseArray(d)}}typeToString(p){switch(p){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(p){const d=[];if(p>0)for(let E=0;E<p;E+=1)d.push(!1);return d}falsifyArray(p){for(let d=0;d<p.length;d+=1)p[d]=!1}indexArray(p){const d=[];if(p>0)for(let E=0;E<p;E+=1)d.push(E);return d}compRulesAlpha(p,d){return this.rules[p].lower<this.rules[d].lower?-1:this.rules[p].lower>this.rules[d].lower?1:0}compUdtsAlpha(p,d){return this.udts[p].lower<this.udts[d].lower?-1:this.udts[p].lower>this.udts[d].lower?1:0}compRulesType(p,d){return this.ruleDeps[p].recursiveType<this.ruleDeps[d].recursiveType?-1:this.ruleDeps[p].recursiveType>this.ruleDeps[d].recursiveType?1:0}compRulesGroup(p,d){if(this.ruleDeps[p].recursiveType===e.ATTR_MR&&this.ruleDeps[d].recursiveType===e.ATTR_MR){if(this.ruleDeps[p].groupNumber<this.ruleDeps[d].groupNumber)return-1;if(this.ruleDeps[p].groupNumber>this.ruleDeps[d].groupNumber)return 1}return 0}}return{attributes:function(p=[],d=[],E=[],v=[]){const T=new a(p,d);return s(T),t(T),T.attrsErrorCount&&v.push({line:0,char:0,msg:`${T.attrsErrorCount} attribute errors`}),T.attrsErrorCount},showAttributes:r,showAttributeErrors:i,showRuleDependencies:o}}()),xo}var bo,jc;function c1(){return jc||(jc=1,bo=function(){const e="show-rules.js";return function(i=[],s=[],o="index"){const a="showRules";let h=[],b=[];const p=[],d=[],E=i,v=s,T=i.length,A=s.length;let S="RULE/UDT NAMES",k;function L(z,q){return E[z].lower<E[q].lower?-1:E[z].lower>E[q].lower?1:0}function K(z,q){return v[z].lower<v[q].lower?-1:v[z].lower>v[q].lower?1:0}if(!(Array.isArray(i)&&i.length))throw new Error(`${e}:${a}: rules arg must be array with length > 0`);if(!Array.isArray(s))throw new Error(`${e}:${a}: udts arg must be array`);for(k=0;k<T;k+=1)p.push(k);if(h=p.slice(0),h.sort(L),A){for(k=0;k<A;k+=1)d.push(k);b=d.slice(0),b.sort(K)}if(o.charCodeAt(0)===97){for(S+=` - alphabetical by rule/UDT name
`,k=0;k<T;k+=1)S+=`${k}: ${h[k]}: ${E[h[k]].name}
`;if(A)for(k=0;k<A;k+=1)S+=`${k}: ${b[k]}: ${v[b[k]].name}
`}else{for(S+=` - ordered by rule/UDT index
`,k=0;k<T;k+=1)S+=`${k}: ${E[k].name}
`;if(A)for(k=0;k<A;k+=1)S+=`${k}: ${v[k].name}
`}return S}}()),bo}var l1=function(e){const t="api.js: ",r=this,i=zn,s=Jl(),o=e1(),a=new(i1()),{attributes:h,showAttributes:b,showAttributeErrors:p,showRuleDependencies:d}=a1(),E=c1(),v=function(J,M,l){const R=`<span class="${i.style.CLASS_CTRLCHAR}">`,D="</span>",V=`<span class="${i.style.CLASS_NOMATCH}">`,O="</span>";let x,w="";const I=!0;for(;I&&!(!Array.isArray(J)||J.length===0);){if(typeof M!="number")throw new Error("abnfToHtml: beg must be type number");if(M>=J.length)break;typeof l!="number"||M+l>=J.length?x=J.length:x=M+l;let B=0;for(let j=M;j<x;j+=1){const g=J[j];if(g>=32&&g<=126)switch(B===1?(w+=D,B=0):B===2&&(w+=O,B=0),g){case 32:w+="&nbsp;";break;case 60:w+="&lt;";break;case 62:w+="&gt;";break;case 38:w+="&amp;";break;case 34:w+="&quot;";break;case 39:w+="&#039;";break;case 92:w+="&#092;";break;default:w+=String.fromCharCode(g);break}else g===9||g===10||g===13?(B===0?(w+=R,B=1):B===2&&(w+=O+R,B=1),g===9&&(w+="TAB"),g===10&&(w+="LF"),g===13&&(w+="CR")):(B===0?(w+=V,B=2):B===1&&(w+=D+V,B=2),w+=`\\x${i.utils.charToHex(g)}`)}B===2&&(w+=O),B===1&&(w+=D);break}return w},T=function(J,M,l){let u="";for(let y=M;y<M+l;y+=1){const C=J[y];if(C>=32&&C<=126)u+=String.fromCharCode(C);else switch(C){case 9:u+="\\t";break;case 10:u+="\\n";break;case 13:u+="\\r";break;default:u+="\\unknown";break}}return u},A=function(J){let M="Annotated Input Grammar";return J.forEach(l=>{M+=`
`,M+=`line no: ${l.lineNo}`,M+=` : char index: ${l.beginChar}`,M+=` : length: ${l.length}`,M+=` : abnf: ${T(r.chars,l.beginChar,l.length)}`}),M+=`
`,M},S=function(J){let M="";return M+=`<table class="${i.style.CLASS_GRAMMAR}">
`,M+=`<caption>Annotated Input Grammar</caption>
`,M+="<tr>",M+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",M+=`</tr>
`,J.forEach(u=>{M+="<tr>",M+=`<td>${u.lineNo}`,M+=`</td><td>${u.beginChar}`,M+=`</td><td>${u.length}`,M+=`</td><td>${v(r.chars,u.beginChar,u.length)}`,M+="</td>",M+=`</tr>
`}),M+=`</table>
`,M},k=function(J,M,l,u){const[y]=i;let C="";const R=`<span class="${y.CLASS_NOMATCH}">&raquo;</span>`;return C+=`<p><table class="${y.CLASS_GRAMMAR}">
`,u&&typeof u=="string"&&(C+=`<caption>${u}</caption>
`),C+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,J.forEach(D=>{let V,O,x,w,I,B="",j="";M.length===0?(I=R,O=0):(V=M[D.line],x=V.beginChar,D.char>x&&(B=v(l,x,D.char-x)),x=D.char,w=V.beginChar+V.length,x<w&&(j=v(l,x,w-x)),I=B+R+j,O=D.char-V.beginChar,C+="<tr>",C+=`<td>${D.line}</td><td>${V.beginChar}</td><td>${O}</td><td>${I}</td>`,C+=`</tr>
`,C+="<tr>",C+=`<td colspan="3"></td><td>&uarr;:&nbsp;${i.utils.stringToAsciiHtml(D.msg)}</td>`,C+=`</tr>
`)}),C+=`</table></p>
`,C},L=function(J,M,l){let u,y,C,R;return u="",J.forEach(D=>{y=M[D.line],u+=`${y.lineNo}: `,u+=`${y.beginChar}: `,u+=`${D.char-y.beginChar}: `,C=y.beginChar,R=D.char-y.beginChar,u+=T(l,C,R),u+=" >> ",C=D.char,R=y.beginChar+y.length-D.char,u+=T(l,C,R),u+=`
`,u+=`${y.lineNo}: `,u+=`${y.beginChar}: `,u+=`${D.char-y.beginChar}: `,u+="error: ",u+=D.msg,u+=`
`}),u};let K=!1,z=!1,q=!1,U=!1,Z=0,se;if(this.errors=[],Buffer.isBuffer(e))this.chars=s.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if(typeof e=="string")this.chars=s.decode("STRING",e);else throw new Error(`${t}input source is not a string, byte Buffer or character array`);this.sabnf=s.encode("STRING",this.chars),this.scan=function(J,M){this.lines=o(this.chars,this.errors,J,M),K=!0},this.parse=function(J,M){if(!K)throw new Error(`${t}grammar not scanned`);a.syntax(this.chars,this.lines,this.errors,J,M),z=!0},this.translate=function(){if(!z)throw new Error(`${t}grammar not scanned and parsed`);const J=a.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=J.rules,this.udts=J.udts,se=J.lineMap,q=!0)},this.attributes=function(){if(!q)throw new Error(`${t}grammar not scanned, parsed and translated`);return Z=h(this.rules,this.udts,se,this.errors),U=!0,Z},this.generate=function(J){if(this.lines=o(this.chars,this.errors,J),this.errors.length||(a.syntax(this.chars,this.lines,this.errors,J),this.errors.length))return;const M=a.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=M.rules,this.udts=M.udts,se=M.lineMap,Z=h(this.rules,this.udts,se,this.errors),U=!0)},this.displayRules=function(J="index"){if(!q)throw new Error(`${t}grammar not scanned, parsed and translated`);return E(this.rules,this.udts,J)},this.displayRuleDependencies=function(J="index"){if(!U)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return d(J)},this.displayAttributes=function(J="index"){if(!U)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return Z&&p(J),b(J)},this.displayAttributeErrors=function(){if(!U)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return p()},this.toSource=function(J){if(!U)throw new Error(`${t}can't generate parser source - must be preceeded by call to attributes()`);if(Z)throw new Error(`${t}can't generate parser source - attributes have ${Z} errors`);return a.generateSource(this.chars,this.lines,this.rules,this.udts,J)},this.toObject=function(){if(!U)throw new Error(`${t}can't generate parser source - must be preceeded by call to attributes()`);if(Z)throw new Error(`${t}can't generate parser source - attributes have ${Z} errors`);return a.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return L(this.errors,this.lines,this.chars)},this.errorsToHtml=function(J){return k(this.errors,this.lines,this.chars,J)},this.linesToAscii=function(){return A(this.lines)},this.linesToHtml=function(){return S(this.lines)}},Zl=Lt&&Lt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(As,"__esModule",{value:!0});As.ParsedMessage=void 0;const f1=Zl(l1),Tt=Zl(zn),u1=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = authority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = 1*( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;let h1=class{constructor(e){const t=new f1.default(u1);if(t.generate(),t.errors.length)throw console.error(t.errorsToAscii()),console.error(t.linesToAscii()),console.log(t.displayAttributeErrors()),new Error("ABNF grammar has errors");const r=t.toObject(),i=new Tt.default.parser;i.ast=new Tt.default.ast;const s=Tt.default.ids,o=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.domain=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks.domain=o;const a=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.address=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks.address=a;const h=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.statement=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks.statement=h;const b=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.uri||(se.uri=Tt.default.utils.charsToString(q,U,Z))),ne};i.ast.callbacks.uri=b;const p=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.version=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks.version=p;const d=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.chainId=parseInt(Tt.default.utils.charsToString(q,U,Z))),ne};i.ast.callbacks["chain-id"]=d;const E=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.nonce=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks.nonce=E;const v=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.issuedAt=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks["issued-at"]=v;const T=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.expirationTime=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks["expiration-time"]=T;const A=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.notBefore=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks["not-before"]=A;const S=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.requestId=Tt.default.utils.charsToString(q,U,Z)),ne};i.ast.callbacks["request-id"]=S;const k=function(z,q,U,Z,se){const ne=s.SEM_OK;return z===s.SEM_PRE&&(se.resources=Tt.default.utils.charsToString(q,U,Z).slice(3).split(`
- `)),ne};i.ast.callbacks.resources=k;const L=i.parse(r,"sign-in-with-ethereum",e);if(!L.success)throw new Error(`Invalid message: ${JSON.stringify(L)}`);const K={};i.ast.translate(K);for(const[z,q]of Object.entries(K))this[z]=q}};As.ParsedMessage=h1;var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.ParsedMessage=void 0;const d1="(?<domain>([^?#]*)) wants you to sign in with your Ethereum account:",p1="\\n(?<address>0x[a-zA-Z0-9]{40})\\n\\n",x1="((?<statement>[^\\n]+)\\n)?",Ql="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))",b1=`\\nURI: (?<uri>${Ql}?)`,m1="\\nVersion: (?<version>1)",g1="\\nChain ID: (?<chainId>[0-9]+)",y1="\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})",Ea="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",w1=`\\nIssued At: (?<issuedAt>${Ea})`,v1=`(\\nExpiration Time: (?<expirationTime>${Ea}))?`,E1=`(\\nNot Before: (?<notBefore>${Ea}))?`,A1="(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?",T1=`(\\nResources:(?<resources>(\\n- ${Ql}?)+))?`,k1=`^${d1}${p1}${x1}${b1}${m1}${g1}${y1}${w1}${v1}${E1}${A1}${T1}$`;class S1{constructor(e){var t,r,i,s,o,a,h,b,p,d,E,v,T;let S=new RegExp(k1,"g").exec(e);if(!S)throw new Error("Message did not match the regular expression.");this.match=S,this.domain=(t=S?.groups)===null||t===void 0?void 0:t.domain,this.address=(r=S?.groups)===null||r===void 0?void 0:r.address,this.statement=(i=S?.groups)===null||i===void 0?void 0:i.statement,this.uri=(s=S?.groups)===null||s===void 0?void 0:s.uri,this.version=(o=S?.groups)===null||o===void 0?void 0:o.version,this.nonce=(a=S?.groups)===null||a===void 0?void 0:a.nonce,this.chainId=parseInt((h=S?.groups)===null||h===void 0?void 0:h.chainId),this.issuedAt=(b=S?.groups)===null||b===void 0?void 0:b.issuedAt,this.expirationTime=(p=S?.groups)===null||p===void 0?void 0:p.expirationTime,this.notBefore=(d=S?.groups)===null||d===void 0?void 0:d.notBefore,this.requestId=(E=S?.groups)===null||E===void 0?void 0:E.requestId,this.resources=(T=(v=S?.groups)===null||v===void 0?void 0:v.resources)===null||T===void 0?void 0:T.split(`
- `).slice(1)}}ks.ParsedMessage=S1;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsedMessageRegExp=n.ParsedMessage=void 0;const e=As;Object.defineProperty(n,"ParsedMessage",{enumerable:!0,get:function(){return e.ParsedMessage}});const t=ks;Object.defineProperty(n,"ParsedMessageRegExp",{enumerable:!0,get:function(){return t.ParsedMessage}})})(Wl);(function(n){var e=Lt&&Lt.__awaiter||function(b,p,d,E){function v(T){return T instanceof d?T:new d(function(A){A(T)})}return new(d||(d=Promise))(function(T,A){function S(K){try{L(E.next(K))}catch(z){A(z)}}function k(K){try{L(E.throw(K))}catch(z){A(z)}}function L(K){K.done?T(K.value):v(K.value).then(S,k)}L((E=E.apply(b,p||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.generateNonce=n.checkContractWalletSignature=n.SiweMessage=n.SignatureType=n.ErrorTypes=void 0;const t=Hl,r=zx,i=Wl;var s;(function(b){b.INVALID_SIGNATURE="Invalid signature.",b.EXPIRED_MESSAGE="Expired message.",b.MALFORMED_SESSION="Malformed session."})(s=n.ErrorTypes||(n.ErrorTypes={})),function(b){b.PERSONAL_SIGNATURE="Personal signature"}(n.SignatureType||(n.SignatureType={}));class o{constructor(p){if(typeof p=="string"){const d=new i.ParsedMessage(p);this.domain=d.domain,this.address=d.address,this.statement=d.statement,this.uri=d.uri,this.version=d.version,this.nonce=d.nonce,this.issuedAt=d.issuedAt,this.expirationTime=d.expirationTime,this.notBefore=d.notBefore,this.requestId=d.requestId,this.chainId=d.chainId,this.resources=d.resources}else Object.assign(this,p),typeof this.chainId=="string"&&(this.chainId=parseInt(this.chainId))}regexFromMessage(p){return new i.ParsedMessageRegExp(p).match}toMessage(){const p=`${this.domain} wants you to sign in with your Ethereum account:`,d=`URI: ${this.uri}`;let E=[p,this.address].join(`
`);const v=`Version: ${this.version}`;this.nonce||(this.nonce=(0,n.generateNonce)());const T="Chain ID: "+this.chainId||"1",A=`Nonce: ${this.nonce}`,S=[d,v,T,A];if(this.issuedAt&&Date.parse(this.issuedAt),this.issuedAt=this.issuedAt?this.issuedAt:new Date().toISOString(),S.push(`Issued At: ${this.issuedAt}`),this.expirationTime){const L=`Expiration Time: ${this.expirationTime}`;S.push(L)}this.notBefore&&S.push(`Not Before: ${this.notBefore}`),this.requestId&&S.push(`Request ID: ${this.requestId}`),this.resources&&S.push(["Resources:",...this.resources.map(L=>`- ${L}`)].join(`
`));let k=S.join(`
`);return E=[E,this.statement].join(`

`),this.statement&&(E+=`
`),[E,k].join(`
`)}signMessage(){return console&&console.warn&&console.warn("signMessage method is deprecated, use prepareMessage instead."),this.prepareMessage()}prepareMessage(){let p;switch(this.version){case"1":{p=this.toMessage();break}default:{p=this.toMessage();break}}return p}validate(p=this.signature,d){return e(this,void 0,void 0,function*(){return new Promise((E,v)=>e(this,void 0,void 0,function*(){const T=this.prepareMessage();try{let A=[];if(T||A.push("`message`"),p||A.push("`signature`"),this.address||A.push("`address`"),A.length>0)throw new Error(`${s.MALFORMED_SESSION} missing: ${A.join(", ")}.`);let S;try{S=r.ethers.utils.verifyMessage(T,p)}catch{}finally{if(S!==this.address)try{if(!(yield(0,n.checkContractWalletSignature)(this,p,d)))throw new Error(`${s.INVALID_SIGNATURE}: ${S} !== ${this.address}`)}catch(L){throw L}}const k=new o(T);if(k.expirationTime){const L=new Date(k.expirationTime).getTime();if(isNaN(L))throw new Error(`${s.MALFORMED_SESSION} invalid expiration date.`);if(new Date().getTime()>=L)throw new Error(s.EXPIRED_MESSAGE)}E(k)}catch(A){v(A)}}))})}}n.SiweMessage=o;const a=(b,p,d)=>e(void 0,void 0,void 0,function*(){if(!d)return!1;const E=["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bool)"];try{const v=new r.Contract(b.address,E,d),T=r.utils.hashMessage(b.signMessage());return yield v.isValidSignature(T,p)}catch(v){throw v}});n.checkContractWalletSignature=a;const h=()=>(0,t.randomStringForEntropy)(96);n.generateNonce=h})(Dl);(function(n){var e=Lt&&Lt.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),t=Lt&&Lt.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(Dl,n)})(Ul);var ef={},Ss={};Ss.byteLength=C1;Ss.toByteArray=N1;Ss.fromByteArray=O1;var nr=[],Ut=[],_1=typeof Uint8Array<"u"?Uint8Array:Array,mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var vn=0,M1=mo.length;vn<M1;++vn)nr[vn]=mo[vn],Ut[mo.charCodeAt(vn)]=vn;Ut["-".charCodeAt(0)]=62;Ut["_".charCodeAt(0)]=63;function tf(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function C1(n){var e=tf(n),t=e[0],r=e[1];return(t+r)*3/4-r}function R1(n,e,t){return(e+t)*3/4-t}function N1(n){var e,t=tf(n),r=t[0],i=t[1],s=new _1(R1(n,r,i)),o=0,a=i>0?r-4:r,h;for(h=0;h<a;h+=4)e=Ut[n.charCodeAt(h)]<<18|Ut[n.charCodeAt(h+1)]<<12|Ut[n.charCodeAt(h+2)]<<6|Ut[n.charCodeAt(h+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ut[n.charCodeAt(h)]<<2|Ut[n.charCodeAt(h+1)]>>4,s[o++]=e&255),i===1&&(e=Ut[n.charCodeAt(h)]<<10|Ut[n.charCodeAt(h+1)]<<4|Ut[n.charCodeAt(h+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function B1(n){return nr[n>>18&63]+nr[n>>12&63]+nr[n>>6&63]+nr[n&63]}function P1(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(B1(r));return i.join("")}function O1(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(P1(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(nr[e>>2]+nr[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(nr[e>>10]+nr[e>>4&63]+nr[e<<2&63]+"=")),i.join("")}var Aa={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Aa.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,h=(1<<a)-1,b=h>>1,p=-7,d=t?i-1:0,E=t?-1:1,v=n[e+d];for(d+=E,s=v&(1<<-p)-1,v>>=-p,p+=a;p>0;s=s*256+n[e+d],d+=E,p-=8);for(o=s&(1<<-p)-1,s>>=-p,p+=r;p>0;o=o*256+n[e+d],d+=E,p-=8);if(s===0)s=1-b;else{if(s===h)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-b}return(v?-1:1)*o*Math.pow(2,s-r)};Aa.write=function(n,e,t,r,i,s){var o,a,h,b=s*8-i-1,p=(1<<b)-1,d=p>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,T=r?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+d>=1?e+=E/h:e+=E*Math.pow(2,1-d),e*h>=2&&(o++,h/=2),o+d>=p?(a=0,o=p):o+d>=1?(a=(e*h-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;n[t+v]=a&255,v+=T,a/=256,i-=8);for(o=o<<i|a,b+=i;b>0;n[t+v]=o&255,v+=T,o/=256,b-=8);n[t+v-T]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Ss,t=Aa,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=L,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const m=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(m,c),m.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(m){if(m>i)throw new RangeError('The value "'+m+'" is invalid for option "size"');const c=new Uint8Array(m);return Object.setPrototypeOf(c,a.prototype),c}function a(m,c,f){if(typeof m=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(m)}return h(m,c,f)}a.poolSize=8192;function h(m,c,f){if(typeof m=="string")return E(m,c);if(ArrayBuffer.isView(m))return T(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(ye(m,ArrayBuffer)||m&&ye(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(m,SharedArrayBuffer)||m&&ye(m.buffer,SharedArrayBuffer)))return A(m,c,f);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=m.valueOf&&m.valueOf();if(_!=null&&_!==m)return a.from(_,c,f);const N=S(m);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return a.from(m[Symbol.toPrimitive]("string"),c,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}a.from=function(m,c,f){return h(m,c,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function b(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function p(m,c,f){return b(m),m<=0?o(m):c!==void 0?typeof f=="string"?o(m).fill(c,f):o(m).fill(c):o(m)}a.alloc=function(m,c,f){return p(m,c,f)};function d(m){return b(m),o(m<0?0:k(m)|0)}a.allocUnsafe=function(m){return d(m)},a.allocUnsafeSlow=function(m){return d(m)};function E(m,c){if((typeof c!="string"||c==="")&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const f=K(m,c)|0;let _=o(f);const N=_.write(m,c);return N!==f&&(_=_.slice(0,N)),_}function v(m){const c=m.length<0?0:k(m.length)|0,f=o(c);for(let _=0;_<c;_+=1)f[_]=m[_]&255;return f}function T(m){if(ye(m,Uint8Array)){const c=new Uint8Array(m);return A(c.buffer,c.byteOffset,c.byteLength)}return v(m)}function A(m,c,f){if(c<0||m.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<c+(f||0))throw new RangeError('"length" is outside of buffer bounds');let _;return c===void 0&&f===void 0?_=new Uint8Array(m):f===void 0?_=new Uint8Array(m,c):_=new Uint8Array(m,c,f),Object.setPrototypeOf(_,a.prototype),_}function S(m){if(a.isBuffer(m)){const c=k(m.length)|0,f=o(c);return f.length===0||m.copy(f,0,0,c),f}if(m.length!==void 0)return typeof m.length!="number"||Me(m.length)?o(0):v(m);if(m.type==="Buffer"&&Array.isArray(m.data))return v(m.data)}function k(m){if(m>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return m|0}function L(m){return+m!=m&&(m=0),a.alloc(+m)}a.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},a.compare=function(c,f){if(ye(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),ye(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(c)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===f)return 0;let _=c.length,N=f.length;for(let H=0,X=Math.min(_,N);H<X;++H)if(c[H]!==f[H]){_=c[H],N=f[H];break}return _<N?-1:N<_?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,f){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let _;if(f===void 0)for(f=0,_=0;_<c.length;++_)f+=c[_].length;const N=a.allocUnsafe(f);let H=0;for(_=0;_<c.length;++_){let X=c[_];if(ye(X,Uint8Array))H+X.length>N.length?(a.isBuffer(X)||(X=a.from(X)),X.copy(N,H)):Uint8Array.prototype.set.call(N,X,H);else if(a.isBuffer(X))X.copy(N,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=X.length}return N};function K(m,c){if(a.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||ye(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const f=m.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&f===0)return 0;let N=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return re(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return ae(m).length;default:if(N)return _?-1:re(m).length;c=(""+c).toLowerCase(),N=!0}}a.byteLength=K;function z(m,c,f){let _=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,c>>>=0,f<=c))return"";for(m||(m="utf8");;)switch(m){case"hex":return O(this,c,f);case"utf8":case"utf-8":return y(this,c,f);case"ascii":return D(this,c,f);case"latin1":case"binary":return V(this,c,f);case"base64":return u(this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,c,f);default:if(_)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),_=!0}}a.prototype._isBuffer=!0;function q(m,c,f){const _=m[c];m[c]=m[f],m[f]=_}a.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<c;f+=2)q(this,f,f+1);return this},a.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<c;f+=4)q(this,f,f+3),q(this,f+1,f+2);return this},a.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<c;f+=8)q(this,f,f+7),q(this,f+1,f+6),q(this,f+2,f+5),q(this,f+3,f+4);return this},a.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?y(this,0,c):z.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},a.prototype.inspect=function(){let c="";const f=n.INSPECT_MAX_BYTES;return c=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(c+=" ... "),"<Buffer "+c+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(c,f,_,N,H){if(ye(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(f===void 0&&(f=0),_===void 0&&(_=c?c.length:0),N===void 0&&(N=0),H===void 0&&(H=this.length),f<0||_>c.length||N<0||H>this.length)throw new RangeError("out of range index");if(N>=H&&f>=_)return 0;if(N>=H)return-1;if(f>=_)return 1;if(f>>>=0,_>>>=0,N>>>=0,H>>>=0,this===c)return 0;let X=H-N,ge=_-f;const Ee=Math.min(X,ge),xe=this.slice(N,H),we=c.slice(f,_);for(let Ae=0;Ae<Ee;++Ae)if(xe[Ae]!==we[Ae]){X=xe[Ae],ge=we[Ae];break}return X<ge?-1:ge<X?1:0};function U(m,c,f,_,N){if(m.length===0)return-1;if(typeof f=="string"?(_=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Me(f)&&(f=N?0:m.length-1),f<0&&(f=m.length+f),f>=m.length){if(N)return-1;f=m.length-1}else if(f<0)if(N)f=0;else return-1;if(typeof c=="string"&&(c=a.from(c,_)),a.isBuffer(c))return c.length===0?-1:Z(m,c,f,_,N);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(m,c,f):Uint8Array.prototype.lastIndexOf.call(m,c,f):Z(m,[c],f,_,N);throw new TypeError("val must be string, number or Buffer")}function Z(m,c,f,_,N){let H=1,X=m.length,ge=c.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(m.length<2||c.length<2)return-1;H=2,X/=2,ge/=2,f/=2}function Ee(we,Ae){return H===1?we[Ae]:we.readUInt16BE(Ae*H)}let xe;if(N){let we=-1;for(xe=f;xe<X;xe++)if(Ee(m,xe)===Ee(c,we===-1?0:xe-we)){if(we===-1&&(we=xe),xe-we+1===ge)return we*H}else we!==-1&&(xe-=xe-we),we=-1}else for(f+ge>X&&(f=X-ge),xe=f;xe>=0;xe--){let we=!0;for(let Ae=0;Ae<ge;Ae++)if(Ee(m,xe+Ae)!==Ee(c,Ae)){we=!1;break}if(we)return xe}return-1}a.prototype.includes=function(c,f,_){return this.indexOf(c,f,_)!==-1},a.prototype.indexOf=function(c,f,_){return U(this,c,f,_,!0)},a.prototype.lastIndexOf=function(c,f,_){return U(this,c,f,_,!1)};function se(m,c,f,_){f=Number(f)||0;const N=m.length-f;_?(_=Number(_),_>N&&(_=N)):_=N;const H=c.length;_>H/2&&(_=H/2);let X;for(X=0;X<_;++X){const ge=parseInt(c.substr(X*2,2),16);if(Me(ge))return X;m[f+X]=ge}return X}function ne(m,c,f,_){return be(re(c,m.length-f),m,f,_)}function J(m,c,f,_){return be(le(c),m,f,_)}function M(m,c,f,_){return be(ae(c),m,f,_)}function l(m,c,f,_){return be(F(c,m.length-f),m,f,_)}a.prototype.write=function(c,f,_,N){if(f===void 0)N="utf8",_=this.length,f=0;else if(_===void 0&&typeof f=="string")N=f,_=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(_)?(_=_>>>0,N===void 0&&(N="utf8")):(N=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-f;if((_===void 0||_>H)&&(_=H),c.length>0&&(_<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let X=!1;for(;;)switch(N){case"hex":return se(this,c,f,_);case"utf8":case"utf-8":return ne(this,c,f,_);case"ascii":case"latin1":case"binary":return J(this,c,f,_);case"base64":return M(this,c,f,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,c,f,_);default:if(X)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),X=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function u(m,c,f){return c===0&&f===m.length?e.fromByteArray(m):e.fromByteArray(m.slice(c,f))}function y(m,c,f){f=Math.min(m.length,f);const _=[];let N=c;for(;N<f;){const H=m[N];let X=null,ge=H>239?4:H>223?3:H>191?2:1;if(N+ge<=f){let Ee,xe,we,Ae;switch(ge){case 1:H<128&&(X=H);break;case 2:Ee=m[N+1],(Ee&192)===128&&(Ae=(H&31)<<6|Ee&63,Ae>127&&(X=Ae));break;case 3:Ee=m[N+1],xe=m[N+2],(Ee&192)===128&&(xe&192)===128&&(Ae=(H&15)<<12|(Ee&63)<<6|xe&63,Ae>2047&&(Ae<55296||Ae>57343)&&(X=Ae));break;case 4:Ee=m[N+1],xe=m[N+2],we=m[N+3],(Ee&192)===128&&(xe&192)===128&&(we&192)===128&&(Ae=(H&15)<<18|(Ee&63)<<12|(xe&63)<<6|we&63,Ae>65535&&Ae<1114112&&(X=Ae))}}X===null?(X=65533,ge=1):X>65535&&(X-=65536,_.push(X>>>10&1023|55296),X=56320|X&1023),_.push(X),N+=ge}return R(_)}const C=4096;function R(m){const c=m.length;if(c<=C)return String.fromCharCode.apply(String,m);let f="",_=0;for(;_<c;)f+=String.fromCharCode.apply(String,m.slice(_,_+=C));return f}function D(m,c,f){let _="";f=Math.min(m.length,f);for(let N=c;N<f;++N)_+=String.fromCharCode(m[N]&127);return _}function V(m,c,f){let _="";f=Math.min(m.length,f);for(let N=c;N<f;++N)_+=String.fromCharCode(m[N]);return _}function O(m,c,f){const _=m.length;(!c||c<0)&&(c=0),(!f||f<0||f>_)&&(f=_);let N="";for(let H=c;H<f;++H)N+=Pe[m[H]];return N}function x(m,c,f){const _=m.slice(c,f);let N="";for(let H=0;H<_.length-1;H+=2)N+=String.fromCharCode(_[H]+_[H+1]*256);return N}a.prototype.slice=function(c,f){const _=this.length;c=~~c,f=f===void 0?_:~~f,c<0?(c+=_,c<0&&(c=0)):c>_&&(c=_),f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),f<c&&(f=c);const N=this.subarray(c,f);return Object.setPrototypeOf(N,a.prototype),N};function w(m,c,f){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+c>f)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(c,f,_){c=c>>>0,f=f>>>0,_||w(c,f,this.length);let N=this[c],H=1,X=0;for(;++X<f&&(H*=256);)N+=this[c+X]*H;return N},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,f,_){c=c>>>0,f=f>>>0,_||w(c,f,this.length);let N=this[c+--f],H=1;for(;f>0&&(H*=256);)N+=this[c+--f]*H;return N},a.prototype.readUint8=a.prototype.readUInt8=function(c,f){return c=c>>>0,f||w(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,f){return c=c>>>0,f||w(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,f){return c=c>>>0,f||w(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,f){return c=c>>>0,f||w(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,f){return c=c>>>0,f||w(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readBigUInt64LE=_e(function(c){c=c>>>0,ue(c,"offset");const f=this[c],_=this[c+7];(f===void 0||_===void 0)&&he(c,this.length-8);const N=f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,H=this[++c]+this[++c]*2**8+this[++c]*2**16+_*2**24;return BigInt(N)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=_e(function(c){c=c>>>0,ue(c,"offset");const f=this[c],_=this[c+7];(f===void 0||_===void 0)&&he(c,this.length-8);const N=f*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],H=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+_;return(BigInt(N)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(c,f,_){c=c>>>0,f=f>>>0,_||w(c,f,this.length);let N=this[c],H=1,X=0;for(;++X<f&&(H*=256);)N+=this[c+X]*H;return H*=128,N>=H&&(N-=Math.pow(2,8*f)),N},a.prototype.readIntBE=function(c,f,_){c=c>>>0,f=f>>>0,_||w(c,f,this.length);let N=f,H=1,X=this[c+--N];for(;N>0&&(H*=256);)X+=this[c+--N]*H;return H*=128,X>=H&&(X-=Math.pow(2,8*f)),X},a.prototype.readInt8=function(c,f){return c=c>>>0,f||w(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},a.prototype.readInt16LE=function(c,f){c=c>>>0,f||w(c,2,this.length);const _=this[c]|this[c+1]<<8;return _&32768?_|4294901760:_},a.prototype.readInt16BE=function(c,f){c=c>>>0,f||w(c,2,this.length);const _=this[c+1]|this[c]<<8;return _&32768?_|4294901760:_},a.prototype.readInt32LE=function(c,f){return c=c>>>0,f||w(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,f){return c=c>>>0,f||w(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readBigInt64LE=_e(function(c){c=c>>>0,ue(c,"offset");const f=this[c],_=this[c+7];(f===void 0||_===void 0)&&he(c,this.length-8);const N=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(_<<24);return(BigInt(N)<<BigInt(32))+BigInt(f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),a.prototype.readBigInt64BE=_e(function(c){c=c>>>0,ue(c,"offset");const f=this[c],_=this[c+7];(f===void 0||_===void 0)&&he(c,this.length-8);const N=(f<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(N)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+_)}),a.prototype.readFloatLE=function(c,f){return c=c>>>0,f||w(c,4,this.length),t.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,f){return c=c>>>0,f||w(c,4,this.length),t.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,f){return c=c>>>0,f||w(c,8,this.length),t.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,f){return c=c>>>0,f||w(c,8,this.length),t.read(this,c,!1,52,8)};function I(m,c,f,_,N,H){if(!a.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>N||c<H)throw new RangeError('"value" argument is out of bounds');if(f+_>m.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,f,_,N){if(c=+c,f=f>>>0,_=_>>>0,!N){const ge=Math.pow(2,8*_)-1;I(this,c,f,_,ge,0)}let H=1,X=0;for(this[f]=c&255;++X<_&&(H*=256);)this[f+X]=c/H&255;return f+_},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,f,_,N){if(c=+c,f=f>>>0,_=_>>>0,!N){const ge=Math.pow(2,8*_)-1;I(this,c,f,_,ge,0)}let H=_-1,X=1;for(this[f+H]=c&255;--H>=0&&(X*=256);)this[f+H]=c/X&255;return f+_},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,1,255,0),this[f]=c&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,2,65535,0),this[f]=c&255,this[f+1]=c>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,2,65535,0),this[f]=c>>>8,this[f+1]=c&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,4,4294967295,0),this[f+3]=c>>>24,this[f+2]=c>>>16,this[f+1]=c>>>8,this[f]=c&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,4,4294967295,0),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4};function B(m,c,f,_,N){oe(c,_,N,m,f,7);let H=Number(c&BigInt(4294967295));m[f++]=H,H=H>>8,m[f++]=H,H=H>>8,m[f++]=H,H=H>>8,m[f++]=H;let X=Number(c>>BigInt(32)&BigInt(4294967295));return m[f++]=X,X=X>>8,m[f++]=X,X=X>>8,m[f++]=X,X=X>>8,m[f++]=X,f}function j(m,c,f,_,N){oe(c,_,N,m,f,7);let H=Number(c&BigInt(4294967295));m[f+7]=H,H=H>>8,m[f+6]=H,H=H>>8,m[f+5]=H,H=H>>8,m[f+4]=H;let X=Number(c>>BigInt(32)&BigInt(4294967295));return m[f+3]=X,X=X>>8,m[f+2]=X,X=X>>8,m[f+1]=X,X=X>>8,m[f]=X,f+8}a.prototype.writeBigUInt64LE=_e(function(c,f=0){return B(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=_e(function(c,f=0){return j(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(c,f,_,N){if(c=+c,f=f>>>0,!N){const Ee=Math.pow(2,8*_-1);I(this,c,f,_,Ee-1,-Ee)}let H=0,X=1,ge=0;for(this[f]=c&255;++H<_&&(X*=256);)c<0&&ge===0&&this[f+H-1]!==0&&(ge=1),this[f+H]=(c/X>>0)-ge&255;return f+_},a.prototype.writeIntBE=function(c,f,_,N){if(c=+c,f=f>>>0,!N){const Ee=Math.pow(2,8*_-1);I(this,c,f,_,Ee-1,-Ee)}let H=_-1,X=1,ge=0;for(this[f+H]=c&255;--H>=0&&(X*=256);)c<0&&ge===0&&this[f+H+1]!==0&&(ge=1),this[f+H]=(c/X>>0)-ge&255;return f+_},a.prototype.writeInt8=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,1,127,-128),c<0&&(c=255+c+1),this[f]=c&255,f+1},a.prototype.writeInt16LE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,2,32767,-32768),this[f]=c&255,this[f+1]=c>>>8,f+2},a.prototype.writeInt16BE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,2,32767,-32768),this[f]=c>>>8,this[f+1]=c&255,f+2},a.prototype.writeInt32LE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,4,2147483647,-2147483648),this[f]=c&255,this[f+1]=c>>>8,this[f+2]=c>>>16,this[f+3]=c>>>24,f+4},a.prototype.writeInt32BE=function(c,f,_){return c=+c,f=f>>>0,_||I(this,c,f,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4},a.prototype.writeBigInt64LE=_e(function(c,f=0){return B(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=_e(function(c,f=0){return j(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function g(m,c,f,_,N,H){if(f+_>m.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function Y(m,c,f,_,N){return c=+c,f=f>>>0,N||g(m,c,f,4),t.write(m,c,f,_,23,4),f+4}a.prototype.writeFloatLE=function(c,f,_){return Y(this,c,f,!0,_)},a.prototype.writeFloatBE=function(c,f,_){return Y(this,c,f,!1,_)};function Q(m,c,f,_,N){return c=+c,f=f>>>0,N||g(m,c,f,8),t.write(m,c,f,_,52,8),f+8}a.prototype.writeDoubleLE=function(c,f,_){return Q(this,c,f,!0,_)},a.prototype.writeDoubleBE=function(c,f,_){return Q(this,c,f,!1,_)},a.prototype.copy=function(c,f,_,N){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(_||(_=0),!N&&N!==0&&(N=this.length),f>=c.length&&(f=c.length),f||(f=0),N>0&&N<_&&(N=_),N===_||c.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),c.length-f<N-_&&(N=c.length-f+_);const H=N-_;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,_,N):Uint8Array.prototype.set.call(c,this.subarray(_,N),f),H},a.prototype.fill=function(c,f,_,N){if(typeof c=="string"){if(typeof f=="string"?(N=f,f=0,_=this.length):typeof _=="string"&&(N=_,_=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(c.length===1){const X=c.charCodeAt(0);(N==="utf8"&&X<128||N==="latin1")&&(c=X)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(f<0||this.length<f||this.length<_)throw new RangeError("Out of range index");if(_<=f)return this;f=f>>>0,_=_===void 0?this.length:_>>>0,c||(c=0);let H;if(typeof c=="number")for(H=f;H<_;++H)this[H]=c;else{const X=a.isBuffer(c)?c:a.from(c,N),ge=X.length;if(ge===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(H=0;H<_-f;++H)this[H+f]=X[H%ge]}return this};const $={};function P(m,c,f){$[m]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}P("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(m,c){return`The "${m}" argument must be of type number. Received type ${typeof c}`},TypeError),P("ERR_OUT_OF_RANGE",function(m,c,f){let _=`The value of "${m}" is out of range.`,N=f;return Number.isInteger(f)&&Math.abs(f)>2**32?N=G(String(f)):typeof f=="bigint"&&(N=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(N=G(N)),N+="n"),_+=` It must be ${c}. Received ${N}`,_},RangeError);function G(m){let c="",f=m.length;const _=m[0]==="-"?1:0;for(;f>=_+4;f-=3)c=`_${m.slice(f-3,f)}${c}`;return`${m.slice(0,f)}${c}`}function te(m,c,f){ue(c,"offset"),(m[c]===void 0||m[c+f]===void 0)&&he(c,m.length-(f+1))}function oe(m,c,f,_,N,H){if(m>f||m<c){const X=typeof c=="bigint"?"n":"";let ge;throw H>3?c===0||c===BigInt(0)?ge=`>= 0${X} and < 2${X} ** ${(H+1)*8}${X}`:ge=`>= -(2${X} ** ${(H+1)*8-1}${X}) and < 2 ** ${(H+1)*8-1}${X}`:ge=`>= ${c}${X} and <= ${f}${X}`,new $.ERR_OUT_OF_RANGE("value",ge,m)}te(_,N,H)}function ue(m,c){if(typeof m!="number")throw new $.ERR_INVALID_ARG_TYPE(c,"number",m)}function he(m,c,f){throw Math.floor(m)!==m?(ue(m,f),new $.ERR_OUT_OF_RANGE(f||"offset","an integer",m)):c<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${c}`,m)}const ee=/[^+/0-9A-Za-z-_]/g;function fe(m){if(m=m.split("=")[0],m=m.trim().replace(ee,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function re(m,c){c=c||1/0;let f;const _=m.length;let N=null;const H=[];for(let X=0;X<_;++X){if(f=m.charCodeAt(X),f>55295&&f<57344){if(!N){if(f>56319){(c-=3)>-1&&H.push(239,191,189);continue}else if(X+1===_){(c-=3)>-1&&H.push(239,191,189);continue}N=f;continue}if(f<56320){(c-=3)>-1&&H.push(239,191,189),N=f;continue}f=(N-55296<<10|f-56320)+65536}else N&&(c-=3)>-1&&H.push(239,191,189);if(N=null,f<128){if((c-=1)<0)break;H.push(f)}else if(f<2048){if((c-=2)<0)break;H.push(f>>6|192,f&63|128)}else if(f<65536){if((c-=3)<0)break;H.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((c-=4)<0)break;H.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return H}function le(m){const c=[];for(let f=0;f<m.length;++f)c.push(m.charCodeAt(f)&255);return c}function F(m,c){let f,_,N;const H=[];for(let X=0;X<m.length&&!((c-=2)<0);++X)f=m.charCodeAt(X),_=f>>8,N=f%256,H.push(N),H.push(_);return H}function ae(m){return e.toByteArray(fe(m))}function be(m,c,f,_){let N;for(N=0;N<_&&!(N+f>=c.length||N>=m.length);++N)c[N+f]=m[N];return N}function ye(m,c){return m instanceof c||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===c.name}function Me(m){return m!==m}const Pe=function(){const m="0123456789abcdef",c=new Array(256);for(let f=0;f<16;++f){const _=f*16;for(let N=0;N<16;++N)c[_+N]=m[f]+m[N]}return c}();function _e(m){return typeof BigInt>"u"?ie:m}function ie(){throw new Error("BigInt not supported")}})(ef);window.Buffer=ef.Buffer;const I1=window.location.host,L1=window.location.origin,Ta=new ki(window.ethereum),zo=Ta.getSigner();function $1(n){return new Ul.SiweMessage({domain:I1,address:n,uri:L1,version:"1",chainId:1}).prepareMessage()}const rf=await Ta.listAccounts();console.log(rf);if(rf.length==0){document.querySelector("#login").innerHTML="<button id='connectWalletBtn'>Connect wallet</button>";const n=document.getElementById("connectWalletBtn");n!=null&&(n.onclick=F1)}else{const n=await zo.getAddress();document.querySelector("#login").innerHTML=`<button id='siweBtn'>Sign-in with Ethereum with ${n}</button>`;const e=document.getElementById("siweBtn");e!=null&&(e.onclick=U1)}function F1(){Ta.send("eth_requestAccounts",[]).catch(()=>console.log("user rejected request"))}async function U1(){const n=$1(await zo.getAddress()),e=await zo.signMessage(n),t=document.getElementById("signature");t!=null&&(t.value=e,console.log(t));const r=document.getElementById("message");if(r!=null){for(var i="",s=0;s<n.length;s++){var o=n.charCodeAt(s).toString(16);i+=("000"+o).slice(-2)}r.value=i}const a=document.getElementById("loginform");a!=null&&(console.log(a),a.submit())}
